<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>feat: better friend add list - alert dialogs - SnapEnhance - An Xposed module offering an enhanced Snapchat experience
</title>
<link rel="icon" type="image/svg+xml" href="../../logo.png"/>
<link rel="alternate icon" href="../../favicon.png"/>
<link rel="alternate" type="application/atom+xml" title="SnapEnhance Atom Feed" href="../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="SnapEnhance Atom Feed (tags)" href="../tags.xml" />
<link rel="stylesheet" type="text/css" href="../../style.css" />
<link rel="stylesheet" type="text/css" href="../../fonts.css" />
</head>
<body>
<div id="head"><table><tr><td><a class="logo" href="../../"><img src="../../logo.png" alt="" width="32" height="32" /></a></td><td><strong>SnapEnhance</strong><span class="desc"> - An Xposed module offering an enhanced Snapchat experience
</span>
</td></tr></table>
<p><a href="../about.html">About</a> | <a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/LICENSE.html">License</a></p>
</div>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/7703d3f007dc661624de1c2c6786d51132add223.html">7703d3f007dc661624de1c2c6786d51132add223</a>
<b>parent</b> <a href="../commit/5fbfd5030ca83f3f2ad5a9fc31b55cc33dac06d5.html">5fbfd5030ca83f3f2ad5a9fc31b55cc33dac06d5</a>
<b>Author:</b> rhunk &lt;<a href="mailto:101876869+rhunk@users.noreply.github.com">101876869+rhunk@users.noreply.github.com</a>&gt;
<b>Date:</b>   Wed, 23 Aug 2023 16:19:31 +0200

feat: better friend add list
- alert dialogs

<b>Diffstat:</b>
<table><tr><td class="D">D</td><td><a href="#h0">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/Dialogs.kt</a></td><td> | </td><td class="num">212</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt</a></td><td> | </td><td class="num">9</td><td><span class="i">+++++</span><span class="d">----</span></td></tr>
<tr><td class="M">M</td><td><a href="#h2">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt</a></td><td> | </td><td class="num">206</td><td><span class="i">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">-------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h3">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/ScopeContent.kt</a></td><td> | </td><td class="num">28</td><td><span class="i">+++++++++++</span><span class="d">-----------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h4">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/SocialSection.kt</a></td><td> | </td><td class="num">41</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h5">app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/MappingsScreen.kt</a></td><td> | </td><td class="num">22</td><td><span class="i">++++++</span><span class="d">----------------</span></td></tr>
<tr><td class="A">A</td><td><a href="#h6">app/src/main/kotlin/me/rhunk/snapenhance/ui/util/AlertDialogs.kt</a></td><td> | </td><td class="num">276</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
</table></pre><pre>7 files changed, 509 insertions(+), 285 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/Dialogs.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/Dialogs.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/Dialogs.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/Dialogs.kt</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -1,212 +0,0 @@
</a><a href="#h0-0-0" id="h0-0-0" class="d">-package me.rhunk.snapenhance.ui.manager.sections.features
</a><a href="#h0-0-1" id="h0-0-1" class="d">-
</a><a href="#h0-0-2" id="h0-0-2" class="d">-import androidx.compose.foundation.ScrollState
</a><a href="#h0-0-3" id="h0-0-3" class="d">-import androidx.compose.foundation.clickable
</a><a href="#h0-0-4" id="h0-0-4" class="d">-import androidx.compose.foundation.layout.Arrangement
</a><a href="#h0-0-5" id="h0-0-5" class="d">-import androidx.compose.foundation.layout.Column
</a><a href="#h0-0-6" id="h0-0-6" class="d">-import androidx.compose.foundation.layout.ColumnScope
</a><a href="#h0-0-7" id="h0-0-7" class="d">-import androidx.compose.foundation.layout.Row
</a><a href="#h0-0-8" id="h0-0-8" class="d">-import androidx.compose.foundation.layout.fillMaxWidth
</a><a href="#h0-0-9" id="h0-0-9" class="d">-import androidx.compose.foundation.layout.padding
</a><a href="#h0-0-10" id="h0-0-10" class="d">-import androidx.compose.foundation.text.KeyboardOptions
</a><a href="#h0-0-11" id="h0-0-11" class="d">-import androidx.compose.foundation.verticalScroll
</a><a href="#h0-0-12" id="h0-0-12" class="d">-import androidx.compose.material3.Button
</a><a href="#h0-0-13" id="h0-0-13" class="d">-import androidx.compose.material3.Card
</a><a href="#h0-0-14" id="h0-0-14" class="d">-import androidx.compose.material3.MaterialTheme
</a><a href="#h0-0-15" id="h0-0-15" class="d">-import androidx.compose.material3.RadioButton
</a><a href="#h0-0-16" id="h0-0-16" class="d">-import androidx.compose.material3.Switch
</a><a href="#h0-0-17" id="h0-0-17" class="d">-import androidx.compose.material3.Text
</a><a href="#h0-0-18" id="h0-0-18" class="d">-import androidx.compose.material3.TextField
</a><a href="#h0-0-19" id="h0-0-19" class="d">-import androidx.compose.runtime.Composable
</a><a href="#h0-0-20" id="h0-0-20" class="d">-import androidx.compose.runtime.getValue
</a><a href="#h0-0-21" id="h0-0-21" class="d">-import androidx.compose.runtime.mutableStateOf
</a><a href="#h0-0-22" id="h0-0-22" class="d">-import androidx.compose.runtime.remember
</a><a href="#h0-0-23" id="h0-0-23" class="d">-import androidx.compose.runtime.setValue
</a><a href="#h0-0-24" id="h0-0-24" class="d">-import androidx.compose.ui.Alignment
</a><a href="#h0-0-25" id="h0-0-25" class="d">-import androidx.compose.ui.Modifier
</a><a href="#h0-0-26" id="h0-0-26" class="d">-import androidx.compose.ui.focus.FocusRequester
</a><a href="#h0-0-27" id="h0-0-27" class="d">-import androidx.compose.ui.focus.focusRequester
</a><a href="#h0-0-28" id="h0-0-28" class="d">-import androidx.compose.ui.layout.onGloballyPositioned
</a><a href="#h0-0-29" id="h0-0-29" class="d">-import androidx.compose.ui.text.TextRange
</a><a href="#h0-0-30" id="h0-0-30" class="d">-import androidx.compose.ui.text.input.KeyboardType
</a><a href="#h0-0-31" id="h0-0-31" class="d">-import androidx.compose.ui.text.input.TextFieldValue
</a><a href="#h0-0-32" id="h0-0-32" class="d">-import androidx.compose.ui.unit.dp
</a><a href="#h0-0-33" id="h0-0-33" class="d">-import me.rhunk.snapenhance.bridge.wrapper.LocaleWrapper
</a><a href="#h0-0-34" id="h0-0-34" class="d">-import me.rhunk.snapenhance.core.config.DataProcessors
</a><a href="#h0-0-35" id="h0-0-35" class="d">-import me.rhunk.snapenhance.core.config.PropertyPair
</a><a href="#h0-0-36" id="h0-0-36" class="d">-
</a><a href="#h0-0-37" id="h0-0-37" class="d">-
</a><a href="#h0-0-38" id="h0-0-38" class="d">-class Dialogs(
</a><a href="#h0-0-39" id="h0-0-39" class="d">-    private val translation: LocaleWrapper,
</a><a href="#h0-0-40" id="h0-0-40" class="d">-){
</a><a href="#h0-0-41" id="h0-0-41" class="d">-    @Composable
</a><a href="#h0-0-42" id="h0-0-42" class="d">-    fun DefaultDialogCard(content: @Composable ColumnScope.() -&gt; Unit) {
</a><a href="#h0-0-43" id="h0-0-43" class="d">-        Card(
</a><a href="#h0-0-44" id="h0-0-44" class="d">-            shape = MaterialTheme.shapes.medium,
</a><a href="#h0-0-45" id="h0-0-45" class="d">-            modifier = Modifier
</a><a href="#h0-0-46" id="h0-0-46" class="d">-                .padding(10.dp, 5.dp, 10.dp, 10.dp),
</a><a href="#h0-0-47" id="h0-0-47" class="d">-        ) {
</a><a href="#h0-0-48" id="h0-0-48" class="d">-            Column(
</a><a href="#h0-0-49" id="h0-0-49" class="d">-                modifier = Modifier
</a><a href="#h0-0-50" id="h0-0-50" class="d">-                    .padding(10.dp, 10.dp, 10.dp, 10.dp)
</a><a href="#h0-0-51" id="h0-0-51" class="d">-                    .verticalScroll(ScrollState(0)),
</a><a href="#h0-0-52" id="h0-0-52" class="d">-            ) { content() }
</a><a href="#h0-0-53" id="h0-0-53" class="d">-        }
</a><a href="#h0-0-54" id="h0-0-54" class="d">-    }
</a><a href="#h0-0-55" id="h0-0-55" class="d">-
</a><a href="#h0-0-56" id="h0-0-56" class="d">-    @Composable
</a><a href="#h0-0-57" id="h0-0-57" class="d">-    fun TranslatedText(property: PropertyPair&lt;*&gt;, key: String, modifier: Modifier = Modifier) {
</a><a href="#h0-0-58" id="h0-0-58" class="d">-        Text(
</a><a href="#h0-0-59" id="h0-0-59" class="d">-            text = property.key.propertyOption(translation, key),
</a><a href="#h0-0-60" id="h0-0-60" class="d">-            modifier = Modifier
</a><a href="#h0-0-61" id="h0-0-61" class="d">-                .padding(10.dp, 10.dp, 10.dp, 10.dp)
</a><a href="#h0-0-62" id="h0-0-62" class="d">-                .then(modifier)
</a><a href="#h0-0-63" id="h0-0-63" class="d">-        )
</a><a href="#h0-0-64" id="h0-0-64" class="d">-    }
</a><a href="#h0-0-65" id="h0-0-65" class="d">-
</a><a href="#h0-0-66" id="h0-0-66" class="d">-    @Composable
</a><a href="#h0-0-67" id="h0-0-67" class="d">-    @Suppress(&quot;UNCHECKED_CAST&quot;)
</a><a href="#h0-0-68" id="h0-0-68" class="d">-    fun UniqueSelectionDialog(property: PropertyPair&lt;*&gt;) {
</a><a href="#h0-0-69" id="h0-0-69" class="d">-        val keys = (property.value.defaultValues as List&lt;String&gt;).toMutableList().apply {
</a><a href="#h0-0-70" id="h0-0-70" class="d">-            add(0, &quot;null&quot;)
</a><a href="#h0-0-71" id="h0-0-71" class="d">-        }
</a><a href="#h0-0-72" id="h0-0-72" class="d">-
</a><a href="#h0-0-73" id="h0-0-73" class="d">-        var selectedValue by remember {
</a><a href="#h0-0-74" id="h0-0-74" class="d">-            mutableStateOf(property.value.getNullable()?.toString() ?: &quot;null&quot;)
</a><a href="#h0-0-75" id="h0-0-75" class="d">-        }
</a><a href="#h0-0-76" id="h0-0-76" class="d">-
</a><a href="#h0-0-77" id="h0-0-77" class="d">-        DefaultDialogCard {
</a><a href="#h0-0-78" id="h0-0-78" class="d">-            keys.forEachIndexed { index, item -&gt;
</a><a href="#h0-0-79" id="h0-0-79" class="d">-                fun select() {
</a><a href="#h0-0-80" id="h0-0-80" class="d">-                    selectedValue = item
</a><a href="#h0-0-81" id="h0-0-81" class="d">-                    property.value.setAny(if (index == 0) {
</a><a href="#h0-0-82" id="h0-0-82" class="d">-                        null
</a><a href="#h0-0-83" id="h0-0-83" class="d">-                    } else {
</a><a href="#h0-0-84" id="h0-0-84" class="d">-                        item
</a><a href="#h0-0-85" id="h0-0-85" class="d">-                    })
</a><a href="#h0-0-86" id="h0-0-86" class="d">-                }
</a><a href="#h0-0-87" id="h0-0-87" class="d">-
</a><a href="#h0-0-88" id="h0-0-88" class="d">-                Row(
</a><a href="#h0-0-89" id="h0-0-89" class="d">-                    modifier = Modifier.clickable { select() },
</a><a href="#h0-0-90" id="h0-0-90" class="d">-                    verticalAlignment = Alignment.CenterVertically
</a><a href="#h0-0-91" id="h0-0-91" class="d">-                ) {
</a><a href="#h0-0-92" id="h0-0-92" class="d">-                    TranslatedText(
</a><a href="#h0-0-93" id="h0-0-93" class="d">-                        property = property,
</a><a href="#h0-0-94" id="h0-0-94" class="d">-                        key = item,
</a><a href="#h0-0-95" id="h0-0-95" class="d">-                        modifier = Modifier.weight(1f)
</a><a href="#h0-0-96" id="h0-0-96" class="d">-                    )
</a><a href="#h0-0-97" id="h0-0-97" class="d">-                    RadioButton(
</a><a href="#h0-0-98" id="h0-0-98" class="d">-                        selected = selectedValue == item,
</a><a href="#h0-0-99" id="h0-0-99" class="d">-                        onClick = { select() }
</a><a href="#h0-0-100" id="h0-0-100" class="d">-                    )
</a><a href="#h0-0-101" id="h0-0-101" class="d">-                }
</a><a href="#h0-0-102" id="h0-0-102" class="d">-            }
</a><a href="#h0-0-103" id="h0-0-103" class="d">-        }
</a><a href="#h0-0-104" id="h0-0-104" class="d">-    }
</a><a href="#h0-0-105" id="h0-0-105" class="d">-
</a><a href="#h0-0-106" id="h0-0-106" class="d">-    @Composable
</a><a href="#h0-0-107" id="h0-0-107" class="d">-    fun KeyboardInputDialog(property: PropertyPair&lt;*&gt;, dismiss: () -&gt; Unit = {}) {
</a><a href="#h0-0-108" id="h0-0-108" class="d">-        val focusRequester = remember { FocusRequester() }
</a><a href="#h0-0-109" id="h0-0-109" class="d">-
</a><a href="#h0-0-110" id="h0-0-110" class="d">-        DefaultDialogCard {
</a><a href="#h0-0-111" id="h0-0-111" class="d">-            val fieldValue = remember {
</a><a href="#h0-0-112" id="h0-0-112" class="d">-                mutableStateOf(property.value.get().toString().let {
</a><a href="#h0-0-113" id="h0-0-113" class="d">-                    TextFieldValue(
</a><a href="#h0-0-114" id="h0-0-114" class="d">-                        text = it,
</a><a href="#h0-0-115" id="h0-0-115" class="d">-                        selection = TextRange(it.length)
</a><a href="#h0-0-116" id="h0-0-116" class="d">-                    )
</a><a href="#h0-0-117" id="h0-0-117" class="d">-                })
</a><a href="#h0-0-118" id="h0-0-118" class="d">-            }
</a><a href="#h0-0-119" id="h0-0-119" class="d">-
</a><a href="#h0-0-120" id="h0-0-120" class="d">-            TextField(
</a><a href="#h0-0-121" id="h0-0-121" class="d">-                modifier = Modifier
</a><a href="#h0-0-122" id="h0-0-122" class="d">-                    .fillMaxWidth()
</a><a href="#h0-0-123" id="h0-0-123" class="d">-                    .padding(all = 10.dp)
</a><a href="#h0-0-124" id="h0-0-124" class="d">-                    .onGloballyPositioned {
</a><a href="#h0-0-125" id="h0-0-125" class="d">-                        focusRequester.requestFocus()
</a><a href="#h0-0-126" id="h0-0-126" class="d">-                    }
</a><a href="#h0-0-127" id="h0-0-127" class="d">-                    .focusRequester(focusRequester),
</a><a href="#h0-0-128" id="h0-0-128" class="d">-                value = fieldValue.value,
</a><a href="#h0-0-129" id="h0-0-129" class="d">-                onValueChange = {
</a><a href="#h0-0-130" id="h0-0-130" class="d">-                    fieldValue.value = it
</a><a href="#h0-0-131" id="h0-0-131" class="d">-                },
</a><a href="#h0-0-132" id="h0-0-132" class="d">-                keyboardOptions = when (property.key.dataType.type) {
</a><a href="#h0-0-133" id="h0-0-133" class="d">-                    DataProcessors.Type.INTEGER -&gt; KeyboardOptions(keyboardType = KeyboardType.Number)
</a><a href="#h0-0-134" id="h0-0-134" class="d">-                    DataProcessors.Type.FLOAT -&gt; KeyboardOptions(keyboardType = KeyboardType.Decimal)
</a><a href="#h0-0-135" id="h0-0-135" class="d">-                    else -&gt; KeyboardOptions(keyboardType = KeyboardType.Text)
</a><a href="#h0-0-136" id="h0-0-136" class="d">-                },
</a><a href="#h0-0-137" id="h0-0-137" class="d">-                singleLine = true
</a><a href="#h0-0-138" id="h0-0-138" class="d">-            )
</a><a href="#h0-0-139" id="h0-0-139" class="d">-
</a><a href="#h0-0-140" id="h0-0-140" class="d">-            Row(
</a><a href="#h0-0-141" id="h0-0-141" class="d">-                modifier = Modifier.padding(top = 10.dp).fillMaxWidth(),
</a><a href="#h0-0-142" id="h0-0-142" class="d">-                horizontalArrangement = Arrangement.SpaceEvenly,
</a><a href="#h0-0-143" id="h0-0-143" class="d">-            ) {
</a><a href="#h0-0-144" id="h0-0-144" class="d">-                Button(onClick = { dismiss() }) {
</a><a href="#h0-0-145" id="h0-0-145" class="d">-                    Text(text = &quot;Cancel&quot;)
</a><a href="#h0-0-146" id="h0-0-146" class="d">-                }
</a><a href="#h0-0-147" id="h0-0-147" class="d">-                Button(onClick = {
</a><a href="#h0-0-148" id="h0-0-148" class="d">-                    when (property.key.dataType.type) {
</a><a href="#h0-0-149" id="h0-0-149" class="d">-                        DataProcessors.Type.INTEGER -&gt; {
</a><a href="#h0-0-150" id="h0-0-150" class="d">-                            runCatching {
</a><a href="#h0-0-151" id="h0-0-151" class="d">-                                property.value.setAny(fieldValue.value.text.toInt())
</a><a href="#h0-0-152" id="h0-0-152" class="d">-                            }.onFailure {
</a><a href="#h0-0-153" id="h0-0-153" class="d">-                                property.value.setAny(0)
</a><a href="#h0-0-154" id="h0-0-154" class="d">-                            }
</a><a href="#h0-0-155" id="h0-0-155" class="d">-                        }
</a><a href="#h0-0-156" id="h0-0-156" class="d">-                        DataProcessors.Type.FLOAT -&gt; {
</a><a href="#h0-0-157" id="h0-0-157" class="d">-                            runCatching {
</a><a href="#h0-0-158" id="h0-0-158" class="d">-                                property.value.setAny(fieldValue.value.text.toFloat())
</a><a href="#h0-0-159" id="h0-0-159" class="d">-                            }.onFailure {
</a><a href="#h0-0-160" id="h0-0-160" class="d">-                                property.value.setAny(0f)
</a><a href="#h0-0-161" id="h0-0-161" class="d">-                            }
</a><a href="#h0-0-162" id="h0-0-162" class="d">-                        }
</a><a href="#h0-0-163" id="h0-0-163" class="d">-                        else -&gt; property.value.setAny(fieldValue.value.text)
</a><a href="#h0-0-164" id="h0-0-164" class="d">-                    }
</a><a href="#h0-0-165" id="h0-0-165" class="d">-                    dismiss()
</a><a href="#h0-0-166" id="h0-0-166" class="d">-                }) {
</a><a href="#h0-0-167" id="h0-0-167" class="d">-                    Text(text = &quot;Ok&quot;)
</a><a href="#h0-0-168" id="h0-0-168" class="d">-                }
</a><a href="#h0-0-169" id="h0-0-169" class="d">-            }
</a><a href="#h0-0-170" id="h0-0-170" class="d">-        }
</a><a href="#h0-0-171" id="h0-0-171" class="d">-    }
</a><a href="#h0-0-172" id="h0-0-172" class="d">-
</a><a href="#h0-0-173" id="h0-0-173" class="d">-    @Composable
</a><a href="#h0-0-174" id="h0-0-174" class="d">-    @Suppress(&quot;UNCHECKED_CAST&quot;)
</a><a href="#h0-0-175" id="h0-0-175" class="d">-    fun MultipleSelectionDialog(property: PropertyPair&lt;*&gt;) {
</a><a href="#h0-0-176" id="h0-0-176" class="d">-        val defaultItems = property.value.defaultValues as List&lt;String&gt;
</a><a href="#h0-0-177" id="h0-0-177" class="d">-        val toggledStates = property.value.get() as MutableList&lt;String&gt;
</a><a href="#h0-0-178" id="h0-0-178" class="d">-        DefaultDialogCard {
</a><a href="#h0-0-179" id="h0-0-179" class="d">-            defaultItems.forEach { key -&gt;
</a><a href="#h0-0-180" id="h0-0-180" class="d">-                var state by remember { mutableStateOf(toggledStates.contains(key)) }
</a><a href="#h0-0-181" id="h0-0-181" class="d">-
</a><a href="#h0-0-182" id="h0-0-182" class="d">-                fun toggle(value: Boolean? = null) {
</a><a href="#h0-0-183" id="h0-0-183" class="d">-                    state = value ?: !state
</a><a href="#h0-0-184" id="h0-0-184" class="d">-                    if (state) {
</a><a href="#h0-0-185" id="h0-0-185" class="d">-                        toggledStates.add(key)
</a><a href="#h0-0-186" id="h0-0-186" class="d">-                    } else {
</a><a href="#h0-0-187" id="h0-0-187" class="d">-                        toggledStates.remove(key)
</a><a href="#h0-0-188" id="h0-0-188" class="d">-                    }
</a><a href="#h0-0-189" id="h0-0-189" class="d">-                }
</a><a href="#h0-0-190" id="h0-0-190" class="d">-
</a><a href="#h0-0-191" id="h0-0-191" class="d">-                Row(
</a><a href="#h0-0-192" id="h0-0-192" class="d">-                    modifier = Modifier.clickable { toggle() },
</a><a href="#h0-0-193" id="h0-0-193" class="d">-                    verticalAlignment = Alignment.CenterVertically
</a><a href="#h0-0-194" id="h0-0-194" class="d">-                ) {
</a><a href="#h0-0-195" id="h0-0-195" class="d">-                    TranslatedText(
</a><a href="#h0-0-196" id="h0-0-196" class="d">-                        property = property,
</a><a href="#h0-0-197" id="h0-0-197" class="d">-                        key = key,
</a><a href="#h0-0-198" id="h0-0-198" class="d">-                        modifier = Modifier
</a><a href="#h0-0-199" id="h0-0-199" class="d">-                            .weight(1f)
</a><a href="#h0-0-200" id="h0-0-200" class="d">-                    )
</a><a href="#h0-0-201" id="h0-0-201" class="d">-                    Switch(
</a><a href="#h0-0-202" id="h0-0-202" class="d">-                        checked = state,
</a><a href="#h0-0-203" id="h0-0-203" class="d">-                        onCheckedChange = {
</a><a href="#h0-0-204" id="h0-0-204" class="d">-                            toggle(it)
</a><a href="#h0-0-205" id="h0-0-205" class="d">-                        }
</a><a href="#h0-0-206" id="h0-0-206" class="d">-                    )
</a><a href="#h0-0-207" id="h0-0-207" class="d">-                }
</a><a href="#h0-0-208" id="h0-0-208" class="d">-            }
</a><a href="#h0-0-209" id="h0-0-209" class="d">-        }
</a><a href="#h0-0-210" id="h0-0-210" class="d">-    }
</a><a href="#h0-0-211" id="h0-0-211" class="d">-}
</a><b>diff --git a/<a id="h1" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -81,13 +81,14 @@ import me.rhunk.snapenhance.core.config.PropertyPair
</a> import me.rhunk.snapenhance.core.config.PropertyValue
 import me.rhunk.snapenhance.ui.manager.Section
 import me.rhunk.snapenhance.ui.util.ActivityLauncherHelper
<a href="#h1-0-3" id="h1-0-3" class="i">+import me.rhunk.snapenhance.ui.util.AlertDialogs
</a> import me.rhunk.snapenhance.ui.util.chooseFolder
 import me.rhunk.snapenhance.ui.util.openFile
 import me.rhunk.snapenhance.ui.util.saveFile
 
 @OptIn(ExperimentalMaterial3Api::class)
 class FeaturesSection : Section() {
<a href="#h1-0-10" id="h1-0-10" class="d">-    private val dialogs by lazy { Dialogs(context.translation) }
</a><a href="#h1-0-11" id="h1-0-11" class="i">+    private val alertDialogs by lazy { AlertDialogs(context.translation) }
</a> 
     companion object {
         const val MAIN_ROUTE = &quot;feature_root&quot;
<a href="#h1-1" id="h1-1" class="h">@@ -217,7 +218,7 @@ class FeaturesSection : Section() {
</a>                 registerDialogOnClickCallback()
 
                 dialogComposable = {
<a href="#h1-1-3" id="h1-1-3" class="d">-                    dialogs.UniqueSelectionDialog(property)
</a><a href="#h1-1-4" id="h1-1-4" class="i">+                    alertDialogs.UniqueSelectionDialog(property)
</a>                 }
 
                 Text(
<a href="#h1-2" id="h1-2" class="h">@@ -234,10 +235,10 @@ class FeaturesSection : Section() {
</a>                 dialogComposable = {
                     when (dataType) {
                         DataProcessors.Type.STRING_MULTIPLE_SELECTION -&gt; {
<a href="#h1-2-3" id="h1-2-3" class="d">-                            dialogs.MultipleSelectionDialog(property)
</a><a href="#h1-2-4" id="h1-2-4" class="i">+                            alertDialogs.MultipleSelectionDialog(property)
</a>                         }
                         DataProcessors.Type.STRING, DataProcessors.Type.INTEGER, DataProcessors.Type.FLOAT -&gt; {
<a href="#h1-2-7" id="h1-2-7" class="d">-                            dialogs.KeyboardInputDialog(property) { showDialog = false }
</a><a href="#h1-2-8" id="h1-2-8" class="i">+                            alertDialogs.KeyboardInputDialog(property) { showDialog = false }
</a>                         }
                         else -&gt; {}
                     }
<b>diff --git a/<a id="h2" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -1,26 +1,41 @@
</a> package me.rhunk.snapenhance.ui.manager.sections.social
 
 import androidx.compose.foundation.clickable
<a href="#h2-0-3" id="h2-0-3" class="d">-import androidx.compose.foundation.layout.Spacer
</a><a href="#h2-0-4" id="h2-0-4" class="i">+import androidx.compose.foundation.layout.Arrangement
</a><a href="#h2-0-5" id="h2-0-5" class="i">+import androidx.compose.foundation.layout.Column
</a><a href="#h2-0-6" id="h2-0-6" class="i">+import androidx.compose.foundation.layout.Row
</a> import androidx.compose.foundation.layout.fillMaxSize
<a href="#h2-0-8" id="h2-0-8" class="i">+import androidx.compose.foundation.layout.fillMaxWidth
</a> import androidx.compose.foundation.layout.padding
 import androidx.compose.foundation.layout.size
 import androidx.compose.foundation.lazy.LazyColumn
<a href="#h2-0-12" id="h2-0-12" class="i">+import androidx.compose.foundation.text.KeyboardOptions
</a><a href="#h2-0-13" id="h2-0-13" class="i">+import androidx.compose.material.icons.Icons
</a><a href="#h2-0-14" id="h2-0-14" class="i">+import androidx.compose.material.icons.filled.Search
</a> import androidx.compose.material3.Card
<a href="#h2-0-16" id="h2-0-16" class="i">+import androidx.compose.material3.CardDefaults
</a> import androidx.compose.material3.CircularProgressIndicator
<a href="#h2-0-18" id="h2-0-18" class="i">+import androidx.compose.material3.Icon
</a> import androidx.compose.material3.MaterialTheme
 import androidx.compose.material3.Text
<a href="#h2-0-21" id="h2-0-21" class="i">+import androidx.compose.material3.TextField
</a> import androidx.compose.runtime.Composable
 import androidx.compose.runtime.LaunchedEffect
<a href="#h2-0-24" id="h2-0-24" class="i">+import androidx.compose.runtime.MutableState
</a> import androidx.compose.runtime.getValue
 import androidx.compose.runtime.mutableStateOf
 import androidx.compose.runtime.remember
 import androidx.compose.runtime.rememberCoroutineScope
 import androidx.compose.runtime.setValue
<a href="#h2-0-30" id="h2-0-30" class="i">+import androidx.compose.ui.Alignment
</a> import androidx.compose.ui.Modifier
<a href="#h2-0-32" id="h2-0-32" class="i">+import androidx.compose.ui.text.font.FontWeight
</a><a href="#h2-0-33" id="h2-0-33" class="i">+import androidx.compose.ui.text.input.ImeAction
</a><a href="#h2-0-34" id="h2-0-34" class="i">+import androidx.compose.ui.text.input.KeyboardType
</a> import androidx.compose.ui.unit.dp
 import androidx.compose.ui.unit.sp
 import androidx.compose.ui.window.Dialog
<a href="#h2-0-38" id="h2-0-38" class="i">+import androidx.compose.ui.window.DialogProperties
</a> import kotlinx.coroutines.Dispatchers
 import kotlinx.coroutines.Job
 import kotlinx.coroutines.delay
<a href="#h2-1" id="h2-1" class="h">@@ -37,16 +52,73 @@ class AddFriendDialog(
</a>     private val context: RemoteSideContext,
     private val section: SocialSection,
 ) {
<a href="#h2-1-3" id="h2-1-3" class="i">+    @Composable
</a><a href="#h2-1-4" id="h2-1-4" class="i">+    private fun ListCardEntry(name: String, exists: Boolean, stateChanged: (state: Boolean) -&gt; Unit = { }) {
</a><a href="#h2-1-5" id="h2-1-5" class="i">+        var state by remember { mutableStateOf(exists) }
</a><a href="#h2-1-6" id="h2-1-6" class="i">+
</a><a href="#h2-1-7" id="h2-1-7" class="i">+        Row(
</a><a href="#h2-1-8" id="h2-1-8" class="i">+            modifier = Modifier
</a><a href="#h2-1-9" id="h2-1-9" class="i">+                .fillMaxWidth()
</a><a href="#h2-1-10" id="h2-1-10" class="i">+                .clickable {
</a><a href="#h2-1-11" id="h2-1-11" class="i">+                    state = !state
</a><a href="#h2-1-12" id="h2-1-12" class="i">+                    stateChanged(state)
</a><a href="#h2-1-13" id="h2-1-13" class="i">+                }
</a><a href="#h2-1-14" id="h2-1-14" class="i">+                .padding(4.dp),
</a><a href="#h2-1-15" id="h2-1-15" class="i">+            verticalAlignment = androidx.compose.ui.Alignment.CenterVertically
</a><a href="#h2-1-16" id="h2-1-16" class="i">+        ) {
</a><a href="#h2-1-17" id="h2-1-17" class="i">+            Text(
</a><a href="#h2-1-18" id="h2-1-18" class="i">+                text = name,
</a><a href="#h2-1-19" id="h2-1-19" class="i">+                fontSize = 15.sp,
</a><a href="#h2-1-20" id="h2-1-20" class="i">+                modifier = Modifier
</a><a href="#h2-1-21" id="h2-1-21" class="i">+                    .weight(1f)
</a><a href="#h2-1-22" id="h2-1-22" class="i">+            )
</a> 
<a href="#h2-1-24" id="h2-1-24" class="i">+            androidx.compose.material3.Checkbox(
</a><a href="#h2-1-25" id="h2-1-25" class="i">+                checked = state,
</a><a href="#h2-1-26" id="h2-1-26" class="i">+                onCheckedChange = {
</a><a href="#h2-1-27" id="h2-1-27" class="i">+                    state = it
</a><a href="#h2-1-28" id="h2-1-28" class="i">+                    stateChanged(state)
</a><a href="#h2-1-29" id="h2-1-29" class="i">+                }
</a><a href="#h2-1-30" id="h2-1-30" class="i">+            )
</a><a href="#h2-1-31" id="h2-1-31" class="i">+        }
</a><a href="#h2-1-32" id="h2-1-32" class="i">+    }
</a> 
     @Composable
<a href="#h2-1-35" id="h2-1-35" class="d">-    private fun ListCardEntry(name: String, modifier: Modifier = Modifier) {
</a><a href="#h2-1-36" id="h2-1-36" class="d">-        Card(
</a><a href="#h2-1-37" id="h2-1-37" class="i">+    private fun DialogHeader(searchKeyword: MutableState&lt;String&gt;) {
</a><a href="#h2-1-38" id="h2-1-38" class="i">+        Column(
</a>             modifier = Modifier
<a href="#h2-1-40" id="h2-1-40" class="d">-                .padding(5.dp)
</a><a href="#h2-1-41" id="h2-1-41" class="d">-                .then(modifier),
</a><a href="#h2-1-42" id="h2-1-42" class="i">+                .fillMaxWidth()
</a><a href="#h2-1-43" id="h2-1-43" class="i">+                .padding(10.dp),
</a>         ) {
<a href="#h2-1-45" id="h2-1-45" class="d">-            Text(text = name, modifier = Modifier.padding(10.dp))
</a><a href="#h2-1-46" id="h2-1-46" class="i">+            Text(
</a><a href="#h2-1-47" id="h2-1-47" class="i">+                text = &quot;Add Friend or Group&quot;,
</a><a href="#h2-1-48" id="h2-1-48" class="i">+                fontSize = 23.sp,
</a><a href="#h2-1-49" id="h2-1-49" class="i">+                fontWeight = FontWeight.ExtraBold,
</a><a href="#h2-1-50" id="h2-1-50" class="i">+                modifier = Modifier
</a><a href="#h2-1-51" id="h2-1-51" class="i">+                    .align(alignment = Alignment.CenterHorizontally)
</a><a href="#h2-1-52" id="h2-1-52" class="i">+            )
</a><a href="#h2-1-53" id="h2-1-53" class="i">+        }
</a><a href="#h2-1-54" id="h2-1-54" class="i">+
</a><a href="#h2-1-55" id="h2-1-55" class="i">+        Row(
</a><a href="#h2-1-56" id="h2-1-56" class="i">+            modifier = Modifier
</a><a href="#h2-1-57" id="h2-1-57" class="i">+                .fillMaxWidth()
</a><a href="#h2-1-58" id="h2-1-58" class="i">+                .padding(10.dp),
</a><a href="#h2-1-59" id="h2-1-59" class="i">+            verticalAlignment = Alignment.CenterVertically
</a><a href="#h2-1-60" id="h2-1-60" class="i">+        ) {
</a><a href="#h2-1-61" id="h2-1-61" class="i">+            TextField(
</a><a href="#h2-1-62" id="h2-1-62" class="i">+                value = searchKeyword.value,
</a><a href="#h2-1-63" id="h2-1-63" class="i">+                onValueChange = { searchKeyword.value = it },
</a><a href="#h2-1-64" id="h2-1-64" class="i">+                label = {
</a><a href="#h2-1-65" id="h2-1-65" class="i">+                    Text(text = &quot;Search&quot;)
</a><a href="#h2-1-66" id="h2-1-66" class="i">+                },
</a><a href="#h2-1-67" id="h2-1-67" class="i">+                modifier = Modifier
</a><a href="#h2-1-68" id="h2-1-68" class="i">+                    .weight(1f)
</a><a href="#h2-1-69" id="h2-1-69" class="i">+                    .padding(end = 10.dp),
</a><a href="#h2-1-70" id="h2-1-70" class="i">+                keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Text, imeAction = ImeAction.Done),
</a><a href="#h2-1-71" id="h2-1-71" class="i">+                leadingIcon = {
</a><a href="#h2-1-72" id="h2-1-72" class="i">+                    Icon(Icons.Filled.Search, contentDescription = &quot;Search&quot;)
</a><a href="#h2-1-73" id="h2-1-73" class="i">+                }
</a><a href="#h2-1-74" id="h2-1-74" class="i">+            )
</a>         }
     }
 
<a href="#h2-2" id="h2-2" class="h">@@ -84,52 +156,118 @@ class AddFriendDialog(
</a>             }
         }
 
<a href="#h2-2-3" id="h2-2-3" class="d">-        Dialog(onDismissRequest = {
</a><a href="#h2-2-4" id="h2-2-4" class="d">-            timeoutJob?.cancel()
</a><a href="#h2-2-5" id="h2-2-5" class="d">-            dismiss()
</a><a href="#h2-2-6" id="h2-2-6" class="d">-        }) {
</a><a href="#h2-2-7" id="h2-2-7" class="d">-            Card {
</a><a href="#h2-2-8" id="h2-2-8" class="d">-                if (hasFetchError) {
</a><a href="#h2-2-9" id="h2-2-9" class="d">-                    Text(text = &quot;Failed to load friends and groups. Make sure Snapchat is installed and logged in.&quot;)
</a><a href="#h2-2-10" id="h2-2-10" class="d">-                    return@Card
</a><a href="#h2-2-11" id="h2-2-11" class="d">-                }
</a><a href="#h2-2-12" id="h2-2-12" class="i">+        Dialog(
</a><a href="#h2-2-13" id="h2-2-13" class="i">+            onDismissRequest = {
</a><a href="#h2-2-14" id="h2-2-14" class="i">+                timeoutJob?.cancel()
</a><a href="#h2-2-15" id="h2-2-15" class="i">+                dismiss()
</a><a href="#h2-2-16" id="h2-2-16" class="i">+            },
</a><a href="#h2-2-17" id="h2-2-17" class="i">+            properties = DialogProperties(usePlatformDefaultWidth = false)
</a><a href="#h2-2-18" id="h2-2-18" class="i">+        ) {
</a><a href="#h2-2-19" id="h2-2-19" class="i">+            Card(
</a><a href="#h2-2-20" id="h2-2-20" class="i">+                colors = CardDefaults.elevatedCardColors(),
</a><a href="#h2-2-21" id="h2-2-21" class="i">+                modifier = Modifier
</a><a href="#h2-2-22" id="h2-2-22" class="i">+                    .fillMaxSize()
</a><a href="#h2-2-23" id="h2-2-23" class="i">+                    .fillMaxWidth()
</a><a href="#h2-2-24" id="h2-2-24" class="i">+                    .padding(all = 20.dp)
</a><a href="#h2-2-25" id="h2-2-25" class="i">+            ) {
</a>                 if (cachedGroups == null || cachedFriends == null) {
<a href="#h2-2-27" id="h2-2-27" class="d">-                    CircularProgressIndicator(
</a><a href="#h2-2-28" id="h2-2-28" class="i">+                    Column(
</a>                         modifier = Modifier
<a href="#h2-2-30" id="h2-2-30" class="d">-                            .padding()
</a><a href="#h2-2-31" id="h2-2-31" class="d">-                            .size(30.dp),
</a><a href="#h2-2-32" id="h2-2-32" class="d">-                        strokeWidth = 3.dp,
</a><a href="#h2-2-33" id="h2-2-33" class="d">-                        color = MaterialTheme.colorScheme.onPrimary
</a><a href="#h2-2-34" id="h2-2-34" class="d">-                    )
</a><a href="#h2-2-35" id="h2-2-35" class="i">+                            .fillMaxSize()
</a><a href="#h2-2-36" id="h2-2-36" class="i">+                            .padding(10.dp),
</a><a href="#h2-2-37" id="h2-2-37" class="i">+                        verticalArrangement = Arrangement.Center,
</a><a href="#h2-2-38" id="h2-2-38" class="i">+                        horizontalAlignment = Alignment.CenterHorizontally
</a><a href="#h2-2-39" id="h2-2-39" class="i">+                    ) {
</a><a href="#h2-2-40" id="h2-2-40" class="i">+                        if (hasFetchError) {
</a><a href="#h2-2-41" id="h2-2-41" class="i">+                            Text(
</a><a href="#h2-2-42" id="h2-2-42" class="i">+                                text = &quot;Failed to fetch data&quot;,
</a><a href="#h2-2-43" id="h2-2-43" class="i">+                                fontSize = 20.sp,
</a><a href="#h2-2-44" id="h2-2-44" class="i">+                                fontWeight = FontWeight.Bold,
</a><a href="#h2-2-45" id="h2-2-45" class="i">+                                modifier = Modifier.padding(bottom = 10.dp, top = 10.dp)
</a><a href="#h2-2-46" id="h2-2-46" class="i">+                            )
</a><a href="#h2-2-47" id="h2-2-47" class="i">+                            return@Card
</a><a href="#h2-2-48" id="h2-2-48" class="i">+                        }
</a><a href="#h2-2-49" id="h2-2-49" class="i">+                        CircularProgressIndicator(
</a><a href="#h2-2-50" id="h2-2-50" class="i">+                            modifier = Modifier
</a><a href="#h2-2-51" id="h2-2-51" class="i">+                                .padding()
</a><a href="#h2-2-52" id="h2-2-52" class="i">+                                .size(30.dp),
</a><a href="#h2-2-53" id="h2-2-53" class="i">+                            strokeWidth = 3.dp,
</a><a href="#h2-2-54" id="h2-2-54" class="i">+                            color = MaterialTheme.colorScheme.primary
</a><a href="#h2-2-55" id="h2-2-55" class="i">+                        )
</a><a href="#h2-2-56" id="h2-2-56" class="i">+                    }
</a>                     return@Card
                 }
 
<a href="#h2-2-60" id="h2-2-60" class="i">+                val searchKeyword = remember { mutableStateOf(&quot;&quot;) }
</a><a href="#h2-2-61" id="h2-2-61" class="i">+
</a><a href="#h2-2-62" id="h2-2-62" class="i">+                val filteredGroups = cachedGroups!!.takeIf { searchKeyword.value.isNotBlank() }?.filter {
</a><a href="#h2-2-63" id="h2-2-63" class="i">+                    it.name.contains(searchKeyword.value, ignoreCase = true)
</a><a href="#h2-2-64" id="h2-2-64" class="i">+                } ?: cachedGroups!!
</a><a href="#h2-2-65" id="h2-2-65" class="i">+
</a><a href="#h2-2-66" id="h2-2-66" class="i">+                val filteredFriends = cachedFriends!!.takeIf { searchKeyword.value.isNotBlank() }?.filter {
</a><a href="#h2-2-67" id="h2-2-67" class="i">+                    it.mutableUsername.contains(searchKeyword.value, ignoreCase = true) ||
</a><a href="#h2-2-68" id="h2-2-68" class="i">+                    it.displayName?.contains(searchKeyword.value, ignoreCase = true) == true
</a><a href="#h2-2-69" id="h2-2-69" class="i">+                } ?: cachedFriends!!
</a><a href="#h2-2-70" id="h2-2-70" class="i">+
</a><a href="#h2-2-71" id="h2-2-71" class="i">+                DialogHeader(searchKeyword)
</a><a href="#h2-2-72" id="h2-2-72" class="i">+
</a>                 LazyColumn(
<a href="#h2-2-74" id="h2-2-74" class="d">-                    modifier = Modifier.fillMaxSize()
</a><a href="#h2-2-75" id="h2-2-75" class="i">+                    modifier = Modifier
</a><a href="#h2-2-76" id="h2-2-76" class="i">+                        .fillMaxSize()
</a><a href="#h2-2-77" id="h2-2-77" class="i">+                        .padding(10.dp)
</a>                 ) {
                     item {
<a href="#h2-2-80" id="h2-2-80" class="d">-                        Text(text = &quot;Groups&quot;, fontSize = 20.sp)
</a><a href="#h2-2-81" id="h2-2-81" class="d">-                        Spacer(modifier = Modifier.padding(5.dp))
</a><a href="#h2-2-82" id="h2-2-82" class="i">+                        if (filteredGroups.isEmpty()) return@item
</a><a href="#h2-2-83" id="h2-2-83" class="i">+                        Text(text = &quot;Groups&quot;,
</a><a href="#h2-2-84" id="h2-2-84" class="i">+                            fontSize = 20.sp,
</a><a href="#h2-2-85" id="h2-2-85" class="i">+                            fontWeight = FontWeight.Bold,
</a><a href="#h2-2-86" id="h2-2-86" class="i">+                            modifier = Modifier.padding(bottom = 10.dp, top = 10.dp)
</a><a href="#h2-2-87" id="h2-2-87" class="i">+                        )
</a>                     }
<a href="#h2-2-89" id="h2-2-89" class="d">-                    items(cachedGroups!!.size) {
</a><a href="#h2-2-90" id="h2-2-90" class="d">-                        ListCardEntry(name = cachedGroups!![it].name, modifier = Modifier.clickable {
</a><a href="#h2-2-91" id="h2-2-91" class="d">-                            context.bridgeService.triggerGroupSync(cachedGroups!![it].conversationId)
</a><a href="#h2-2-92" id="h2-2-92" class="i">+
</a><a href="#h2-2-93" id="h2-2-93" class="i">+                    items(filteredGroups.size) {
</a><a href="#h2-2-94" id="h2-2-94" class="i">+                        val group = filteredGroups[it]
</a><a href="#h2-2-95" id="h2-2-95" class="i">+
</a><a href="#h2-2-96" id="h2-2-96" class="i">+                        ListCardEntry(
</a><a href="#h2-2-97" id="h2-2-97" class="i">+                            name = group.name,
</a><a href="#h2-2-98" id="h2-2-98" class="i">+                            exists = remember { context.modDatabase.getGroupInfo(group.conversationId) != null }
</a><a href="#h2-2-99" id="h2-2-99" class="i">+                        ) { state -&gt;
</a><a href="#h2-2-100" id="h2-2-100" class="i">+                            if (state) {
</a><a href="#h2-2-101" id="h2-2-101" class="i">+                                context.bridgeService.triggerGroupSync(cachedGroups!![it].conversationId)
</a><a href="#h2-2-102" id="h2-2-102" class="i">+                            } else {
</a><a href="#h2-2-103" id="h2-2-103" class="i">+                                context.modDatabase.deleteGroup(group.conversationId)
</a><a href="#h2-2-104" id="h2-2-104" class="i">+                            }
</a>                             context.modDatabase.executeAsync {
                                 section.onResumed()
                             }
<a href="#h2-2-108" id="h2-2-108" class="d">-                        })
</a><a href="#h2-2-109" id="h2-2-109" class="i">+                        }
</a>                     }
<a href="#h2-2-111" id="h2-2-111" class="i">+
</a>                     item {
<a href="#h2-2-113" id="h2-2-113" class="d">-                        Text(text = &quot;Friends&quot;, fontSize = 20.sp)
</a><a href="#h2-2-114" id="h2-2-114" class="d">-                        Spacer(modifier = Modifier.padding(5.dp))
</a><a href="#h2-2-115" id="h2-2-115" class="i">+                        if (filteredFriends.isEmpty()) return@item
</a><a href="#h2-2-116" id="h2-2-116" class="i">+                        Text(text = &quot;Friends&quot;,
</a><a href="#h2-2-117" id="h2-2-117" class="i">+                            fontSize = 20.sp,
</a><a href="#h2-2-118" id="h2-2-118" class="i">+                            fontWeight = FontWeight.Bold,
</a><a href="#h2-2-119" id="h2-2-119" class="i">+                            modifier = Modifier.padding(bottom = 10.dp, top = 10.dp)
</a><a href="#h2-2-120" id="h2-2-120" class="i">+                        )
</a>                     }
<a href="#h2-2-122" id="h2-2-122" class="d">-                    items(cachedFriends!!.size) {
</a><a href="#h2-2-123" id="h2-2-123" class="d">-                        ListCardEntry(name = cachedFriends!![it].displayName ?: cachedFriends!![it].mutableUsername, modifier = Modifier.clickable {
</a><a href="#h2-2-124" id="h2-2-124" class="d">-                            context.bridgeService.triggerFriendSync(cachedFriends!![it].userId)
</a><a href="#h2-2-125" id="h2-2-125" class="i">+
</a><a href="#h2-2-126" id="h2-2-126" class="i">+                    items(filteredFriends.size) {
</a><a href="#h2-2-127" id="h2-2-127" class="i">+                        val friend = filteredFriends[it]
</a><a href="#h2-2-128" id="h2-2-128" class="i">+
</a><a href="#h2-2-129" id="h2-2-129" class="i">+                        ListCardEntry(
</a><a href="#h2-2-130" id="h2-2-130" class="i">+                            name = friend.displayName?.takeIf { name -&gt; name.isNotBlank() } ?: friend.mutableUsername,
</a><a href="#h2-2-131" id="h2-2-131" class="i">+                            exists = remember { context.modDatabase.getFriendInfo(friend.userId) != null }
</a><a href="#h2-2-132" id="h2-2-132" class="i">+                        ) { state -&gt;
</a><a href="#h2-2-133" id="h2-2-133" class="i">+                            if (state) {
</a><a href="#h2-2-134" id="h2-2-134" class="i">+                                context.bridgeService.triggerFriendSync(cachedFriends!![it].userId)
</a><a href="#h2-2-135" id="h2-2-135" class="i">+                            } else {
</a><a href="#h2-2-136" id="h2-2-136" class="i">+                                context.modDatabase.deleteFriend(friend.userId)
</a><a href="#h2-2-137" id="h2-2-137" class="i">+                            }
</a>                             context.modDatabase.executeAsync {
                                 section.onResumed()
                             }
<a href="#h2-2-141" id="h2-2-141" class="d">-                        })
</a><a href="#h2-2-142" id="h2-2-142" class="i">+                        }
</a>                     }
                 }
             }
<b>diff --git a/<a id="h3" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/ScopeContent.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/ScopeContent.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/ScopeContent.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/ScopeContent.kt</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -25,6 +25,7 @@ import androidx.compose.ui.text.font.FontWeight
</a> import androidx.compose.ui.unit.dp
 import androidx.compose.ui.unit.sp
 import androidx.navigation.NavController
<a href="#h3-0-3" id="h3-0-3" class="i">+import kotlinx.coroutines.CoroutineScope
</a> import kotlinx.coroutines.launch
 import me.rhunk.snapenhance.RemoteSideContext
 import me.rhunk.snapenhance.core.messaging.MessagingRuleType
<a href="#h3-1" id="h3-1" class="h">@@ -36,25 +37,19 @@ class ScopeContent(
</a>     private val context: RemoteSideContext,
     private val section: SocialSection,
     private val navController: NavController,
<a href="#h3-1-3" id="h3-1-3" class="d">-    private val scope: SocialScope,
</a><a href="#h3-1-4" id="h3-1-4" class="i">+    val scope: SocialScope,
</a>     private val id: String
 ) {
<a href="#h3-1-7" id="h3-1-7" class="d">-    @Composable
</a><a href="#h3-1-8" id="h3-1-8" class="d">-    private fun DeleteScopeEntityButton() {
</a><a href="#h3-1-9" id="h3-1-9" class="d">-        val coroutineScope = rememberCoroutineScope()
</a><a href="#h3-1-10" id="h3-1-10" class="d">-        OutlinedButton(onClick = {
</a><a href="#h3-1-11" id="h3-1-11" class="d">-            when (scope) {
</a><a href="#h3-1-12" id="h3-1-12" class="d">-                SocialScope.FRIEND -&gt; context.modDatabase.deleteFriend(id)
</a><a href="#h3-1-13" id="h3-1-13" class="d">-                SocialScope.GROUP -&gt; context.modDatabase.deleteGroup(id)
</a><a href="#h3-1-14" id="h3-1-14" class="d">-            }
</a><a href="#h3-1-15" id="h3-1-15" class="d">-            context.modDatabase.executeAsync {
</a><a href="#h3-1-16" id="h3-1-16" class="d">-                coroutineScope.launch {
</a><a href="#h3-1-17" id="h3-1-17" class="d">-                    section.onResumed()
</a><a href="#h3-1-18" id="h3-1-18" class="d">-                    navController.navigate(SocialSection.MAIN_ROUTE)
</a><a href="#h3-1-19" id="h3-1-19" class="d">-                }
</a><a href="#h3-1-20" id="h3-1-20" class="i">+    fun deleteScope(coroutineScope: CoroutineScope) {
</a><a href="#h3-1-21" id="h3-1-21" class="i">+        when (scope) {
</a><a href="#h3-1-22" id="h3-1-22" class="i">+            SocialScope.FRIEND -&gt; context.modDatabase.deleteFriend(id)
</a><a href="#h3-1-23" id="h3-1-23" class="i">+            SocialScope.GROUP -&gt; context.modDatabase.deleteGroup(id)
</a><a href="#h3-1-24" id="h3-1-24" class="i">+        }
</a><a href="#h3-1-25" id="h3-1-25" class="i">+        context.modDatabase.executeAsync {
</a><a href="#h3-1-26" id="h3-1-26" class="i">+            coroutineScope.launch {
</a><a href="#h3-1-27" id="h3-1-27" class="i">+                section.onResumed()
</a><a href="#h3-1-28" id="h3-1-28" class="i">+                navController.popBackStack()
</a>             }
<a href="#h3-1-30" id="h3-1-30" class="d">-        }) {
</a><a href="#h3-1-31" id="h3-1-31" class="d">-            Text(text = &quot;Delete ${scope.key}&quot;)
</a>         }
     }
 
<a href="#h3-2" id="h3-2" class="h">@@ -253,7 +248,6 @@ class ScopeContent(
</a>             Text(text = group.name, maxLines = 1)
             Text(text = &quot;participantsCount: ${group.participantsCount}&quot;, maxLines = 1)
             Spacer(modifier = Modifier.height(16.dp))
<a href="#h3-2-3" id="h3-2-3" class="d">-            DeleteScopeEntityButton()
</a>         }
     }
 } 
\ No newline at end of file
<b>diff --git a/<a id="h4" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/SocialSection.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/SocialSection.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/SocialSection.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/SocialSection.kt</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -4,6 +4,7 @@ import androidx.compose.foundation.ExperimentalFoundationApi
</a> import androidx.compose.foundation.clickable
 import androidx.compose.foundation.layout.Column
 import androidx.compose.foundation.layout.Row
<a href="#h4-0-3" id="h4-0-3" class="i">+import androidx.compose.foundation.layout.RowScope
</a> import androidx.compose.foundation.layout.fillMaxHeight
 import androidx.compose.foundation.layout.fillMaxSize
 import androidx.compose.foundation.layout.fillMaxWidth
<a href="#h4-1" id="h4-1" class="h">@@ -15,9 +16,12 @@ import androidx.compose.foundation.pager.rememberPagerState
</a> import androidx.compose.foundation.shape.RoundedCornerShape
 import androidx.compose.material.icons.Icons
 import androidx.compose.material.icons.rounded.Add
<a href="#h4-1-3" id="h4-1-3" class="i">+import androidx.compose.material.icons.rounded.DeleteForever
</a> import androidx.compose.material3.Card
<a href="#h4-1-5" id="h4-1-5" class="i">+import androidx.compose.material3.ExperimentalMaterial3Api
</a> import androidx.compose.material3.FloatingActionButton
 import androidx.compose.material3.Icon
<a href="#h4-1-8" id="h4-1-8" class="i">+import androidx.compose.material3.IconButton
</a> import androidx.compose.material3.MaterialTheme
 import androidx.compose.material3.Scaffold
 import androidx.compose.material3.Tab
<a href="#h4-2" id="h4-2" class="h">@@ -32,8 +36,11 @@ import androidx.compose.runtime.rememberCoroutineScope
</a> import androidx.compose.runtime.setValue
 import androidx.compose.ui.Alignment
 import androidx.compose.ui.Modifier
<a href="#h4-2-3" id="h4-2-3" class="i">+import androidx.compose.ui.text.font.FontWeight
</a> import androidx.compose.ui.text.style.TextOverflow
 import androidx.compose.ui.unit.dp
<a href="#h4-2-6" id="h4-2-6" class="i">+import androidx.compose.ui.unit.sp
</a><a href="#h4-2-7" id="h4-2-7" class="i">+import androidx.compose.ui.window.Dialog
</a> import androidx.navigation.NavGraphBuilder
 import androidx.navigation.compose.composable
 import androidx.navigation.navigation
<a href="#h4-3" id="h4-3" class="h">@@ -42,6 +49,7 @@ import me.rhunk.snapenhance.core.messaging.MessagingFriendInfo
</a> import me.rhunk.snapenhance.core.messaging.MessagingGroupInfo
 import me.rhunk.snapenhance.core.messaging.SocialScope
 import me.rhunk.snapenhance.ui.manager.Section
<a href="#h4-3-3" id="h4-3-3" class="i">+import me.rhunk.snapenhance.ui.util.AlertDialogs
</a> import me.rhunk.snapenhance.ui.util.BitmojiImage
 import me.rhunk.snapenhance.ui.util.pagerTabIndicatorOffset
 import me.rhunk.snapenhance.util.snap.BitmojiSelfie
<a href="#h4-4" id="h4-4" class="h">@@ -89,6 +97,35 @@ class SocialSection : Section() {
</a>         }
     }
 
<a href="#h4-4-3" id="h4-4-3" class="i">+    @Composable
</a><a href="#h4-4-4" id="h4-4-4" class="i">+    override fun TopBarActions(rowScope: RowScope) {
</a><a href="#h4-4-5" id="h4-4-5" class="i">+        var deleteConfirmDialog by remember { mutableStateOf(false) }
</a><a href="#h4-4-6" id="h4-4-6" class="i">+        val coroutineScope = rememberCoroutineScope()
</a><a href="#h4-4-7" id="h4-4-7" class="i">+
</a><a href="#h4-4-8" id="h4-4-8" class="i">+        if (deleteConfirmDialog) {
</a><a href="#h4-4-9" id="h4-4-9" class="i">+            currentScopeContent?.let { scopeContent -&gt;
</a><a href="#h4-4-10" id="h4-4-10" class="i">+                Dialog(onDismissRequest = { deleteConfirmDialog = false }) {
</a><a href="#h4-4-11" id="h4-4-11" class="i">+                    remember { AlertDialogs(context.translation) }.ConfirmDialog(
</a><a href="#h4-4-12" id="h4-4-12" class="i">+                        title = &quot;Are you sure you want to delete this ${scopeContent.scope.key.lowercase()}?&quot;,
</a><a href="#h4-4-13" id="h4-4-13" class="i">+                        onDismiss = { deleteConfirmDialog = false },
</a><a href="#h4-4-14" id="h4-4-14" class="i">+                        onConfirm = { scopeContent.deleteScope(coroutineScope); deleteConfirmDialog = false }
</a><a href="#h4-4-15" id="h4-4-15" class="i">+                    )
</a><a href="#h4-4-16" id="h4-4-16" class="i">+                }
</a><a href="#h4-4-17" id="h4-4-17" class="i">+            }
</a><a href="#h4-4-18" id="h4-4-18" class="i">+        }
</a><a href="#h4-4-19" id="h4-4-19" class="i">+
</a><a href="#h4-4-20" id="h4-4-20" class="i">+        if (navController.currentBackStackEntry?.destination?.route != MAIN_ROUTE) {
</a><a href="#h4-4-21" id="h4-4-21" class="i">+            IconButton(
</a><a href="#h4-4-22" id="h4-4-22" class="i">+                onClick = { deleteConfirmDialog = true },
</a><a href="#h4-4-23" id="h4-4-23" class="i">+            ) {
</a><a href="#h4-4-24" id="h4-4-24" class="i">+                Icon(
</a><a href="#h4-4-25" id="h4-4-25" class="i">+                    imageVector = Icons.Rounded.DeleteForever,
</a><a href="#h4-4-26" id="h4-4-26" class="i">+                    contentDescription = null
</a><a href="#h4-4-27" id="h4-4-27" class="i">+                )
</a><a href="#h4-4-28" id="h4-4-28" class="i">+            }
</a><a href="#h4-4-29" id="h4-4-29" class="i">+        }
</a><a href="#h4-4-30" id="h4-4-30" class="i">+    }
</a><a href="#h4-4-31" id="h4-4-31" class="i">+
</a> 
     @Composable
     private fun ScopeList(scope: SocialScope) {
<a href="#h4-5" id="h4-5" class="h">@@ -154,8 +191,8 @@ class SocialSection : Section() {
</a>                                         .padding(10.dp)
                                         .fillMaxWidth()
                                 ) {
<a href="#h4-5-3" id="h4-5-3" class="d">-                                    Text(text = friend.displayName ?: friend.mutableUsername, maxLines = 1)
</a><a href="#h4-5-4" id="h4-5-4" class="d">-                                    Text(text = friend.userId, maxLines = 1)
</a><a href="#h4-5-5" id="h4-5-5" class="i">+                                    Text(text = friend.displayName ?: friend.mutableUsername, maxLines = 1, fontWeight = FontWeight.Bold)
</a><a href="#h4-5-6" id="h4-5-6" class="i">+                                    Text(text = friend.userId, maxLines = 1, fontSize = 12.sp)
</a>                                 }
                             }
                         }
<b>diff --git a/<a id="h5" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/MappingsScreen.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/MappingsScreen.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/MappingsScreen.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/MappingsScreen.kt</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -23,6 +23,7 @@ import kotlinx.coroutines.Dispatchers
</a> import kotlinx.coroutines.launch
 import me.rhunk.snapenhance.Logger
 import me.rhunk.snapenhance.ui.setup.screens.SetupScreen
<a href="#h5-0-3" id="h5-0-3" class="i">+import me.rhunk.snapenhance.ui.util.AlertDialogs
</a> 
 class MappingsScreen : SetupScreen() {
     @Composable
<a href="#h5-1" id="h5-1" class="h">@@ -35,21 +36,8 @@ class MappingsScreen : SetupScreen() {
</a>             Dialog(onDismissRequest = {
                 infoText = null
             }) {
<a href="#h5-1-3" id="h5-1-3" class="d">-                Surface(
</a><a href="#h5-1-4" id="h5-1-4" class="d">-                    modifier = Modifier.padding(16.dp).fillMaxWidth(),
</a><a href="#h5-1-5" id="h5-1-5" class="d">-                    shape = RoundedCornerShape(16.dp),
</a><a href="#h5-1-6" id="h5-1-6" class="d">-                ) {
</a><a href="#h5-1-7" id="h5-1-7" class="d">-                    Column(
</a><a href="#h5-1-8" id="h5-1-8" class="d">-                        modifier = Modifier.padding(16.dp)
</a><a href="#h5-1-9" id="h5-1-9" class="d">-                    ) {
</a><a href="#h5-1-10" id="h5-1-10" class="d">-                        Text(text = infoText!!)
</a><a href="#h5-1-11" id="h5-1-11" class="d">-                        Button(onClick = {
</a><a href="#h5-1-12" id="h5-1-12" class="d">-                            infoText = null
</a><a href="#h5-1-13" id="h5-1-13" class="d">-                        },
</a><a href="#h5-1-14" id="h5-1-14" class="d">-                        modifier = Modifier.padding(top = 5.dp).align(alignment = androidx.compose.ui.Alignment.End)) {
</a><a href="#h5-1-15" id="h5-1-15" class="d">-                            Text(text = &quot;OK&quot;)
</a><a href="#h5-1-16" id="h5-1-16" class="d">-                        }
</a><a href="#h5-1-17" id="h5-1-17" class="d">-                    }
</a><a href="#h5-1-18" id="h5-1-18" class="i">+                remember { AlertDialogs(context.translation) }.InfoDialog(title = infoText!!) {
</a><a href="#h5-1-19" id="h5-1-19" class="i">+                    infoText = null
</a>                 }
             }
         }
<a href="#h5-2" id="h5-2" class="h">@@ -87,7 +75,9 @@ class MappingsScreen : SetupScreen() {
</a>         }) {
             if (isGenerating) {
                 CircularProgressIndicator(
<a href="#h5-2-3" id="h5-2-3" class="d">-                    modifier = Modifier.padding().size(30.dp),
</a><a href="#h5-2-4" id="h5-2-4" class="i">+                    modifier = Modifier
</a><a href="#h5-2-5" id="h5-2-5" class="i">+                        .padding()
</a><a href="#h5-2-6" id="h5-2-6" class="i">+                        .size(30.dp),
</a>                     strokeWidth = 3.dp,
                     color = MaterialTheme.colorScheme.onPrimary
                 )
<b>diff --git a/<a id="h6" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/util/AlertDialogs.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/util/AlertDialogs.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/util/AlertDialogs.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/util/AlertDialogs.kt</a></b>
<a href="#h6-0" id="h6-0" class="h">@@ -0,0 +1,276 @@
</a><a href="#h6-0-0" id="h6-0-0" class="i">+package me.rhunk.snapenhance.ui.util
</a><a href="#h6-0-1" id="h6-0-1" class="i">+
</a><a href="#h6-0-2" id="h6-0-2" class="i">+import androidx.compose.foundation.ScrollState
</a><a href="#h6-0-3" id="h6-0-3" class="i">+import androidx.compose.foundation.clickable
</a><a href="#h6-0-4" id="h6-0-4" class="i">+import androidx.compose.foundation.layout.Arrangement
</a><a href="#h6-0-5" id="h6-0-5" class="i">+import androidx.compose.foundation.layout.Column
</a><a href="#h6-0-6" id="h6-0-6" class="i">+import androidx.compose.foundation.layout.ColumnScope
</a><a href="#h6-0-7" id="h6-0-7" class="i">+import androidx.compose.foundation.layout.Row
</a><a href="#h6-0-8" id="h6-0-8" class="i">+import androidx.compose.foundation.layout.fillMaxWidth
</a><a href="#h6-0-9" id="h6-0-9" class="i">+import androidx.compose.foundation.layout.padding
</a><a href="#h6-0-10" id="h6-0-10" class="i">+import androidx.compose.foundation.text.KeyboardOptions
</a><a href="#h6-0-11" id="h6-0-11" class="i">+import androidx.compose.foundation.verticalScroll
</a><a href="#h6-0-12" id="h6-0-12" class="i">+import androidx.compose.material3.Button
</a><a href="#h6-0-13" id="h6-0-13" class="i">+import androidx.compose.material3.Card
</a><a href="#h6-0-14" id="h6-0-14" class="i">+import androidx.compose.material3.MaterialTheme
</a><a href="#h6-0-15" id="h6-0-15" class="i">+import androidx.compose.material3.RadioButton
</a><a href="#h6-0-16" id="h6-0-16" class="i">+import androidx.compose.material3.Switch
</a><a href="#h6-0-17" id="h6-0-17" class="i">+import androidx.compose.material3.Text
</a><a href="#h6-0-18" id="h6-0-18" class="i">+import androidx.compose.material3.TextField
</a><a href="#h6-0-19" id="h6-0-19" class="i">+import androidx.compose.runtime.Composable
</a><a href="#h6-0-20" id="h6-0-20" class="i">+import androidx.compose.runtime.getValue
</a><a href="#h6-0-21" id="h6-0-21" class="i">+import androidx.compose.runtime.mutableStateOf
</a><a href="#h6-0-22" id="h6-0-22" class="i">+import androidx.compose.runtime.remember
</a><a href="#h6-0-23" id="h6-0-23" class="i">+import androidx.compose.runtime.setValue
</a><a href="#h6-0-24" id="h6-0-24" class="i">+import androidx.compose.ui.Alignment
</a><a href="#h6-0-25" id="h6-0-25" class="i">+import androidx.compose.ui.Modifier
</a><a href="#h6-0-26" id="h6-0-26" class="i">+import androidx.compose.ui.focus.FocusRequester
</a><a href="#h6-0-27" id="h6-0-27" class="i">+import androidx.compose.ui.focus.focusRequester
</a><a href="#h6-0-28" id="h6-0-28" class="i">+import androidx.compose.ui.layout.onGloballyPositioned
</a><a href="#h6-0-29" id="h6-0-29" class="i">+import androidx.compose.ui.text.TextRange
</a><a href="#h6-0-30" id="h6-0-30" class="i">+import androidx.compose.ui.text.input.KeyboardType
</a><a href="#h6-0-31" id="h6-0-31" class="i">+import androidx.compose.ui.text.input.TextFieldValue
</a><a href="#h6-0-32" id="h6-0-32" class="i">+import androidx.compose.ui.unit.dp
</a><a href="#h6-0-33" id="h6-0-33" class="i">+import me.rhunk.snapenhance.bridge.wrapper.LocaleWrapper
</a><a href="#h6-0-34" id="h6-0-34" class="i">+import me.rhunk.snapenhance.core.config.DataProcessors
</a><a href="#h6-0-35" id="h6-0-35" class="i">+import me.rhunk.snapenhance.core.config.PropertyPair
</a><a href="#h6-0-36" id="h6-0-36" class="i">+
</a><a href="#h6-0-37" id="h6-0-37" class="i">+
</a><a href="#h6-0-38" id="h6-0-38" class="i">+class AlertDialogs(
</a><a href="#h6-0-39" id="h6-0-39" class="i">+    private val translation: LocaleWrapper,
</a><a href="#h6-0-40" id="h6-0-40" class="i">+){
</a><a href="#h6-0-41" id="h6-0-41" class="i">+    @Composable
</a><a href="#h6-0-42" id="h6-0-42" class="i">+    fun DefaultDialogCard(content: @Composable ColumnScope.() -&gt; Unit) {
</a><a href="#h6-0-43" id="h6-0-43" class="i">+        Card(
</a><a href="#h6-0-44" id="h6-0-44" class="i">+            shape = MaterialTheme.shapes.medium,
</a><a href="#h6-0-45" id="h6-0-45" class="i">+            modifier = Modifier
</a><a href="#h6-0-46" id="h6-0-46" class="i">+                .padding(10.dp, 5.dp, 10.dp, 10.dp),
</a><a href="#h6-0-47" id="h6-0-47" class="i">+        ) {
</a><a href="#h6-0-48" id="h6-0-48" class="i">+            Column(
</a><a href="#h6-0-49" id="h6-0-49" class="i">+                modifier = Modifier
</a><a href="#h6-0-50" id="h6-0-50" class="i">+                    .padding(10.dp, 10.dp, 10.dp, 10.dp)
</a><a href="#h6-0-51" id="h6-0-51" class="i">+                    .verticalScroll(ScrollState(0)),
</a><a href="#h6-0-52" id="h6-0-52" class="i">+            ) { content() }
</a><a href="#h6-0-53" id="h6-0-53" class="i">+        }
</a><a href="#h6-0-54" id="h6-0-54" class="i">+    }
</a><a href="#h6-0-55" id="h6-0-55" class="i">+
</a><a href="#h6-0-56" id="h6-0-56" class="i">+    @Composable
</a><a href="#h6-0-57" id="h6-0-57" class="i">+    fun ConfirmDialog(
</a><a href="#h6-0-58" id="h6-0-58" class="i">+        title: String,
</a><a href="#h6-0-59" id="h6-0-59" class="i">+        data: String? = null,
</a><a href="#h6-0-60" id="h6-0-60" class="i">+        onConfirm: () -&gt; Unit,
</a><a href="#h6-0-61" id="h6-0-61" class="i">+        onDismiss: () -&gt; Unit,
</a><a href="#h6-0-62" id="h6-0-62" class="i">+    ) {
</a><a href="#h6-0-63" id="h6-0-63" class="i">+        DefaultDialogCard {
</a><a href="#h6-0-64" id="h6-0-64" class="i">+            Text(
</a><a href="#h6-0-65" id="h6-0-65" class="i">+                text = title,
</a><a href="#h6-0-66" id="h6-0-66" class="i">+                style = MaterialTheme.typography.bodyLarge,
</a><a href="#h6-0-67" id="h6-0-67" class="i">+                modifier = Modifier.padding(bottom = 10.dp)
</a><a href="#h6-0-68" id="h6-0-68" class="i">+            )
</a><a href="#h6-0-69" id="h6-0-69" class="i">+            if (data != null) {
</a><a href="#h6-0-70" id="h6-0-70" class="i">+                Text(
</a><a href="#h6-0-71" id="h6-0-71" class="i">+                    text = data,
</a><a href="#h6-0-72" id="h6-0-72" class="i">+                    style = MaterialTheme.typography.bodyMedium,
</a><a href="#h6-0-73" id="h6-0-73" class="i">+                    modifier = Modifier.padding(bottom = 10.dp)
</a><a href="#h6-0-74" id="h6-0-74" class="i">+                )
</a><a href="#h6-0-75" id="h6-0-75" class="i">+            }
</a><a href="#h6-0-76" id="h6-0-76" class="i">+            Row(
</a><a href="#h6-0-77" id="h6-0-77" class="i">+                modifier = Modifier.fillMaxWidth(),
</a><a href="#h6-0-78" id="h6-0-78" class="i">+                horizontalArrangement = Arrangement.SpaceEvenly,
</a><a href="#h6-0-79" id="h6-0-79" class="i">+            ) {
</a><a href="#h6-0-80" id="h6-0-80" class="i">+                Button(onClick = { onDismiss() }) {
</a><a href="#h6-0-81" id="h6-0-81" class="i">+                    Text(text = translation[&quot;button.cancel&quot;])
</a><a href="#h6-0-82" id="h6-0-82" class="i">+                }
</a><a href="#h6-0-83" id="h6-0-83" class="i">+                Button(onClick = { onConfirm() }) {
</a><a href="#h6-0-84" id="h6-0-84" class="i">+                    Text(text = translation[&quot;button.ok&quot;])
</a><a href="#h6-0-85" id="h6-0-85" class="i">+                }
</a><a href="#h6-0-86" id="h6-0-86" class="i">+            }
</a><a href="#h6-0-87" id="h6-0-87" class="i">+        }
</a><a href="#h6-0-88" id="h6-0-88" class="i">+    }
</a><a href="#h6-0-89" id="h6-0-89" class="i">+
</a><a href="#h6-0-90" id="h6-0-90" class="i">+    @Composable
</a><a href="#h6-0-91" id="h6-0-91" class="i">+    fun InfoDialog(
</a><a href="#h6-0-92" id="h6-0-92" class="i">+        title: String,
</a><a href="#h6-0-93" id="h6-0-93" class="i">+        data: String? = null,
</a><a href="#h6-0-94" id="h6-0-94" class="i">+        onDismiss: () -&gt; Unit,
</a><a href="#h6-0-95" id="h6-0-95" class="i">+    ) {
</a><a href="#h6-0-96" id="h6-0-96" class="i">+        DefaultDialogCard {
</a><a href="#h6-0-97" id="h6-0-97" class="i">+            Text(
</a><a href="#h6-0-98" id="h6-0-98" class="i">+                text = title,
</a><a href="#h6-0-99" id="h6-0-99" class="i">+                style = MaterialTheme.typography.bodyLarge,
</a><a href="#h6-0-100" id="h6-0-100" class="i">+                modifier = Modifier.padding(bottom = 10.dp)
</a><a href="#h6-0-101" id="h6-0-101" class="i">+            )
</a><a href="#h6-0-102" id="h6-0-102" class="i">+            if (data != null) {
</a><a href="#h6-0-103" id="h6-0-103" class="i">+                Text(
</a><a href="#h6-0-104" id="h6-0-104" class="i">+                    text = data,
</a><a href="#h6-0-105" id="h6-0-105" class="i">+                    style = MaterialTheme.typography.bodyMedium,
</a><a href="#h6-0-106" id="h6-0-106" class="i">+                    modifier = Modifier.padding(bottom = 10.dp)
</a><a href="#h6-0-107" id="h6-0-107" class="i">+                )
</a><a href="#h6-0-108" id="h6-0-108" class="i">+            }
</a><a href="#h6-0-109" id="h6-0-109" class="i">+            Row(
</a><a href="#h6-0-110" id="h6-0-110" class="i">+                modifier = Modifier.fillMaxWidth(),
</a><a href="#h6-0-111" id="h6-0-111" class="i">+                horizontalArrangement = Arrangement.SpaceEvenly,
</a><a href="#h6-0-112" id="h6-0-112" class="i">+            ) {
</a><a href="#h6-0-113" id="h6-0-113" class="i">+                Button(onClick = { onDismiss() }) {
</a><a href="#h6-0-114" id="h6-0-114" class="i">+                    Text(text = translation[&quot;button.ok&quot;])
</a><a href="#h6-0-115" id="h6-0-115" class="i">+                }
</a><a href="#h6-0-116" id="h6-0-116" class="i">+            }
</a><a href="#h6-0-117" id="h6-0-117" class="i">+        }
</a><a href="#h6-0-118" id="h6-0-118" class="i">+    }
</a><a href="#h6-0-119" id="h6-0-119" class="i">+
</a><a href="#h6-0-120" id="h6-0-120" class="i">+    @Composable
</a><a href="#h6-0-121" id="h6-0-121" class="i">+    fun TranslatedText(property: PropertyPair&lt;*&gt;, key: String, modifier: Modifier = Modifier) {
</a><a href="#h6-0-122" id="h6-0-122" class="i">+        Text(
</a><a href="#h6-0-123" id="h6-0-123" class="i">+            text = property.key.propertyOption(translation, key),
</a><a href="#h6-0-124" id="h6-0-124" class="i">+            modifier = Modifier
</a><a href="#h6-0-125" id="h6-0-125" class="i">+                .padding(10.dp, 10.dp, 10.dp, 10.dp)
</a><a href="#h6-0-126" id="h6-0-126" class="i">+                .then(modifier)
</a><a href="#h6-0-127" id="h6-0-127" class="i">+        )
</a><a href="#h6-0-128" id="h6-0-128" class="i">+    }
</a><a href="#h6-0-129" id="h6-0-129" class="i">+
</a><a href="#h6-0-130" id="h6-0-130" class="i">+    @Composable
</a><a href="#h6-0-131" id="h6-0-131" class="i">+    @Suppress(&quot;UNCHECKED_CAST&quot;)
</a><a href="#h6-0-132" id="h6-0-132" class="i">+    fun UniqueSelectionDialog(property: PropertyPair&lt;*&gt;) {
</a><a href="#h6-0-133" id="h6-0-133" class="i">+        val keys = (property.value.defaultValues as List&lt;String&gt;).toMutableList().apply {
</a><a href="#h6-0-134" id="h6-0-134" class="i">+            add(0, &quot;null&quot;)
</a><a href="#h6-0-135" id="h6-0-135" class="i">+        }
</a><a href="#h6-0-136" id="h6-0-136" class="i">+
</a><a href="#h6-0-137" id="h6-0-137" class="i">+        var selectedValue by remember {
</a><a href="#h6-0-138" id="h6-0-138" class="i">+            mutableStateOf(property.value.getNullable()?.toString() ?: &quot;null&quot;)
</a><a href="#h6-0-139" id="h6-0-139" class="i">+        }
</a><a href="#h6-0-140" id="h6-0-140" class="i">+
</a><a href="#h6-0-141" id="h6-0-141" class="i">+        DefaultDialogCard {
</a><a href="#h6-0-142" id="h6-0-142" class="i">+            keys.forEachIndexed { index, item -&gt;
</a><a href="#h6-0-143" id="h6-0-143" class="i">+                fun select() {
</a><a href="#h6-0-144" id="h6-0-144" class="i">+                    selectedValue = item
</a><a href="#h6-0-145" id="h6-0-145" class="i">+                    property.value.setAny(if (index == 0) {
</a><a href="#h6-0-146" id="h6-0-146" class="i">+                        null
</a><a href="#h6-0-147" id="h6-0-147" class="i">+                    } else {
</a><a href="#h6-0-148" id="h6-0-148" class="i">+                        item
</a><a href="#h6-0-149" id="h6-0-149" class="i">+                    })
</a><a href="#h6-0-150" id="h6-0-150" class="i">+                }
</a><a href="#h6-0-151" id="h6-0-151" class="i">+
</a><a href="#h6-0-152" id="h6-0-152" class="i">+                Row(
</a><a href="#h6-0-153" id="h6-0-153" class="i">+                    modifier = Modifier.clickable { select() },
</a><a href="#h6-0-154" id="h6-0-154" class="i">+                    verticalAlignment = Alignment.CenterVertically
</a><a href="#h6-0-155" id="h6-0-155" class="i">+                ) {
</a><a href="#h6-0-156" id="h6-0-156" class="i">+                    TranslatedText(
</a><a href="#h6-0-157" id="h6-0-157" class="i">+                        property = property,
</a><a href="#h6-0-158" id="h6-0-158" class="i">+                        key = item,
</a><a href="#h6-0-159" id="h6-0-159" class="i">+                        modifier = Modifier.weight(1f)
</a><a href="#h6-0-160" id="h6-0-160" class="i">+                    )
</a><a href="#h6-0-161" id="h6-0-161" class="i">+                    RadioButton(
</a><a href="#h6-0-162" id="h6-0-162" class="i">+                        selected = selectedValue == item,
</a><a href="#h6-0-163" id="h6-0-163" class="i">+                        onClick = { select() }
</a><a href="#h6-0-164" id="h6-0-164" class="i">+                    )
</a><a href="#h6-0-165" id="h6-0-165" class="i">+                }
</a><a href="#h6-0-166" id="h6-0-166" class="i">+            }
</a><a href="#h6-0-167" id="h6-0-167" class="i">+        }
</a><a href="#h6-0-168" id="h6-0-168" class="i">+    }
</a><a href="#h6-0-169" id="h6-0-169" class="i">+
</a><a href="#h6-0-170" id="h6-0-170" class="i">+    @Composable
</a><a href="#h6-0-171" id="h6-0-171" class="i">+    fun KeyboardInputDialog(property: PropertyPair&lt;*&gt;, dismiss: () -&gt; Unit = {}) {
</a><a href="#h6-0-172" id="h6-0-172" class="i">+        val focusRequester = remember { FocusRequester() }
</a><a href="#h6-0-173" id="h6-0-173" class="i">+
</a><a href="#h6-0-174" id="h6-0-174" class="i">+        DefaultDialogCard {
</a><a href="#h6-0-175" id="h6-0-175" class="i">+            val fieldValue = remember {
</a><a href="#h6-0-176" id="h6-0-176" class="i">+                mutableStateOf(property.value.get().toString().let {
</a><a href="#h6-0-177" id="h6-0-177" class="i">+                    TextFieldValue(
</a><a href="#h6-0-178" id="h6-0-178" class="i">+                        text = it,
</a><a href="#h6-0-179" id="h6-0-179" class="i">+                        selection = TextRange(it.length)
</a><a href="#h6-0-180" id="h6-0-180" class="i">+                    )
</a><a href="#h6-0-181" id="h6-0-181" class="i">+                })
</a><a href="#h6-0-182" id="h6-0-182" class="i">+            }
</a><a href="#h6-0-183" id="h6-0-183" class="i">+
</a><a href="#h6-0-184" id="h6-0-184" class="i">+            TextField(
</a><a href="#h6-0-185" id="h6-0-185" class="i">+                modifier = Modifier
</a><a href="#h6-0-186" id="h6-0-186" class="i">+                    .fillMaxWidth()
</a><a href="#h6-0-187" id="h6-0-187" class="i">+                    .padding(all = 10.dp)
</a><a href="#h6-0-188" id="h6-0-188" class="i">+                    .onGloballyPositioned {
</a><a href="#h6-0-189" id="h6-0-189" class="i">+                        focusRequester.requestFocus()
</a><a href="#h6-0-190" id="h6-0-190" class="i">+                    }
</a><a href="#h6-0-191" id="h6-0-191" class="i">+                    .focusRequester(focusRequester),
</a><a href="#h6-0-192" id="h6-0-192" class="i">+                value = fieldValue.value,
</a><a href="#h6-0-193" id="h6-0-193" class="i">+                onValueChange = {
</a><a href="#h6-0-194" id="h6-0-194" class="i">+                    fieldValue.value = it
</a><a href="#h6-0-195" id="h6-0-195" class="i">+                },
</a><a href="#h6-0-196" id="h6-0-196" class="i">+                keyboardOptions = when (property.key.dataType.type) {
</a><a href="#h6-0-197" id="h6-0-197" class="i">+                    DataProcessors.Type.INTEGER -&gt; KeyboardOptions(keyboardType = KeyboardType.Number)
</a><a href="#h6-0-198" id="h6-0-198" class="i">+                    DataProcessors.Type.FLOAT -&gt; KeyboardOptions(keyboardType = KeyboardType.Decimal)
</a><a href="#h6-0-199" id="h6-0-199" class="i">+                    else -&gt; KeyboardOptions(keyboardType = KeyboardType.Text)
</a><a href="#h6-0-200" id="h6-0-200" class="i">+                },
</a><a href="#h6-0-201" id="h6-0-201" class="i">+                singleLine = true
</a><a href="#h6-0-202" id="h6-0-202" class="i">+            )
</a><a href="#h6-0-203" id="h6-0-203" class="i">+
</a><a href="#h6-0-204" id="h6-0-204" class="i">+            Row(
</a><a href="#h6-0-205" id="h6-0-205" class="i">+                modifier = Modifier.padding(top = 10.dp).fillMaxWidth(),
</a><a href="#h6-0-206" id="h6-0-206" class="i">+                horizontalArrangement = Arrangement.SpaceEvenly,
</a><a href="#h6-0-207" id="h6-0-207" class="i">+            ) {
</a><a href="#h6-0-208" id="h6-0-208" class="i">+                Button(onClick = { dismiss() }) {
</a><a href="#h6-0-209" id="h6-0-209" class="i">+                    Text(text = &quot;Cancel&quot;)
</a><a href="#h6-0-210" id="h6-0-210" class="i">+                }
</a><a href="#h6-0-211" id="h6-0-211" class="i">+                Button(onClick = {
</a><a href="#h6-0-212" id="h6-0-212" class="i">+                    when (property.key.dataType.type) {
</a><a href="#h6-0-213" id="h6-0-213" class="i">+                        DataProcessors.Type.INTEGER -&gt; {
</a><a href="#h6-0-214" id="h6-0-214" class="i">+                            runCatching {
</a><a href="#h6-0-215" id="h6-0-215" class="i">+                                property.value.setAny(fieldValue.value.text.toInt())
</a><a href="#h6-0-216" id="h6-0-216" class="i">+                            }.onFailure {
</a><a href="#h6-0-217" id="h6-0-217" class="i">+                                property.value.setAny(0)
</a><a href="#h6-0-218" id="h6-0-218" class="i">+                            }
</a><a href="#h6-0-219" id="h6-0-219" class="i">+                        }
</a><a href="#h6-0-220" id="h6-0-220" class="i">+                        DataProcessors.Type.FLOAT -&gt; {
</a><a href="#h6-0-221" id="h6-0-221" class="i">+                            runCatching {
</a><a href="#h6-0-222" id="h6-0-222" class="i">+                                property.value.setAny(fieldValue.value.text.toFloat())
</a><a href="#h6-0-223" id="h6-0-223" class="i">+                            }.onFailure {
</a><a href="#h6-0-224" id="h6-0-224" class="i">+                                property.value.setAny(0f)
</a><a href="#h6-0-225" id="h6-0-225" class="i">+                            }
</a><a href="#h6-0-226" id="h6-0-226" class="i">+                        }
</a><a href="#h6-0-227" id="h6-0-227" class="i">+                        else -&gt; property.value.setAny(fieldValue.value.text)
</a><a href="#h6-0-228" id="h6-0-228" class="i">+                    }
</a><a href="#h6-0-229" id="h6-0-229" class="i">+                    dismiss()
</a><a href="#h6-0-230" id="h6-0-230" class="i">+                }) {
</a><a href="#h6-0-231" id="h6-0-231" class="i">+                    Text(text = &quot;Ok&quot;)
</a><a href="#h6-0-232" id="h6-0-232" class="i">+                }
</a><a href="#h6-0-233" id="h6-0-233" class="i">+            }
</a><a href="#h6-0-234" id="h6-0-234" class="i">+        }
</a><a href="#h6-0-235" id="h6-0-235" class="i">+    }
</a><a href="#h6-0-236" id="h6-0-236" class="i">+
</a><a href="#h6-0-237" id="h6-0-237" class="i">+    @Composable
</a><a href="#h6-0-238" id="h6-0-238" class="i">+    @Suppress(&quot;UNCHECKED_CAST&quot;)
</a><a href="#h6-0-239" id="h6-0-239" class="i">+    fun MultipleSelectionDialog(property: PropertyPair&lt;*&gt;) {
</a><a href="#h6-0-240" id="h6-0-240" class="i">+        val defaultItems = property.value.defaultValues as List&lt;String&gt;
</a><a href="#h6-0-241" id="h6-0-241" class="i">+        val toggledStates = property.value.get() as MutableList&lt;String&gt;
</a><a href="#h6-0-242" id="h6-0-242" class="i">+        DefaultDialogCard {
</a><a href="#h6-0-243" id="h6-0-243" class="i">+            defaultItems.forEach { key -&gt;
</a><a href="#h6-0-244" id="h6-0-244" class="i">+                var state by remember { mutableStateOf(toggledStates.contains(key)) }
</a><a href="#h6-0-245" id="h6-0-245" class="i">+
</a><a href="#h6-0-246" id="h6-0-246" class="i">+                fun toggle(value: Boolean? = null) {
</a><a href="#h6-0-247" id="h6-0-247" class="i">+                    state = value ?: !state
</a><a href="#h6-0-248" id="h6-0-248" class="i">+                    if (state) {
</a><a href="#h6-0-249" id="h6-0-249" class="i">+                        toggledStates.add(key)
</a><a href="#h6-0-250" id="h6-0-250" class="i">+                    } else {
</a><a href="#h6-0-251" id="h6-0-251" class="i">+                        toggledStates.remove(key)
</a><a href="#h6-0-252" id="h6-0-252" class="i">+                    }
</a><a href="#h6-0-253" id="h6-0-253" class="i">+                }
</a><a href="#h6-0-254" id="h6-0-254" class="i">+
</a><a href="#h6-0-255" id="h6-0-255" class="i">+                Row(
</a><a href="#h6-0-256" id="h6-0-256" class="i">+                    modifier = Modifier.clickable { toggle() },
</a><a href="#h6-0-257" id="h6-0-257" class="i">+                    verticalAlignment = Alignment.CenterVertically
</a><a href="#h6-0-258" id="h6-0-258" class="i">+                ) {
</a><a href="#h6-0-259" id="h6-0-259" class="i">+                    TranslatedText(
</a><a href="#h6-0-260" id="h6-0-260" class="i">+                        property = property,
</a><a href="#h6-0-261" id="h6-0-261" class="i">+                        key = key,
</a><a href="#h6-0-262" id="h6-0-262" class="i">+                        modifier = Modifier
</a><a href="#h6-0-263" id="h6-0-263" class="i">+                            .weight(1f)
</a><a href="#h6-0-264" id="h6-0-264" class="i">+                    )
</a><a href="#h6-0-265" id="h6-0-265" class="i">+                    Switch(
</a><a href="#h6-0-266" id="h6-0-266" class="i">+                        checked = state,
</a><a href="#h6-0-267" id="h6-0-267" class="i">+                        onCheckedChange = {
</a><a href="#h6-0-268" id="h6-0-268" class="i">+                            toggle(it)
</a><a href="#h6-0-269" id="h6-0-269" class="i">+                        }
</a><a href="#h6-0-270" id="h6-0-270" class="i">+                    )
</a><a href="#h6-0-271" id="h6-0-271" class="i">+                }
</a><a href="#h6-0-272" id="h6-0-272" class="i">+            }
</a><a href="#h6-0-273" id="h6-0-273" class="i">+        }
</a><a href="#h6-0-274" id="h6-0-274" class="i">+    }
</a><a href="#h6-0-275" id="h6-0-275" class="i">+}
</a></pre>
</div>
</body>
</html>
