<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>feat(social): auto sync scope - SnapEnhance - An Xposed module offering an enhanced Snapchat experience
</title>
<link rel="icon" type="image/svg+xml" href="../../logo.png"/>
<link rel="alternate icon" href="../../favicon.png"/>
<link rel="alternate" type="application/atom+xml" title="SnapEnhance Atom Feed" href="../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="SnapEnhance Atom Feed (tags)" href="../tags.xml" />
<link rel="stylesheet" type="text/css" href="../../style.css" />
<link rel="stylesheet" type="text/css" href="../../fonts.css" />
</head>
<body>
<div id="head"><table><tr><td><a class="logo" href="../../"><img src="../../logo.png" alt="" width="32" height="32" /></a></td><td><strong>SnapEnhance</strong><span class="desc"> - An Xposed module offering an enhanced Snapchat experience
</span>
</td></tr></table>
<p><a href="../about.html">About</a> | <a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/LICENSE.html">License</a></p>
</div>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/f2e49e93fbd3df5b1a9e70601b33c38b9256445f.html">f2e49e93fbd3df5b1a9e70601b33c38b9256445f</a>
<b>parent</b> <a href="../commit/8bdd7a16b4b940e2af0deeb54a5d7f394163888c.html">8bdd7a16b4b940e2af0deeb54a5d7f394163888c</a>
<b>Author:</b> rhunk &lt;<a href="mailto:101876869+rhunk@users.noreply.github.com">101876869+rhunk@users.noreply.github.com</a>&gt;
<b>Date:</b>   Thu, 21 Sep 2023 21:06:56 +0200

feat(social): auto sync scope

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">app/src/main/kotlin/me/rhunk/snapenhance/bridge/BridgeService.kt</a></td><td> | </td><td class="num">51</td><td><span class="i">++++++++++++++++++++++++++++++++++</span><span class="d">-----------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt</a></td><td> | </td><td class="num">5</td><td><span class="i">+++</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h2">core/src/main/aidl/me/rhunk/snapenhance/bridge/BridgeInterface.aidl</a></td><td> | </td><td class="num">5</td><td><span class="i">+++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h3">core/src/main/kotlin/me/rhunk/snapenhance/EventDispatcher.kt</a></td><td> | </td><td class="num">3</td><td><span class="i">++</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h4">core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/BridgeClient.kt</a></td><td> | </td><td class="num">20</td><td><span class="i">+++++</span><span class="d">---------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h5">core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/types/BridgeFileType.kt</a></td><td> | </td><td class="num">3</td><td><span class="i">+</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h6">core/src/main/kotlin/me/rhunk/snapenhance/core/eventbus/events/impl/SendMessageWithContentEvent.kt</a></td><td> | </td><td class="num">19</td><td><span class="i">++++++++++++++++</span><span class="d">---</span></td></tr>
<tr><td class="M">M</td><td><a href="#h7">core/src/main/kotlin/me/rhunk/snapenhance/core/messaging/MessagingCoreObjects.kt</a></td><td> | </td><td class="num">6</td><td><span class="i">+++++</span><span class="d">-</span></td></tr>
<tr><td class="A">A</td><td><a href="#h8">core/src/main/kotlin/me/rhunk/snapenhance/features/impl/ScopeSync.kt</a></td><td> | </td><td class="num">43</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h9">core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/SnapchatPlus.kt</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h10">core/src/main/kotlin/me/rhunk/snapenhance/hook/HookAdapter.kt</a></td><td> | </td><td class="num">6</td><td><span class="i">+++</span><span class="d">---</span></td></tr>
<tr><td class="M">M</td><td><a href="#h11">core/src/main/kotlin/me/rhunk/snapenhance/manager/impl/FeatureManager.kt</a></td><td> | </td><td class="num">110</td><td><span class="i">+++++++++++++++++++++++++++++++++++</span><span class="d">--------------------------------------------</span></td></tr>
</table></pre><pre>12 files changed, 167 insertions(+), 106 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/bridge/BridgeService.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/bridge/BridgeService.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/bridge/BridgeService.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/bridge/BridgeService.kt</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -13,6 +13,7 @@ import me.rhunk.snapenhance.core.database.objects.FriendInfo
</a> import me.rhunk.snapenhance.core.logger.LogLevel
 import me.rhunk.snapenhance.core.messaging.MessagingFriendInfo
 import me.rhunk.snapenhance.core.messaging.MessagingGroupInfo
<a href="#h0-0-3" id="h0-0-3" class="i">+import me.rhunk.snapenhance.core.messaging.SocialScope
</a> import me.rhunk.snapenhance.core.util.SerializableDataObject
 import me.rhunk.snapenhance.download.DownloadProcessor
 import kotlin.system.measureTimeMillis
<a href="#h0-1" id="h0-1" class="h">@@ -33,25 +34,36 @@ class BridgeService : Service() {
</a>         return BridgeBinder()
     }
 
<a href="#h0-1-3" id="h0-1-3" class="d">-    fun triggerFriendSync(friendId: String) {
</a><a href="#h0-1-4" id="h0-1-4" class="d">-        val syncedFriend = syncCallback.syncFriend(friendId)
</a><a href="#h0-1-5" id="h0-1-5" class="d">-        if (syncedFriend == null) {
</a><a href="#h0-1-6" id="h0-1-6" class="d">-            remoteSideContext.log.error(&quot;Failed to sync friend $friendId&quot;)
</a><a href="#h0-1-7" id="h0-1-7" class="d">-            return
</a><a href="#h0-1-8" id="h0-1-8" class="d">-        }
</a><a href="#h0-1-9" id="h0-1-9" class="d">-        SerializableDataObject.fromJson&lt;FriendInfo&gt;(syncedFriend).let {
</a><a href="#h0-1-10" id="h0-1-10" class="d">-            remoteSideContext.modDatabase.syncFriend(it)
</a><a href="#h0-1-11" id="h0-1-11" class="i">+    fun triggerScopeSync(scope: SocialScope, id: String, updateOnly: Boolean = false) {
</a><a href="#h0-1-12" id="h0-1-12" class="i">+        val modDatabase = remoteSideContext.modDatabase
</a><a href="#h0-1-13" id="h0-1-13" class="i">+        val syncedObject = when (scope) {
</a><a href="#h0-1-14" id="h0-1-14" class="i">+            SocialScope.FRIEND -&gt; {
</a><a href="#h0-1-15" id="h0-1-15" class="i">+                if (updateOnly &amp;&amp; modDatabase.getFriendInfo(id) == null) return
</a><a href="#h0-1-16" id="h0-1-16" class="i">+                syncCallback.syncFriend(id)
</a><a href="#h0-1-17" id="h0-1-17" class="i">+            }
</a><a href="#h0-1-18" id="h0-1-18" class="i">+            SocialScope.GROUP -&gt; {
</a><a href="#h0-1-19" id="h0-1-19" class="i">+                if (updateOnly &amp;&amp; modDatabase.getGroupInfo(id) == null) return
</a><a href="#h0-1-20" id="h0-1-20" class="i">+                syncCallback.syncGroup(id)
</a><a href="#h0-1-21" id="h0-1-21" class="i">+            }
</a><a href="#h0-1-22" id="h0-1-22" class="i">+            else -&gt; null
</a>         }
<a href="#h0-1-24" id="h0-1-24" class="d">-    }
</a> 
<a href="#h0-1-26" id="h0-1-26" class="d">-    fun triggerGroupSync(groupId: String) {
</a><a href="#h0-1-27" id="h0-1-27" class="d">-        val syncedGroup = syncCallback.syncGroup(groupId)
</a><a href="#h0-1-28" id="h0-1-28" class="d">-        if (syncedGroup == null) {
</a><a href="#h0-1-29" id="h0-1-29" class="d">-            remoteSideContext.log.error(&quot;Failed to sync group $groupId&quot;)
</a><a href="#h0-1-30" id="h0-1-30" class="i">+        if (syncedObject == null) {
</a><a href="#h0-1-31" id="h0-1-31" class="i">+            remoteSideContext.log.error(&quot;Failed to sync $scope $id&quot;)
</a>             return
         }
<a href="#h0-1-34" id="h0-1-34" class="d">-        SerializableDataObject.fromJson&lt;MessagingGroupInfo&gt;(syncedGroup).let {
</a><a href="#h0-1-35" id="h0-1-35" class="d">-            remoteSideContext.modDatabase.syncGroupInfo(it)
</a><a href="#h0-1-36" id="h0-1-36" class="i">+
</a><a href="#h0-1-37" id="h0-1-37" class="i">+        when (scope) {
</a><a href="#h0-1-38" id="h0-1-38" class="i">+            SocialScope.FRIEND -&gt; {
</a><a href="#h0-1-39" id="h0-1-39" class="i">+                SerializableDataObject.fromJson&lt;FriendInfo&gt;(syncedObject).let {
</a><a href="#h0-1-40" id="h0-1-40" class="i">+                    modDatabase.syncFriend(it)
</a><a href="#h0-1-41" id="h0-1-41" class="i">+                }
</a><a href="#h0-1-42" id="h0-1-42" class="i">+            }
</a><a href="#h0-1-43" id="h0-1-43" class="i">+            SocialScope.GROUP -&gt; {
</a><a href="#h0-1-44" id="h0-1-44" class="i">+                SerializableDataObject.fromJson&lt;MessagingGroupInfo&gt;(syncedObject).let {
</a><a href="#h0-1-45" id="h0-1-45" class="i">+                    modDatabase.syncGroupInfo(it)
</a><a href="#h0-1-46" id="h0-1-46" class="i">+                }
</a><a href="#h0-1-47" id="h0-1-47" class="i">+            }
</a>         }
     }
 
<a href="#h0-2" id="h0-2" class="h">@@ -141,14 +153,14 @@ class BridgeService : Service() {
</a>             measureTimeMillis {
                 remoteSideContext.modDatabase.getFriends().map { it.userId } .forEach { friendId -&gt;
                     runCatching {
<a href="#h0-2-3" id="h0-2-3" class="d">-                        triggerFriendSync(friendId)
</a><a href="#h0-2-4" id="h0-2-4" class="i">+                        triggerScopeSync(SocialScope.FRIEND, friendId, true)
</a>                     }.onFailure {
                         remoteSideContext.log.error(&quot;Failed to sync friend $friendId&quot;, it)
                     }
                 }
                 remoteSideContext.modDatabase.getGroups().map { it.conversationId }.forEach { groupId -&gt;
                     runCatching {
<a href="#h0-2-11" id="h0-2-11" class="d">-                        triggerGroupSync(groupId)
</a><a href="#h0-2-12" id="h0-2-12" class="i">+                        triggerScopeSync(SocialScope.GROUP, groupId, true)
</a>                     }.onFailure {
                         remoteSideContext.log.error(&quot;Failed to sync group $groupId&quot;, it)
                     }
<a href="#h0-3" id="h0-3" class="h">@@ -158,6 +170,11 @@ class BridgeService : Service() {
</a>             }
         }
 
<a href="#h0-3-3" id="h0-3-3" class="i">+        override fun triggerSync(scope: String, id: String) {
</a><a href="#h0-3-4" id="h0-3-4" class="i">+            remoteSideContext.log.verbose(&quot;trigger sync for $scope $id&quot;)
</a><a href="#h0-3-5" id="h0-3-5" class="i">+            triggerScopeSync(SocialScope.getByName(scope), id, true)
</a><a href="#h0-3-6" id="h0-3-6" class="i">+        }
</a><a href="#h0-3-7" id="h0-3-7" class="i">+
</a>         override fun passGroupsAndFriends(
             groups: List&lt;String&gt;,
             friends: List&lt;String&gt;
<b>diff --git a/<a id="h1" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -47,6 +47,7 @@ import me.rhunk.snapenhance.RemoteSideContext
</a> import me.rhunk.snapenhance.core.bridge.BridgeClient
 import me.rhunk.snapenhance.core.messaging.MessagingFriendInfo
 import me.rhunk.snapenhance.core.messaging.MessagingGroupInfo
<a href="#h1-0-3" id="h1-0-3" class="i">+import me.rhunk.snapenhance.core.messaging.SocialScope
</a> import me.rhunk.snapenhance.core.util.snap.SnapWidgetBroadcastReceiverHelper
 
 class AddFriendDialog(
<a href="#h1-1" id="h1-1" class="h">@@ -239,7 +240,7 @@ class AddFriendDialog(
</a>                             getCurrentState = { context.modDatabase.getGroupInfo(group.conversationId) != null }
                         ) { state -&gt;
                             if (state) {
<a href="#h1-1-3" id="h1-1-3" class="d">-                                context.bridgeService.triggerGroupSync(group.conversationId)
</a><a href="#h1-1-4" id="h1-1-4" class="i">+                                context.bridgeService.triggerScopeSync(SocialScope.GROUP, group.conversationId)
</a>                             } else {
                                 context.modDatabase.deleteGroup(group.conversationId)
                             }
<a href="#h1-2" id="h1-2" class="h">@@ -266,7 +267,7 @@ class AddFriendDialog(
</a>                             getCurrentState = { context.modDatabase.getFriendInfo(friend.userId) != null }
                         ) { state -&gt;
                             if (state) {
<a href="#h1-2-3" id="h1-2-3" class="d">-                                context.bridgeService.triggerFriendSync(friend.userId)
</a><a href="#h1-2-4" id="h1-2-4" class="i">+                                context.bridgeService.triggerScopeSync(SocialScope.FRIEND, friend.userId)
</a>                             } else {
                                 context.modDatabase.deleteFriend(friend.userId)
                             }
<b>diff --git a/<a id="h2" href="../file/core/src/main/aidl/me/rhunk/snapenhance/bridge/BridgeInterface.aidl.html">core/src/main/aidl/me/rhunk/snapenhance/bridge/BridgeInterface.aidl</a> b/<a href="../file/core/src/main/aidl/me/rhunk/snapenhance/bridge/BridgeInterface.aidl.html">core/src/main/aidl/me/rhunk/snapenhance/bridge/BridgeInterface.aidl</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -81,6 +81,11 @@ interface BridgeInterface {
</a>     oneway void sync(SyncCallback callback);
 
     /**
<a href="#h2-0-3" id="h2-0-3" class="i">+    * Trigger sync for an id
</a><a href="#h2-0-4" id="h2-0-4" class="i">+    */
</a><a href="#h2-0-5" id="h2-0-5" class="i">+    void triggerSync(String scope, String id);
</a><a href="#h2-0-6" id="h2-0-6" class="i">+
</a><a href="#h2-0-7" id="h2-0-7" class="i">+    /**
</a>     * Pass all groups and friends to be able to add them to the database
     * @param groups list of groups (MessagingGroupInfo as json string)
     * @param friends list of friends (MessagingFriendInfo as json string)
<b>diff --git a/<a id="h3" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/EventDispatcher.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/EventDispatcher.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/EventDispatcher.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/EventDispatcher.kt</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -26,7 +26,8 @@ class EventDispatcher(
</a>         context.classCache.conversationManager.hook(&quot;sendMessageWithContent&quot;, HookStage.BEFORE) { param -&gt;
             context.event.post(SendMessageWithContentEvent(
                 destinations = MessageDestinations(param.arg(0)),
<a href="#h3-0-3" id="h3-0-3" class="d">-                messageContent = MessageContent(param.arg(1))
</a><a href="#h3-0-4" id="h3-0-4" class="i">+                messageContent = MessageContent(param.arg(1)),
</a><a href="#h3-0-5" id="h3-0-5" class="i">+                callback = param.arg(2)
</a>             ).apply { adapter = param })?.also {
                 if (it.canceled) {
                     param.setResult(null)
<b>diff --git a/<a id="h4" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/BridgeClient.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/BridgeClient.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/BridgeClient.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/BridgeClient.kt</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -14,10 +14,12 @@ import me.rhunk.snapenhance.ModContext
</a> import me.rhunk.snapenhance.bridge.BridgeInterface
 import me.rhunk.snapenhance.bridge.DownloadCallback
 import me.rhunk.snapenhance.bridge.SyncCallback
<a href="#h4-0-3" id="h4-0-3" class="i">+import me.rhunk.snapenhance.bridge.scripting.IScripting
</a> import me.rhunk.snapenhance.core.BuildConfig
 import me.rhunk.snapenhance.core.bridge.types.BridgeFileType
 import me.rhunk.snapenhance.core.bridge.types.FileActionType
 import me.rhunk.snapenhance.core.messaging.MessagingRuleType
<a href="#h4-0-8" id="h4-0-8" class="i">+import me.rhunk.snapenhance.core.messaging.SocialScope
</a> import me.rhunk.snapenhance.data.LocalePair
 import java.util.concurrent.CompletableFuture
 import java.util.concurrent.Executors
<a href="#h4-1" id="h4-1" class="h">@@ -118,24 +120,12 @@ class BridgeClient(
</a> 
     fun getApplicationApkPath() = service.getApplicationApkPath()
 
<a href="#h4-1-3" id="h4-1-3" class="d">-    fun getAutoUpdaterTime(): Long {
</a><a href="#h4-1-4" id="h4-1-4" class="d">-        createAndReadFile(BridgeFileType.AUTO_UPDATER_TIMESTAMP, &quot;0&quot;.toByteArray()).run {
</a><a href="#h4-1-5" id="h4-1-5" class="d">-            return if (isEmpty()) {
</a><a href="#h4-1-6" id="h4-1-6" class="d">-                0
</a><a href="#h4-1-7" id="h4-1-7" class="d">-            } else {
</a><a href="#h4-1-8" id="h4-1-8" class="d">-                String(this).toLong()
</a><a href="#h4-1-9" id="h4-1-9" class="d">-            }
</a><a href="#h4-1-10" id="h4-1-10" class="d">-        }
</a><a href="#h4-1-11" id="h4-1-11" class="d">-    }
</a><a href="#h4-1-12" id="h4-1-12" class="d">-
</a><a href="#h4-1-13" id="h4-1-13" class="d">-    fun setAutoUpdaterTime(time: Long) {
</a><a href="#h4-1-14" id="h4-1-14" class="d">-        writeFile(BridgeFileType.AUTO_UPDATER_TIMESTAMP, time.toString().toByteArray())
</a><a href="#h4-1-15" id="h4-1-15" class="d">-    }
</a><a href="#h4-1-16" id="h4-1-16" class="d">-
</a>     fun enqueueDownload(intent: Intent, callback: DownloadCallback) = service.enqueueDownload(intent, callback)
 
     fun sync(callback: SyncCallback) = service.sync(callback)
 
<a href="#h4-1-21" id="h4-1-21" class="i">+    fun triggerSync(scope: SocialScope, id: String) = service.triggerSync(scope.key, id)
</a><a href="#h4-1-22" id="h4-1-22" class="i">+
</a>     fun passGroupsAndFriends(groups: List&lt;String&gt;, friends: List&lt;String&gt;) = service.passGroupsAndFriends(groups, friends)
 
     fun getRules(targetUuid: String): List&lt;MessagingRuleType&gt; {
<a href="#h4-2" id="h4-2" class="h">@@ -149,5 +139,5 @@ class BridgeClient(
</a>     fun setRule(targetUuid: String, type: MessagingRuleType, state: Boolean)
         = service.setRule(targetUuid, type.key, state)
 
<a href="#h4-2-3" id="h4-2-3" class="d">-    fun getScriptingInterface() = service.getScriptingInterface()
</a><a href="#h4-2-4" id="h4-2-4" class="i">+    fun getScriptingInterface(): IScripting = service.getScriptingInterface()
</a> }
<b>diff --git a/<a id="h5" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/types/BridgeFileType.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/types/BridgeFileType.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/types/BridgeFileType.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/types/BridgeFileType.kt</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -8,8 +8,7 @@ enum class BridgeFileType(val value: Int, val fileName: String, val displayName:
</a>     CONFIG(0, &quot;config.json&quot;, &quot;Config&quot;),
     MAPPINGS(1, &quot;mappings.json&quot;, &quot;Mappings&quot;),
     MESSAGE_LOGGER_DATABASE(2, &quot;message_logger.db&quot;, &quot;Message Logger&quot;,true),
<a href="#h5-0-3" id="h5-0-3" class="d">-    AUTO_UPDATER_TIMESTAMP(3, &quot;auto_updater_timestamp.txt&quot;, &quot;Auto Updater Timestamp&quot;),
</a><a href="#h5-0-4" id="h5-0-4" class="d">-    PINNED_CONVERSATIONS(4, &quot;pinned_conversations.txt&quot;, &quot;Pinned Conversations&quot;);
</a><a href="#h5-0-5" id="h5-0-5" class="i">+    PINNED_CONVERSATIONS(3, &quot;pinned_conversations.txt&quot;, &quot;Pinned Conversations&quot;);
</a> 
     fun resolve(context: Context): File = if (isDatabase) {
         context.getDatabasePath(fileName)
<b>diff --git a/<a id="h6" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/eventbus/events/impl/SendMessageWithContentEvent.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/eventbus/events/impl/SendMessageWithContentEvent.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/eventbus/events/impl/SendMessageWithContentEvent.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/eventbus/events/impl/SendMessageWithContentEvent.kt</a></b>
<a href="#h6-0" id="h6-0" class="h">@@ -3,8 +3,21 @@ package me.rhunk.snapenhance.core.eventbus.events.impl
</a> import me.rhunk.snapenhance.core.eventbus.events.AbstractHookEvent
 import me.rhunk.snapenhance.data.wrapper.impl.MessageContent
 import me.rhunk.snapenhance.data.wrapper.impl.MessageDestinations
<a href="#h6-0-3" id="h6-0-3" class="i">+import me.rhunk.snapenhance.hook.HookStage
</a><a href="#h6-0-4" id="h6-0-4" class="i">+import me.rhunk.snapenhance.hook.Hooker
</a> 
 class SendMessageWithContentEvent(
     val destinations: MessageDestinations,
<a href="#h6-0-8" id="h6-0-8" class="d">-    val messageContent: MessageContent
</a><a href="#h6-0-9" id="h6-0-9" class="d">-) : AbstractHookEvent()</a><a href="#h6-0-10" id="h6-0-10" class="d">-
\ No newline at end of file
</a><a href="#h6-0-11" id="h6-0-11" class="i">+    val messageContent: MessageContent,
</a><a href="#h6-0-12" id="h6-0-12" class="i">+    private val callback: Any
</a><a href="#h6-0-13" id="h6-0-13" class="i">+) : AbstractHookEvent() {
</a><a href="#h6-0-14" id="h6-0-14" class="i">+
</a><a href="#h6-0-15" id="h6-0-15" class="i">+    fun addCallbackResult(methodName: String, block: (args: Array&lt;Any?&gt;) -&gt; Unit) {
</a><a href="#h6-0-16" id="h6-0-16" class="i">+        Hooker.ephemeralHookObjectMethod(
</a><a href="#h6-0-17" id="h6-0-17" class="i">+            callback::class.java,
</a><a href="#h6-0-18" id="h6-0-18" class="i">+            callback,
</a><a href="#h6-0-19" id="h6-0-19" class="i">+            methodName,
</a><a href="#h6-0-20" id="h6-0-20" class="i">+            HookStage.BEFORE
</a><a href="#h6-0-21" id="h6-0-21" class="i">+        ) { block(it.args()) }
</a><a href="#h6-0-22" id="h6-0-22" class="i">+    }
</a><a href="#h6-0-23" id="h6-0-23" class="i">+}</a><a href="#h6-0-24" id="h6-0-24" class="i">+
\ No newline at end of file
</a><b>diff --git a/<a id="h7" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/messaging/MessagingCoreObjects.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/messaging/MessagingCoreObjects.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/messaging/MessagingCoreObjects.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/messaging/MessagingCoreObjects.kt</a></b>
<a href="#h7-0" id="h7-0" class="h">@@ -19,7 +19,11 @@ enum class SocialScope(
</a>     val tabRoute: String,
 ) {
     FRIEND(&quot;friend&quot;, &quot;friend_info/{id}&quot;),
<a href="#h7-0-3" id="h7-0-3" class="d">-    GROUP(&quot;group&quot;, &quot;group_info/{id}&quot;),
</a><a href="#h7-0-4" id="h7-0-4" class="i">+    GROUP(&quot;group&quot;, &quot;group_info/{id}&quot;);
</a><a href="#h7-0-5" id="h7-0-5" class="i">+
</a><a href="#h7-0-6" id="h7-0-6" class="i">+    companion object {
</a><a href="#h7-0-7" id="h7-0-7" class="i">+        fun getByName(name: String) = values().first { it.key == name }
</a><a href="#h7-0-8" id="h7-0-8" class="i">+    }
</a> }
 
 enum class MessagingRuleType(
<b>diff --git a/<a id="h8" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/features/impl/ScopeSync.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/features/impl/ScopeSync.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/features/impl/ScopeSync.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/features/impl/ScopeSync.kt</a></b>
<a href="#h8-0" id="h8-0" class="h">@@ -0,0 +1,42 @@
</a><a href="#h8-0-0" id="h8-0-0" class="i">+package me.rhunk.snapenhance.features.impl
</a><a href="#h8-0-1" id="h8-0-1" class="i">+
</a><a href="#h8-0-2" id="h8-0-2" class="i">+import kotlinx.coroutines.*
</a><a href="#h8-0-3" id="h8-0-3" class="i">+import me.rhunk.snapenhance.core.eventbus.events.impl.SendMessageWithContentEvent
</a><a href="#h8-0-4" id="h8-0-4" class="i">+import me.rhunk.snapenhance.core.messaging.SocialScope
</a><a href="#h8-0-5" id="h8-0-5" class="i">+import me.rhunk.snapenhance.data.ContentType
</a><a href="#h8-0-6" id="h8-0-6" class="i">+import me.rhunk.snapenhance.features.Feature
</a><a href="#h8-0-7" id="h8-0-7" class="i">+import me.rhunk.snapenhance.features.FeatureLoadParams
</a><a href="#h8-0-8" id="h8-0-8" class="i">+
</a><a href="#h8-0-9" id="h8-0-9" class="i">+class ScopeSync : Feature(&quot;Scope Sync&quot;, loadParams = FeatureLoadParams.INIT_SYNC) {
</a><a href="#h8-0-10" id="h8-0-10" class="i">+    companion object {
</a><a href="#h8-0-11" id="h8-0-11" class="i">+        private const val DELAY_BEFORE_SYNC = 2000L
</a><a href="#h8-0-12" id="h8-0-12" class="i">+    }
</a><a href="#h8-0-13" id="h8-0-13" class="i">+
</a><a href="#h8-0-14" id="h8-0-14" class="i">+    private val updateJobs = mutableMapOf&lt;String, Job&gt;()
</a><a href="#h8-0-15" id="h8-0-15" class="i">+    private val coroutineScope = CoroutineScope(Dispatchers.Main)
</a><a href="#h8-0-16" id="h8-0-16" class="i">+
</a><a href="#h8-0-17" id="h8-0-17" class="i">+    private fun sync(conversationId: String) {
</a><a href="#h8-0-18" id="h8-0-18" class="i">+        context.database.getDMOtherParticipant(conversationId)?.also { participant -&gt;
</a><a href="#h8-0-19" id="h8-0-19" class="i">+            context.bridgeClient.triggerSync(SocialScope.FRIEND, participant)
</a><a href="#h8-0-20" id="h8-0-20" class="i">+        } ?: run {
</a><a href="#h8-0-21" id="h8-0-21" class="i">+            context.bridgeClient.triggerSync(SocialScope.GROUP, conversationId)
</a><a href="#h8-0-22" id="h8-0-22" class="i">+        }
</a><a href="#h8-0-23" id="h8-0-23" class="i">+    }
</a><a href="#h8-0-24" id="h8-0-24" class="i">+
</a><a href="#h8-0-25" id="h8-0-25" class="i">+    override fun init() {
</a><a href="#h8-0-26" id="h8-0-26" class="i">+        context.event.subscribe(SendMessageWithContentEvent::class) { event -&gt;
</a><a href="#h8-0-27" id="h8-0-27" class="i">+            if (event.messageContent.contentType != ContentType.SNAP) return@subscribe
</a><a href="#h8-0-28" id="h8-0-28" class="i">+
</a><a href="#h8-0-29" id="h8-0-29" class="i">+            event.addCallbackResult(&quot;onSuccess&quot;) {
</a><a href="#h8-0-30" id="h8-0-30" class="i">+                event.destinations.conversations.map { it.toString() }.forEach { conversationId -&gt;
</a><a href="#h8-0-31" id="h8-0-31" class="i">+                    updateJobs[conversationId]?.also { it.cancel() }
</a><a href="#h8-0-32" id="h8-0-32" class="i">+
</a><a href="#h8-0-33" id="h8-0-33" class="i">+                    updateJobs[conversationId] = (coroutineScope.launch {
</a><a href="#h8-0-34" id="h8-0-34" class="i">+                        delay(DELAY_BEFORE_SYNC)
</a><a href="#h8-0-35" id="h8-0-35" class="i">+                        sync(conversationId)
</a><a href="#h8-0-36" id="h8-0-36" class="i">+                    })
</a><a href="#h8-0-37" id="h8-0-37" class="i">+                }
</a><a href="#h8-0-38" id="h8-0-38" class="i">+            }
</a><a href="#h8-0-39" id="h8-0-39" class="i">+        }
</a><a href="#h8-0-40" id="h8-0-40" class="i">+    }
</a><a href="#h8-0-41" id="h8-0-41" class="i">+}</a><a href="#h8-0-42" id="h8-0-42" class="i">+
\ No newline at end of file
</a><b>diff --git a/<a id="h9" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/SnapchatPlus.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/SnapchatPlus.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/SnapchatPlus.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/SnapchatPlus.kt</a></b>
<a href="#h9-0" id="h9-0" class="h">@@ -33,7 +33,7 @@ class SnapchatPlus: Feature(&quot;SnapchatPlus&quot;, loadParams = FeatureLoadParams.INIT_
</a>                 it.parameterTypes[0].name != &quot;java.lang.Boolean&quot;
             }.hook(HookStage.BEFORE) { param -&gt;
                 val instance = param.thisObject&lt;Any&gt;()
<a href="#h9-0-3" id="h9-0-3" class="d">-                val firstArg = param.args()[0]
</a><a href="#h9-0-4" id="h9-0-4" class="i">+                val firstArg = param.arg&lt;Any&gt;(0)
</a> 
                 instance::class.java.declaredFields.filter { it.type == firstArg::class.java }.forEach {
                     it.isAccessible = true
<b>diff --git a/<a id="h10" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/hook/HookAdapter.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/hook/HookAdapter.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/hook/HookAdapter.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/hook/HookAdapter.kt</a></b>
<a href="#h10-0" id="h10-0" class="h">@@ -26,7 +26,7 @@ class HookAdapter(
</a>     }
 
     fun &lt;T : Any&gt; argNullable(index: Int): T? {
<a href="#h10-0-3" id="h10-0-3" class="d">-        return methodHookParam.args[index] as T?
</a><a href="#h10-0-4" id="h10-0-4" class="i">+        return methodHookParam.args.getOrNull(index) as T?
</a>     }
 
     fun setArg(index: Int, value: Any?) {
<a href="#h10-1" id="h10-1" class="h">@@ -34,7 +34,7 @@ class HookAdapter(
</a>         methodHookParam.args[index] = value
     }
 
<a href="#h10-1-3" id="h10-1-3" class="d">-    fun args(): Array&lt;Any&gt; {
</a><a href="#h10-1-4" id="h10-1-4" class="i">+    fun args(): Array&lt;Any?&gt; {
</a>         return methodHookParam.args
     }
 
<a href="#h10-2" id="h10-2" class="h">@@ -66,7 +66,7 @@ class HookAdapter(
</a>         invokeOriginalSafe(args(), errorCallback)
     }
 
<a href="#h10-2-3" id="h10-2-3" class="d">-    fun invokeOriginalSafe(args: Array&lt;Any&gt;, errorCallback: Consumer&lt;Throwable&gt;) {
</a><a href="#h10-2-4" id="h10-2-4" class="i">+    fun invokeOriginalSafe(args: Array&lt;Any?&gt;, errorCallback: Consumer&lt;Throwable&gt;) {
</a>         runCatching {
             setResult(XposedBridge.invokeOriginalMethod(method(), thisObject(), args))
         }.onFailure {
<b>diff --git a/<a id="h11" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/manager/impl/FeatureManager.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/manager/impl/FeatureManager.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/manager/impl/FeatureManager.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/manager/impl/FeatureManager.kt</a></b>
<a href="#h11-0" id="h11-0" class="h">@@ -6,34 +6,17 @@ import me.rhunk.snapenhance.features.Feature
</a> import me.rhunk.snapenhance.features.FeatureLoadParams
 import me.rhunk.snapenhance.features.impl.ConfigurationOverride
 import me.rhunk.snapenhance.features.impl.Messaging
<a href="#h11-0-3" id="h11-0-3" class="i">+import me.rhunk.snapenhance.features.impl.ScopeSync
</a> import me.rhunk.snapenhance.features.impl.downloader.MediaDownloader
 import me.rhunk.snapenhance.features.impl.downloader.ProfilePictureDownloader
<a href="#h11-0-6" id="h11-0-6" class="d">-import me.rhunk.snapenhance.features.impl.experiments.AddFriendSourceSpoof
</a><a href="#h11-0-7" id="h11-0-7" class="d">-import me.rhunk.snapenhance.features.impl.experiments.AmoledDarkMode
</a><a href="#h11-0-8" id="h11-0-8" class="d">-import me.rhunk.snapenhance.features.impl.experiments.AppPasscode
</a><a href="#h11-0-9" id="h11-0-9" class="d">-import me.rhunk.snapenhance.features.impl.experiments.DeviceSpooferHook
</a><a href="#h11-0-10" id="h11-0-10" class="d">-import me.rhunk.snapenhance.features.impl.experiments.InfiniteStoryBoost
</a><a href="#h11-0-11" id="h11-0-11" class="d">-import me.rhunk.snapenhance.features.impl.experiments.MeoPasscodeBypass
</a><a href="#h11-0-12" id="h11-0-12" class="d">-import me.rhunk.snapenhance.features.impl.experiments.NoFriendScoreDelay
</a><a href="#h11-0-13" id="h11-0-13" class="d">-import me.rhunk.snapenhance.features.impl.experiments.UnlimitedMultiSnap
</a><a href="#h11-0-14" id="h11-0-14" class="i">+import me.rhunk.snapenhance.features.impl.experiments.*
</a> import me.rhunk.snapenhance.features.impl.privacy.DisableMetrics
 import me.rhunk.snapenhance.features.impl.privacy.PreventMessageSending
 import me.rhunk.snapenhance.features.impl.spying.AnonymousStoryViewing
 import me.rhunk.snapenhance.features.impl.spying.MessageLogger
 import me.rhunk.snapenhance.features.impl.spying.PreventReadReceipts
 import me.rhunk.snapenhance.features.impl.spying.StealthMode
<a href="#h11-0-21" id="h11-0-21" class="d">-import me.rhunk.snapenhance.features.impl.tweaks.AutoSave
</a><a href="#h11-0-22" id="h11-0-22" class="d">-import me.rhunk.snapenhance.features.impl.tweaks.CameraTweaks
</a><a href="#h11-0-23" id="h11-0-23" class="d">-import me.rhunk.snapenhance.features.impl.tweaks.DisableReplayInFF
</a><a href="#h11-0-24" id="h11-0-24" class="d">-import me.rhunk.snapenhance.features.impl.tweaks.DisableVideoLengthRestriction
</a><a href="#h11-0-25" id="h11-0-25" class="d">-import me.rhunk.snapenhance.features.impl.tweaks.GooglePlayServicesDialogs
</a><a href="#h11-0-26" id="h11-0-26" class="d">-import me.rhunk.snapenhance.features.impl.tweaks.LocationSpoofer
</a><a href="#h11-0-27" id="h11-0-27" class="d">-import me.rhunk.snapenhance.features.impl.tweaks.MediaQualityLevelOverride
</a><a href="#h11-0-28" id="h11-0-28" class="d">-import me.rhunk.snapenhance.features.impl.tweaks.Notifications
</a><a href="#h11-0-29" id="h11-0-29" class="d">-import me.rhunk.snapenhance.features.impl.tweaks.OldBitmojiSelfie
</a><a href="#h11-0-30" id="h11-0-30" class="d">-import me.rhunk.snapenhance.features.impl.tweaks.SendOverride
</a><a href="#h11-0-31" id="h11-0-31" class="d">-import me.rhunk.snapenhance.features.impl.tweaks.SnapchatPlus
</a><a href="#h11-0-32" id="h11-0-32" class="d">-import me.rhunk.snapenhance.features.impl.tweaks.UnlimitedSnapViewTime
</a><a href="#h11-0-33" id="h11-0-33" class="i">+import me.rhunk.snapenhance.features.impl.tweaks.*
</a> import me.rhunk.snapenhance.features.impl.ui.ClientBootstrapOverride
 import me.rhunk.snapenhance.features.impl.ui.PinConversations
 import me.rhunk.snapenhance.features.impl.ui.UITweaks
<a href="#h11-1" id="h11-1" class="h">@@ -46,14 +29,16 @@ class FeatureManager(private val context: ModContext) : Manager {
</a>     private val asyncLoadExecutorService = Executors.newFixedThreadPool(5)
     private val features = mutableListOf&lt;Feature&gt;()
 
<a href="#h11-1-3" id="h11-1-3" class="d">-    private fun register(featureClass: KClass&lt;out Feature&gt;) {
</a><a href="#h11-1-4" id="h11-1-4" class="d">-        runCatching {
</a><a href="#h11-1-5" id="h11-1-5" class="d">-            with(featureClass.java.newInstance()) {
</a><a href="#h11-1-6" id="h11-1-6" class="d">-                context = this@FeatureManager.context
</a><a href="#h11-1-7" id="h11-1-7" class="d">-                features.add(this)
</a><a href="#h11-1-8" id="h11-1-8" class="i">+    private fun register(vararg featureClasses: KClass&lt;out Feature&gt;) {
</a><a href="#h11-1-9" id="h11-1-9" class="i">+        featureClasses.forEach { clazz -&gt;
</a><a href="#h11-1-10" id="h11-1-10" class="i">+            runCatching {
</a><a href="#h11-1-11" id="h11-1-11" class="i">+                clazz.constructors.first().call().also { feature -&gt;
</a><a href="#h11-1-12" id="h11-1-12" class="i">+                    feature.context = context
</a><a href="#h11-1-13" id="h11-1-13" class="i">+                    features.add(feature)
</a><a href="#h11-1-14" id="h11-1-14" class="i">+                }
</a><a href="#h11-1-15" id="h11-1-15" class="i">+            }.onFailure {
</a><a href="#h11-1-16" id="h11-1-16" class="i">+                Logger.xposedLog(&quot;Failed to register feature ${clazz.simpleName}&quot;, it)
</a>             }
<a href="#h11-1-18" id="h11-1-18" class="d">-        }.onFailure {
</a><a href="#h11-1-19" id="h11-1-19" class="d">-            Logger.xposedLog(&quot;Failed to register feature ${featureClass.simpleName}&quot;, it)
</a>         }
     }
 
<a href="#h11-2" id="h11-2" class="h">@@ -63,40 +48,43 @@ class FeatureManager(private val context: ModContext) : Manager {
</a>     }
 
     override fun init() {
<a href="#h11-2-3" id="h11-2-3" class="d">-        register(Messaging::class)
</a><a href="#h11-2-4" id="h11-2-4" class="d">-        register(MediaDownloader::class)
</a><a href="#h11-2-5" id="h11-2-5" class="d">-        register(StealthMode::class)
</a><a href="#h11-2-6" id="h11-2-6" class="d">-        register(MenuViewInjector::class)
</a><a href="#h11-2-7" id="h11-2-7" class="d">-        register(PreventReadReceipts::class)
</a><a href="#h11-2-8" id="h11-2-8" class="d">-        register(AnonymousStoryViewing::class)
</a><a href="#h11-2-9" id="h11-2-9" class="d">-        register(MessageLogger::class)
</a><a href="#h11-2-10" id="h11-2-10" class="d">-        register(SnapchatPlus::class)
</a><a href="#h11-2-11" id="h11-2-11" class="d">-        register(DisableMetrics::class)
</a><a href="#h11-2-12" id="h11-2-12" class="d">-        register(PreventMessageSending::class)
</a><a href="#h11-2-13" id="h11-2-13" class="d">-        register(Notifications::class)
</a><a href="#h11-2-14" id="h11-2-14" class="d">-        register(AutoSave::class)
</a><a href="#h11-2-15" id="h11-2-15" class="d">-        register(UITweaks::class)
</a><a href="#h11-2-16" id="h11-2-16" class="d">-        register(ConfigurationOverride::class)
</a><a href="#h11-2-17" id="h11-2-17" class="d">-        register(SendOverride::class)
</a><a href="#h11-2-18" id="h11-2-18" class="d">-        register(UnlimitedSnapViewTime::class)
</a><a href="#h11-2-19" id="h11-2-19" class="d">-        register(DisableVideoLengthRestriction::class)
</a><a href="#h11-2-20" id="h11-2-20" class="d">-        register(MediaQualityLevelOverride::class)
</a><a href="#h11-2-21" id="h11-2-21" class="d">-        register(MeoPasscodeBypass::class)
</a><a href="#h11-2-22" id="h11-2-22" class="d">-        register(AppPasscode::class)
</a><a href="#h11-2-23" id="h11-2-23" class="d">-        register(LocationSpoofer::class)
</a><a href="#h11-2-24" id="h11-2-24" class="d">-        register(CameraTweaks::class)
</a><a href="#h11-2-25" id="h11-2-25" class="d">-        register(InfiniteStoryBoost::class)
</a><a href="#h11-2-26" id="h11-2-26" class="d">-        register(AmoledDarkMode::class)
</a><a href="#h11-2-27" id="h11-2-27" class="d">-        register(PinConversations::class)
</a><a href="#h11-2-28" id="h11-2-28" class="d">-        register(UnlimitedMultiSnap::class)
</a><a href="#h11-2-29" id="h11-2-29" class="d">-        register(DeviceSpooferHook::class)
</a><a href="#h11-2-30" id="h11-2-30" class="d">-        register(ClientBootstrapOverride::class)
</a><a href="#h11-2-31" id="h11-2-31" class="d">-        register(GooglePlayServicesDialogs::class)
</a><a href="#h11-2-32" id="h11-2-32" class="d">-        register(NoFriendScoreDelay::class)
</a><a href="#h11-2-33" id="h11-2-33" class="d">-        register(ProfilePictureDownloader::class)
</a><a href="#h11-2-34" id="h11-2-34" class="d">-        register(AddFriendSourceSpoof::class)
</a><a href="#h11-2-35" id="h11-2-35" class="d">-        register(DisableReplayInFF::class)
</a><a href="#h11-2-36" id="h11-2-36" class="d">-        register(OldBitmojiSelfie::class)
</a><a href="#h11-2-37" id="h11-2-37" class="i">+        register(
</a><a href="#h11-2-38" id="h11-2-38" class="i">+            ScopeSync::class,
</a><a href="#h11-2-39" id="h11-2-39" class="i">+            Messaging::class,
</a><a href="#h11-2-40" id="h11-2-40" class="i">+            MediaDownloader::class,
</a><a href="#h11-2-41" id="h11-2-41" class="i">+            StealthMode::class,
</a><a href="#h11-2-42" id="h11-2-42" class="i">+            MenuViewInjector::class,
</a><a href="#h11-2-43" id="h11-2-43" class="i">+            PreventReadReceipts::class,
</a><a href="#h11-2-44" id="h11-2-44" class="i">+            AnonymousStoryViewing::class,
</a><a href="#h11-2-45" id="h11-2-45" class="i">+            MessageLogger::class,
</a><a href="#h11-2-46" id="h11-2-46" class="i">+            SnapchatPlus::class,
</a><a href="#h11-2-47" id="h11-2-47" class="i">+            DisableMetrics::class,
</a><a href="#h11-2-48" id="h11-2-48" class="i">+            PreventMessageSending::class,
</a><a href="#h11-2-49" id="h11-2-49" class="i">+            Notifications::class,
</a><a href="#h11-2-50" id="h11-2-50" class="i">+            AutoSave::class,
</a><a href="#h11-2-51" id="h11-2-51" class="i">+            UITweaks::class,
</a><a href="#h11-2-52" id="h11-2-52" class="i">+            ConfigurationOverride::class,
</a><a href="#h11-2-53" id="h11-2-53" class="i">+            SendOverride::class,
</a><a href="#h11-2-54" id="h11-2-54" class="i">+            UnlimitedSnapViewTime::class,
</a><a href="#h11-2-55" id="h11-2-55" class="i">+            DisableVideoLengthRestriction::class,
</a><a href="#h11-2-56" id="h11-2-56" class="i">+            MediaQualityLevelOverride::class,
</a><a href="#h11-2-57" id="h11-2-57" class="i">+            MeoPasscodeBypass::class,
</a><a href="#h11-2-58" id="h11-2-58" class="i">+            AppPasscode::class,
</a><a href="#h11-2-59" id="h11-2-59" class="i">+            LocationSpoofer::class,
</a><a href="#h11-2-60" id="h11-2-60" class="i">+            CameraTweaks::class,
</a><a href="#h11-2-61" id="h11-2-61" class="i">+            InfiniteStoryBoost::class,
</a><a href="#h11-2-62" id="h11-2-62" class="i">+            AmoledDarkMode::class,
</a><a href="#h11-2-63" id="h11-2-63" class="i">+            PinConversations::class,
</a><a href="#h11-2-64" id="h11-2-64" class="i">+            UnlimitedMultiSnap::class,
</a><a href="#h11-2-65" id="h11-2-65" class="i">+            DeviceSpooferHook::class,
</a><a href="#h11-2-66" id="h11-2-66" class="i">+            ClientBootstrapOverride::class,
</a><a href="#h11-2-67" id="h11-2-67" class="i">+            GooglePlayServicesDialogs::class,
</a><a href="#h11-2-68" id="h11-2-68" class="i">+            NoFriendScoreDelay::class,
</a><a href="#h11-2-69" id="h11-2-69" class="i">+            ProfilePictureDownloader::class,
</a><a href="#h11-2-70" id="h11-2-70" class="i">+            AddFriendSourceSpoof::class,
</a><a href="#h11-2-71" id="h11-2-71" class="i">+            DisableReplayInFF::class,
</a><a href="#h11-2-72" id="h11-2-72" class="i">+            OldBitmojiSelfie::class,
</a><a href="#h11-2-73" id="h11-2-73" class="i">+        )
</a> 
         initializeFeatures()
     }
</pre>
</div>
</body>
</html>
