<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>feat(config): require native hooks notice - SnapEnhance - An Xposed module offering an enhanced Snapchat experience
</title>
<link rel="icon" type="image/svg+xml" href="../../logo.png"/>
<link rel="alternate icon" href="../../favicon.png"/>
<link rel="alternate" type="application/atom+xml" title="SnapEnhance Atom Feed" href="../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="SnapEnhance Atom Feed (tags)" href="../tags.xml" />
<link rel="stylesheet" type="text/css" href="../../style.css" />
<link rel="stylesheet" type="text/css" href="../../fonts.css" />
</head>
<body>
<div id="head"><table><tr><td><a class="logo" href="../../"><img src="../../logo.png" alt="" width="32" height="32" /></a></td><td><strong>SnapEnhance</strong><span class="desc"> - An Xposed module offering an enhanced Snapchat experience
</span>
</td></tr></table>
<p><a href="../about.html">About</a> | <a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/.gitmodules.html">Submodules</a> | <a href="../file/LICENSE.html">License</a></p>
</div>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/a01c2b09ca9c344d8e95e92a0734c9cf544eb28d.html">a01c2b09ca9c344d8e95e92a0734c9cf544eb28d</a>
<b>parent</b> <a href="../commit/9d7556eafdbec30798e4cb74b7ed12d3ddb18c20.html">9d7556eafdbec30798e4cb74b7ed12d3ddb18c20</a>
<b>Author:</b> rhunk &lt;<a href="mailto:101876869+rhunk@users.noreply.github.com">101876869+rhunk@users.noreply.github.com</a>&gt;
<b>Date:</b>   Wed, 11 Oct 2023 23:40:41 +0200

feat(config): require native hooks notice

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt</a></td><td> | </td><td class="num">3</td><td><span class="i">++</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">common/src/main/assets/lang/en_US.json</a></td><td> | </td><td class="num">3</td><td><span class="i">++</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h2">common/src/main/kotlin/me/rhunk/snapenhance/common/config/ConfigObjects.kt</a></td><td> | </td><td class="num">7</td><td><span class="i">++++++</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h3">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Experimental.kt</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h4">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Global.kt</a></td><td> | </td><td class="num">4</td><td><span class="i">++</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h5">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/MessagingTweaks.kt</a></td><td> | </td><td class="num">3</td><td><span class="i">++</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h6">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/RootConfig.kt</a></td><td> | </td><td class="num">5</td><td><span class="i">++</span><span class="d">---</span></td></tr>
</table></pre><pre>7 files changed, 17 insertions(+), 10 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -293,7 +293,8 @@ class FeaturesSection : Section() {
</a>         val noticeColorMap = mapOf(
             FeatureNotice.UNSTABLE.key to Color(0xFFFFFB87),
             FeatureNotice.BAN_RISK.key to Color(0xFFFF8585),
<a href="#h0-0-3" id="h0-0-3" class="d">-            FeatureNotice.INTERNAL_BEHAVIOR.key to Color(0xFFFFFB87)
</a><a href="#h0-0-4" id="h0-0-4" class="i">+            FeatureNotice.INTERNAL_BEHAVIOR.key to Color(0xFFFFFB87),
</a><a href="#h0-0-5" id="h0-0-5" class="i">+            FeatureNotice.REQUIRE_NATIVE_HOOKS.key to Color(0xFFFF5722),
</a>         )
 
         Card(
<b>diff --git a/<a id="h1" href="../file/common/src/main/assets/lang/en_US.json.html">common/src/main/assets/lang/en_US.json</a> b/<a href="../file/common/src/main/assets/lang/en_US.json.html">common/src/main/assets/lang/en_US.json</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -121,7 +121,8 @@
</a>         &quot;notices&quot;: {
             &quot;unstable&quot;: &quot;\u26A0 Unstable&quot;,
             &quot;ban_risk&quot;: &quot;\u26A0 This feature may cause bans&quot;,
<a href="#h1-0-3" id="h1-0-3" class="d">-            &quot;internal_behavior&quot;: &quot;\u26A0 This may break Snapchat internal behavior&quot;
</a><a href="#h1-0-4" id="h1-0-4" class="i">+            &quot;internal_behavior&quot;: &quot;\u26A0 This may break Snapchat internal behavior&quot;,
</a><a href="#h1-0-5" id="h1-0-5" class="i">+            &quot;require_native_hooks&quot;: &quot;\u26A0 This feature requires experimental Native Hooks to work correctly&quot;
</a>         },
         &quot;properties&quot;: {
             &quot;downloader&quot;: {
<b>diff --git a/<a id="h2" href="../file/common/src/main/kotlin/me/rhunk/snapenhance/common/config/ConfigObjects.kt.html">common/src/main/kotlin/me/rhunk/snapenhance/common/config/ConfigObjects.kt</a> b/<a href="../file/common/src/main/kotlin/me/rhunk/snapenhance/common/config/ConfigObjects.kt.html">common/src/main/kotlin/me/rhunk/snapenhance/common/config/ConfigObjects.kt</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -16,7 +16,8 @@ enum class FeatureNotice(
</a> ) {
     UNSTABLE(0b0001, &quot;unstable&quot;),
     BAN_RISK(0b0010, &quot;ban_risk&quot;),
<a href="#h2-0-3" id="h2-0-3" class="d">-    INTERNAL_BEHAVIOR(0b0100, &quot;internal_behavior&quot;)
</a><a href="#h2-0-4" id="h2-0-4" class="i">+    INTERNAL_BEHAVIOR(0b0100, &quot;internal_behavior&quot;),
</a><a href="#h2-0-5" id="h2-0-5" class="i">+    REQUIRE_NATIVE_HOOKS(0b1000, &quot;require_native_hooks&quot;),
</a> }
 
 enum class ConfigFlag(
<a href="#h2-1" id="h2-1" class="h">@@ -50,6 +51,10 @@ class ConfigParams(
</a>         this._flags = (this._flags ?: 0) or values.fold(0) { acc, flag -&gt; acc or flag.id }
     }
 
<a href="#h2-1-3" id="h2-1-3" class="i">+    fun nativeHooks() {
</a><a href="#h2-1-4" id="h2-1-4" class="i">+        addNotices(FeatureNotice.REQUIRE_NATIVE_HOOKS)
</a><a href="#h2-1-5" id="h2-1-5" class="i">+    }
</a><a href="#h2-1-6" id="h2-1-6" class="i">+
</a>     fun requireRestart() {
         addFlags(ConfigFlag.REQUIRE_RESTART)
     }
<b>diff --git a/<a id="h3" href="../file/common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Experimental.kt.html">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Experimental.kt</a> b/<a href="../file/common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Experimental.kt.html">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Experimental.kt</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -18,7 +18,7 @@ class Experimental : ConfigContainer() {
</a>     val meoPasscodeBypass = boolean(&quot;meo_passcode_bypass&quot;)
     val unlimitedMultiSnap = boolean(&quot;unlimited_multi_snap&quot;) { addNotices(FeatureNotice.BAN_RISK)}
     val noFriendScoreDelay = boolean(&quot;no_friend_score_delay&quot;) { requireRestart()}
<a href="#h3-0-3" id="h3-0-3" class="d">-    val e2eEncryption = container(&quot;e2ee&quot;, E2EEConfig()) { requireRestart()}
</a><a href="#h3-0-4" id="h3-0-4" class="i">+    val e2eEncryption = container(&quot;e2ee&quot;, E2EEConfig()) { requireRestart(); nativeHooks() }
</a>     val hiddenSnapchatPlusFeatures = boolean(&quot;hidden_snapchat_plus_features&quot;) {
         addNotices(FeatureNotice.BAN_RISK, FeatureNotice.UNSTABLE)
         requireRestart()
<b>diff --git a/<a id="h4" href="../file/common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Global.kt.html">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Global.kt</a> b/<a href="../file/common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Global.kt.html">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Global.kt</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -8,11 +8,11 @@ class Global : ConfigContainer() {
</a>         val coordinates = mapCoordinates(&quot;coordinates&quot;, 0.0 to 0.0) { requireRestart()} // lat, long
     }
     val spoofLocation = container(&quot;spoofLocation&quot;, SpoofLocation())
<a href="#h4-0-3" id="h4-0-3" class="d">-    val snapchatPlus = boolean(&quot;snapchat_plus&quot;) { addNotices(FeatureNotice.BAN_RISK); requireRestart() }
</a><a href="#h4-0-4" id="h4-0-4" class="i">+    val snapchatPlus = boolean(&quot;snapchat_plus&quot;) { requireRestart() }
</a>     val disableMetrics = boolean(&quot;disable_metrics&quot;)
     val blockAds = boolean(&quot;block_ads&quot;)
     val bypassVideoLengthRestriction = unique(&quot;bypass_video_length_restriction&quot;, &quot;split&quot;, &quot;single&quot;) { addNotices(
<a href="#h4-0-8" id="h4-0-8" class="d">-        FeatureNotice.BAN_RISK); requireRestart() }
</a><a href="#h4-0-9" id="h4-0-9" class="i">+        FeatureNotice.BAN_RISK); requireRestart(); nativeHooks() }
</a>     val disableGooglePlayDialogs = boolean(&quot;disable_google_play_dialogs&quot;) { requireRestart() }
     val forceMediaSourceQuality = boolean(&quot;force_media_source_quality&quot;)
     val disableSnapSplitting = boolean(&quot;disable_snap_splitting&quot;) { addNotices(FeatureNotice.INTERNAL_BEHAVIOR) }
<b>diff --git a/<a id="h5" href="../file/common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/MessagingTweaks.kt.html">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/MessagingTweaks.kt</a> b/<a href="../file/common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/MessagingTweaks.kt.html">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/MessagingTweaks.kt</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -19,12 +19,13 @@ class MessagingTweaks : ConfigContainer() {
</a>     ) { requireRestart() }
     val preventMessageSending = multiple(&quot;prevent_message_sending&quot;, *NotificationType.getOutgoingValues().map { it.key }.toTypedArray()) {
         customOptionTranslationPath = &quot;features.options.notifications&quot;
<a href="#h5-0-3" id="h5-0-3" class="i">+        nativeHooks()
</a>     }
     val betterNotifications = multiple(&quot;better_notifications&quot;, &quot;snap&quot;, &quot;chat&quot;, &quot;reply_button&quot;, &quot;download_button&quot;, &quot;group&quot;) { requireRestart() }
     val notificationBlacklist = multiple(&quot;notification_blacklist&quot;, *NotificationType.getIncomingValues().map { it.key }.toTypedArray()) {
         customOptionTranslationPath = &quot;features.options.notifications&quot;
     }
     val messageLogger = boolean(&quot;message_logger&quot;) { addNotices(FeatureNotice.UNSTABLE); requireRestart() }
<a href="#h5-0-10" id="h5-0-10" class="d">-    val galleryMediaSendOverride = boolean(&quot;gallery_media_send_override&quot;)
</a><a href="#h5-0-11" id="h5-0-11" class="i">+    val galleryMediaSendOverride = boolean(&quot;gallery_media_send_override&quot;) { nativeHooks() }
</a>     val messagePreviewLength = integer(&quot;message_preview_length&quot;, defaultValue = 20)
 } 
\ No newline at end of file
<b>diff --git a/<a id="h6" href="../file/common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/RootConfig.kt.html">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/RootConfig.kt</a> b/<a href="../file/common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/RootConfig.kt.html">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/RootConfig.kt</a></b>
<a href="#h6-0" id="h6-0" class="h">@@ -11,8 +11,7 @@ class RootConfig : ConfigContainer() {
</a>     val rules = container(&quot;rules&quot;, Rules()) { icon = &quot;Rule&quot; }
     val camera = container(&quot;camera&quot;, Camera()) { icon = &quot;Camera&quot;; requireRestart() }
     val streaksReminder = container(&quot;streaks_reminder&quot;, StreaksReminderConfig()) { icon = &quot;Alarm&quot; }
<a href="#h6-0-3" id="h6-0-3" class="d">-    val experimental = container(&quot;experimental&quot;, Experimental()) {
</a><a href="#h6-0-4" id="h6-0-4" class="d">-        icon = &quot;Science&quot;; addNotices(FeatureNotice.UNSTABLE)
</a><a href="#h6-0-5" id="h6-0-5" class="d">-    }
</a><a href="#h6-0-6" id="h6-0-6" class="i">+    val experimental = container(&quot;experimental&quot;, Experimental()) { icon = &quot;Science&quot;; addNotices(
</a><a href="#h6-0-7" id="h6-0-7" class="i">+        FeatureNotice.UNSTABLE) }
</a>     val scripting = container(&quot;scripting&quot;, Scripting()) { icon = &quot;DataObject&quot; }
 } 
\ No newline at end of file
</pre>
</div>
</body>
</html>
