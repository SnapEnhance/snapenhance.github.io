<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>feat(manager): snapchat patch section (wip) - SnapEnhance - An Xposed module offering an enhanced Snapchat experience
</title>
<link rel="icon" type="image/svg+xml" href="../../logo.png"/>
<link rel="alternate icon" href="../../favicon.png"/>
<link rel="alternate" type="application/atom+xml" title="SnapEnhance Atom Feed" href="../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="SnapEnhance Atom Feed (tags)" href="../tags.xml" />
<link rel="stylesheet" type="text/css" href="../../style.css" />
<link rel="stylesheet" type="text/css" href="../../fonts.css" />
</head>
<body>
<div id="head"><table><tr><td><a class="logo" href="../../"><img src="../../logo.png" alt="" width="32" height="32" /></a></td><td><strong>SnapEnhance</strong><span class="desc"> - An Xposed module offering an enhanced Snapchat experience
</span>
</td></tr></table>
<p><a href="../about.html">About</a> | <a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/.gitmodules.html">Submodules</a> | <a href="../file/LICENSE.html">License</a></p>
</div>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/1a488425b2e11163acc606ca1c054a7834749ad6.html">1a488425b2e11163acc606ca1c054a7834749ad6</a>
<b>parent</b> <a href="../commit/45f4c65ab336ccb78f55bdc9b5856e722f7d4e10.html">45f4c65ab336ccb78f55bdc9b5856e722f7d4e10</a>
<b>Author:</b> rhunk &lt;<a href="mailto:101876869+rhunk@users.noreply.github.com">101876869+rhunk@users.noreply.github.com</a>&gt;
<b>Date:</b>   Mon, 30 Oct 2023 00:13:56 +0100

feat(manager): snapchat patch section (wip)

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">gradle/libs.versions.toml</a></td><td> | </td><td class="num">2</td><td><span class="i">++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">manager/build.gradle.kts</a></td><td> | </td><td class="num">1</td><td><span class="i">+</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h2">manager/src/main/AndroidManifest.xml</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td class="A">A</td><td><a href="#h3">manager/src/main/kotlin/me/rhunk/snapenhance/manager/data/APKMirror.kt</a></td><td> | </td><td class="num">77</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h4">manager/src/main/kotlin/me/rhunk/snapenhance/manager/lspatch/LSPatch.kt</a></td><td> | </td><td class="num">71</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">----------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h5">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/Navigation.kt</a></td><td> | </td><td class="num">22</td><td><span class="i">+++++++++++++++</span><span class="d">-------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h6">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/Tab.kt</a></td><td> | </td><td class="num">7</td><td><span class="i">+++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h7">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/components/Dialogs.kt</a></td><td> | </td><td class="num">38</td><td><span class="i">++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h8">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/tab/HomeTab.kt</a></td><td> | </td><td class="num">4</td><td><span class="i">+++</span><span class="d">-</span></td></tr>
<tr><td class="A">A</td><td><a href="#h9">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/tab/download/SnapchatPatchTab.kt</a></td><td> | </td><td class="num">253</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h10">manager/src/main/res/drawable/sclogo.xml</a></td><td> | </td><td class="num">15</td><td><span class="i">+++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h11">manager/src/main/res/values/themes.xml</a></td><td> | </td><td class="num">9</td><td><span class="i">+++++++++</span><span class="d"></span></td></tr>
</table></pre><pre>12 files changed, 476 insertions(+), 25 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/gradle/libs.versions.toml.html">gradle/libs.versions.toml</a> b/<a href="../file/gradle/libs.versions.toml.html">gradle/libs.versions.toml</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -2,6 +2,7 @@
</a> agp = &quot;8.1.2&quot;
 apksig = &quot;8.0.2&quot;
 guava = &quot;32.1.3-jre&quot;
<a href="#h0-0-3" id="h0-0-3" class="i">+jsoup = &quot;1.16.2&quot;
</a> kotlin = &quot;1.9.0&quot;
 kotlinx-coroutines-android = &quot;1.7.3&quot;
 
<a href="#h0-1" id="h0-1" class="h">@@ -44,6 +45,7 @@ dexlib2 = { group = &quot;org.smali&quot;, name = &quot;dexlib2&quot;, version.ref = &quot;dexlib2&quot; }
</a> ffmpeg-kit = { group = &quot;com.arthenica&quot;, name = &quot;ffmpeg-kit-full-gpl&quot;, version.ref = &quot;ffmpeg-kit&quot; }
 gson = { group = &quot;com.google.code.gson&quot;, name = &quot;gson&quot;, version.ref = &quot;gson&quot; }
 guava = { module = &quot;com.google.guava:guava&quot;, version.ref = &quot;guava&quot; }
<a href="#h0-1-3" id="h0-1-3" class="i">+jsoup = { module = &quot;org.jsoup:jsoup&quot;, version.ref = &quot;jsoup&quot; }
</a> junit = { module = &quot;junit:junit&quot;, version.ref = &quot;junit&quot; }
 okhttp = { group = &quot;com.squareup.okhttp3&quot;, name = &quot;okhttp&quot;, version.ref = &quot;okhttp&quot; }
 osmdroid-android = { group = &quot;org.osmdroid&quot;, name = &quot;osmdroid-android&quot;, version.ref = &quot;osmdroid-android&quot; }
<b>diff --git a/<a id="h1" href="../file/manager/build.gradle.kts.html">manager/build.gradle.kts</a> b/<a href="../file/manager/build.gradle.kts.html">manager/build.gradle.kts</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -75,6 +75,7 @@ dependencies {
</a>     implementation(libs.guava)
     implementation(libs.apksig)
     implementation(libs.gson)
<a href="#h1-0-3" id="h1-0-3" class="i">+    implementation(libs.jsoup)
</a>     implementation(libs.okhttp)
     implementation(libs.androidx.material3)
     implementation(libs.androidx.activity.ktx)
<b>diff --git a/<a id="h2" href="../file/manager/src/main/AndroidManifest.xml.html">manager/src/main/AndroidManifest.xml</a> b/<a href="../file/manager/src/main/AndroidManifest.xml.html">manager/src/main/AndroidManifest.xml</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -13,7 +13,7 @@
</a>         tools:targetApi=&quot;34&quot;
         android:enableOnBackInvokedCallback=&quot;true&quot;
         android:icon=&quot;@android:drawable/ic_input_add&quot;&gt;
<a href="#h2-0-3" id="h2-0-3" class="d">-        &lt;activity android:name=&quot;.ui.MainActivity&quot; android:exported=&quot;true&quot;&gt;
</a><a href="#h2-0-4" id="h2-0-4" class="i">+        &lt;activity android:name=&quot;.ui.MainActivity&quot; android:exported=&quot;true&quot; android:theme=&quot;@style/AppTheme&quot;&gt;
</a>             &lt;intent-filter&gt;
                 &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
                 &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
<b>diff --git a/<a id="h3" href="../file/manager/src/main/kotlin/me/rhunk/snapenhance/manager/data/APKMirror.kt.html">manager/src/main/kotlin/me/rhunk/snapenhance/manager/data/APKMirror.kt</a> b/<a href="../file/manager/src/main/kotlin/me/rhunk/snapenhance/manager/data/APKMirror.kt.html">manager/src/main/kotlin/me/rhunk/snapenhance/manager/data/APKMirror.kt</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -0,0 +1,76 @@
</a><a href="#h3-0-0" id="h3-0-0" class="i">+package me.rhunk.snapenhance.manager.data
</a><a href="#h3-0-1" id="h3-0-1" class="i">+
</a><a href="#h3-0-2" id="h3-0-2" class="i">+import okhttp3.OkHttpClient
</a><a href="#h3-0-3" id="h3-0-3" class="i">+import okhttp3.Request
</a><a href="#h3-0-4" id="h3-0-4" class="i">+import org.jsoup.Jsoup
</a><a href="#h3-0-5" id="h3-0-5" class="i">+import kotlin.math.absoluteValue
</a><a href="#h3-0-6" id="h3-0-6" class="i">+
</a><a href="#h3-0-7" id="h3-0-7" class="i">+data class DownloadItem(
</a><a href="#h3-0-8" id="h3-0-8" class="i">+    val title: String,
</a><a href="#h3-0-9" id="h3-0-9" class="i">+    val releaseDate: String,
</a><a href="#h3-0-10" id="h3-0-10" class="i">+    val downloadPage: String
</a><a href="#h3-0-11" id="h3-0-11" class="i">+) {
</a><a href="#h3-0-12" id="h3-0-12" class="i">+    val shortTitle = title.substringBefore(&quot;(&quot;).trim()
</a><a href="#h3-0-13" id="h3-0-13" class="i">+    val hash = (title + releaseDate + downloadPage).hashCode().absoluteValue.toString(16)
</a><a href="#h3-0-14" id="h3-0-14" class="i">+    val isBeta = title.contains(&quot;Beta&quot;, ignoreCase = true)
</a><a href="#h3-0-15" id="h3-0-15" class="i">+}
</a><a href="#h3-0-16" id="h3-0-16" class="i">+
</a><a href="#h3-0-17" id="h3-0-17" class="i">+class APKMirror {
</a><a href="#h3-0-18" id="h3-0-18" class="i">+    val okhttpClient = OkHttpClient.Builder().addInterceptor {
</a><a href="#h3-0-19" id="h3-0-19" class="i">+        it.proceed(
</a><a href="#h3-0-20" id="h3-0-20" class="i">+            it.request().newBuilder()
</a><a href="#h3-0-21" id="h3-0-21" class="i">+                .addHeader(&quot;User-Agent&quot;, System.getProperty(&quot;http.agent&quot;)!!)
</a><a href="#h3-0-22" id="h3-0-22" class="i">+                .build()
</a><a href="#h3-0-23" id="h3-0-23" class="i">+        )
</a><a href="#h3-0-24" id="h3-0-24" class="i">+    }.build()
</a><a href="#h3-0-25" id="h3-0-25" class="i">+
</a><a href="#h3-0-26" id="h3-0-26" class="i">+    companion object {
</a><a href="#h3-0-27" id="h3-0-27" class="i">+        private const val BASE_URL = &quot;https://www.apkmirror.com&quot;
</a><a href="#h3-0-28" id="h3-0-28" class="i">+        private const val FETCH_BUILD_URL = &quot;$BASE_URL/apk/snap-inc/snapchat/variant-%7B%22arches_slug%22%3A%5B%22arm64-v8a%22%2C%22armeabi-v7a%22%5D%2C%22dpis_slug%22%3A%5B%22nodpi%22%5D%7D/page/{page}/&quot;
</a><a href="#h3-0-29" id="h3-0-29" class="i">+    }
</a><a href="#h3-0-30" id="h3-0-30" class="i">+
</a><a href="#h3-0-31" id="h3-0-31" class="i">+    fun fetchDownloadLink(downloadPageUri: String): String? {
</a><a href="#h3-0-32" id="h3-0-32" class="i">+        okhttpClient.newCall(
</a><a href="#h3-0-33" id="h3-0-33" class="i">+            Request.Builder()
</a><a href="#h3-0-34" id="h3-0-34" class="i">+                .url(&quot;$BASE_URL$downloadPageUri&quot;)
</a><a href="#h3-0-35" id="h3-0-35" class="i">+                .build()
</a><a href="#h3-0-36" id="h3-0-36" class="i">+        ).execute().use { response -&gt;
</a><a href="#h3-0-37" id="h3-0-37" class="i">+            if (!response.isSuccessful) return null
</a><a href="#h3-0-38" id="h3-0-38" class="i">+            val finalDownloadPageUri = Jsoup.parse(response.body.string()).getElementsByClass(&quot;downloadButton&quot;).first()?.attr(&quot;href&quot;)
</a><a href="#h3-0-39" id="h3-0-39" class="i">+
</a><a href="#h3-0-40" id="h3-0-40" class="i">+            okhttpClient.newCall(
</a><a href="#h3-0-41" id="h3-0-41" class="i">+                Request.Builder()
</a><a href="#h3-0-42" id="h3-0-42" class="i">+                    .url(&quot;$BASE_URL$finalDownloadPageUri&quot;)
</a><a href="#h3-0-43" id="h3-0-43" class="i">+                    .build()
</a><a href="#h3-0-44" id="h3-0-44" class="i">+            ).execute().use { response2 -&gt;
</a><a href="#h3-0-45" id="h3-0-45" class="i">+                if (!response2.isSuccessful) return null
</a><a href="#h3-0-46" id="h3-0-46" class="i">+                val document = Jsoup.parse(response2.body.string())
</a><a href="#h3-0-47" id="h3-0-47" class="i">+                val downloadForm = document.getElementById(&quot;filedownload&quot;) ?: return null
</a><a href="#h3-0-48" id="h3-0-48" class="i">+                val arguments = downloadForm.childNodes().mapNotNull {
</a><a href="#h3-0-49" id="h3-0-49" class="i">+                    (it.attr(&quot;name&quot;) to it.attr(&quot;value&quot;)).takeIf { pair -&gt; pair.second.isNotEmpty() }
</a><a href="#h3-0-50" id="h3-0-50" class="i">+                }
</a><a href="#h3-0-51" id="h3-0-51" class="i">+                return BASE_URL + downloadForm.attr(&quot;action&quot;) + &quot;?&quot; + arguments.joinToString(&quot;&amp;&quot;) { &quot;${it.first}=${it.second}&quot; }
</a><a href="#h3-0-52" id="h3-0-52" class="i">+            }
</a><a href="#h3-0-53" id="h3-0-53" class="i">+        }
</a><a href="#h3-0-54" id="h3-0-54" class="i">+    }
</a><a href="#h3-0-55" id="h3-0-55" class="i">+
</a><a href="#h3-0-56" id="h3-0-56" class="i">+    fun fetchSnapchatVersions(page: Int = 1): List&lt;DownloadItem&gt;? {
</a><a href="#h3-0-57" id="h3-0-57" class="i">+        val versions = mutableListOf&lt;DownloadItem&gt;()
</a><a href="#h3-0-58" id="h3-0-58" class="i">+        okhttpClient.newCall(
</a><a href="#h3-0-59" id="h3-0-59" class="i">+            Request.Builder()
</a><a href="#h3-0-60" id="h3-0-60" class="i">+                .url(FETCH_BUILD_URL.replace(&quot;{page}&quot;, page.toString()))
</a><a href="#h3-0-61" id="h3-0-61" class="i">+                .build()
</a><a href="#h3-0-62" id="h3-0-62" class="i">+        ).execute().use { response -&gt;
</a><a href="#h3-0-63" id="h3-0-63" class="i">+            if (!response.isSuccessful) return null
</a><a href="#h3-0-64" id="h3-0-64" class="i">+            val document = Jsoup.parse(response.body.string())
</a><a href="#h3-0-65" id="h3-0-65" class="i">+            document.getElementById(&quot;primary&quot;)?.getElementsByClass(&quot;appRow&quot;)?.forEach { app -&gt;
</a><a href="#h3-0-66" id="h3-0-66" class="i">+                val title = app.getElementsByTag(&quot;h5&quot;).first()?.attr(&quot;title&quot;) ?: return@forEach
</a><a href="#h3-0-67" id="h3-0-67" class="i">+                val releaseDate = app.getElementsByClass(&quot;dateyear_utc&quot;).attr(&quot;data-utcdate&quot;) ?: return@forEach
</a><a href="#h3-0-68" id="h3-0-68" class="i">+                val downloadPage = app.getElementsByClass(&quot;downloadLink&quot;).first()?.attr(&quot;href&quot;) ?: return@forEach
</a><a href="#h3-0-69" id="h3-0-69" class="i">+
</a><a href="#h3-0-70" id="h3-0-70" class="i">+                versions.add(DownloadItem(title, releaseDate, downloadPage))
</a><a href="#h3-0-71" id="h3-0-71" class="i">+            }
</a><a href="#h3-0-72" id="h3-0-72" class="i">+        }
</a><a href="#h3-0-73" id="h3-0-73" class="i">+        return versions
</a><a href="#h3-0-74" id="h3-0-74" class="i">+    }
</a><a href="#h3-0-75" id="h3-0-75" class="i">+}</a><a href="#h3-0-76" id="h3-0-76" class="i">+
\ No newline at end of file
</a><b>diff --git a/<a id="h4" href="../file/manager/src/main/kotlin/me/rhunk/snapenhance/manager/lspatch/LSPatch.kt.html">manager/src/main/kotlin/me/rhunk/snapenhance/manager/lspatch/LSPatch.kt</a> b/<a href="../file/manager/src/main/kotlin/me/rhunk/snapenhance/manager/lspatch/LSPatch.kt.html">manager/src/main/kotlin/me/rhunk/snapenhance/manager/lspatch/LSPatch.kt</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -52,6 +52,44 @@ class LSPatch(
</a>         }.toByteArray()
     }
 
<a href="#h4-0-3" id="h4-0-3" class="i">+    private fun provideSigningExtension(): SigningExtension {
</a><a href="#h4-0-4" id="h4-0-4" class="i">+        val keyStore = KeyStore.getInstance(KeyStore.getDefaultType())
</a><a href="#h4-0-5" id="h4-0-5" class="i">+        keyStore.load(context.assets.open(&quot;lspatch/keystore.jks&quot;), &quot;android&quot;.toCharArray())
</a><a href="#h4-0-6" id="h4-0-6" class="i">+        val key = keyStore.getEntry(&quot;androiddebugkey&quot;, KeyStore.PasswordProtection(&quot;android&quot;.toCharArray())) as KeyStore.PrivateKeyEntry
</a><a href="#h4-0-7" id="h4-0-7" class="i">+        val certificates = key.certificateChain.mapNotNull { it as? X509Certificate }.toTypedArray()
</a><a href="#h4-0-8" id="h4-0-8" class="i">+
</a><a href="#h4-0-9" id="h4-0-9" class="i">+        return SigningExtension(
</a><a href="#h4-0-10" id="h4-0-10" class="i">+            SigningOptions.builder().apply {
</a><a href="#h4-0-11" id="h4-0-11" class="i">+                setMinSdkVersion(28)
</a><a href="#h4-0-12" id="h4-0-12" class="i">+                setV2SigningEnabled(true)
</a><a href="#h4-0-13" id="h4-0-13" class="i">+                setCertificates(*certificates)
</a><a href="#h4-0-14" id="h4-0-14" class="i">+                setKey(key.privateKey)
</a><a href="#h4-0-15" id="h4-0-15" class="i">+            }.build()
</a><a href="#h4-0-16" id="h4-0-16" class="i">+        )
</a><a href="#h4-0-17" id="h4-0-17" class="i">+    }
</a><a href="#h4-0-18" id="h4-0-18" class="i">+
</a><a href="#h4-0-19" id="h4-0-19" class="i">+    private fun resignApk(inputApkFile: File, outputFile: File) {
</a><a href="#h4-0-20" id="h4-0-20" class="i">+        printLog(&quot;Resigning ${inputApkFile.absolutePath} to ${outputFile.absolutePath}&quot;)
</a><a href="#h4-0-21" id="h4-0-21" class="i">+        val dstZFile = ZFile.openReadWrite(outputFile, Z_FILE_OPTIONS)
</a><a href="#h4-0-22" id="h4-0-22" class="i">+        val inZFile = ZFile.openReadOnly(inputApkFile)
</a><a href="#h4-0-23" id="h4-0-23" class="i">+
</a><a href="#h4-0-24" id="h4-0-24" class="i">+        inZFile.entries().forEach { entry -&gt;
</a><a href="#h4-0-25" id="h4-0-25" class="i">+            dstZFile.add(entry.centralDirectoryHeader.name, entry.open())
</a><a href="#h4-0-26" id="h4-0-26" class="i">+        }
</a><a href="#h4-0-27" id="h4-0-27" class="i">+
</a><a href="#h4-0-28" id="h4-0-28" class="i">+        // sign apk
</a><a href="#h4-0-29" id="h4-0-29" class="i">+        runCatching {
</a><a href="#h4-0-30" id="h4-0-30" class="i">+            provideSigningExtension().register(dstZFile)
</a><a href="#h4-0-31" id="h4-0-31" class="i">+        }.onFailure {
</a><a href="#h4-0-32" id="h4-0-32" class="i">+            throw Exception(&quot;Failed to sign apk&quot;, it)
</a><a href="#h4-0-33" id="h4-0-33" class="i">+        }
</a><a href="#h4-0-34" id="h4-0-34" class="i">+
</a><a href="#h4-0-35" id="h4-0-35" class="i">+        dstZFile.realign()
</a><a href="#h4-0-36" id="h4-0-36" class="i">+        dstZFile.close()
</a><a href="#h4-0-37" id="h4-0-37" class="i">+        inZFile.close()
</a><a href="#h4-0-38" id="h4-0-38" class="i">+        printLog(&quot;Done&quot;)
</a><a href="#h4-0-39" id="h4-0-39" class="i">+    }
</a><a href="#h4-0-40" id="h4-0-40" class="i">+
</a>     @Suppress(&quot;UNCHECKED_CAST&quot;)
     @OptIn(ExperimentalEncodingApi::class)
     private fun patchApk(inputApkFile: File, outputFile: File) {
<a href="#h4-1" id="h4-1" class="h">@@ -70,19 +108,7 @@ class LSPatch(
</a> 
         // sign apk
         runCatching {
<a href="#h4-1-3" id="h4-1-3" class="d">-            val keyStore = KeyStore.getInstance(KeyStore.getDefaultType())
</a><a href="#h4-1-4" id="h4-1-4" class="d">-            keyStore.load(context.assets.open(&quot;lspatch/keystore.jks&quot;), &quot;android&quot;.toCharArray())
</a><a href="#h4-1-5" id="h4-1-5" class="d">-            val key = keyStore.getEntry(&quot;androiddebugkey&quot;, KeyStore.PasswordProtection(&quot;android&quot;.toCharArray())) as KeyStore.PrivateKeyEntry
</a><a href="#h4-1-6" id="h4-1-6" class="d">-            SigningExtension(
</a><a href="#h4-1-7" id="h4-1-7" class="d">-                SigningOptions.builder().apply {
</a><a href="#h4-1-8" id="h4-1-8" class="d">-                    setMinSdkVersion(28)
</a><a href="#h4-1-9" id="h4-1-9" class="d">-                    setV2SigningEnabled(true)
</a><a href="#h4-1-10" id="h4-1-10" class="d">-                    setCertificates(*(key.certificateChain as Array&lt;X509Certificate&gt;))
</a><a href="#h4-1-11" id="h4-1-11" class="d">-                    setKey(key.privateKey)
</a><a href="#h4-1-12" id="h4-1-12" class="d">-                }.build()
</a><a href="#h4-1-13" id="h4-1-13" class="d">-            ).apply {
</a><a href="#h4-1-14" id="h4-1-14" class="d">-                register(dstZFile)
</a><a href="#h4-1-15" id="h4-1-15" class="d">-            }
</a><a href="#h4-1-16" id="h4-1-16" class="i">+            provideSigningExtension().register(dstZFile)
</a>         }.onFailure {
             throw Exception(&quot;Failed to sign apk&quot;, it)
         }
<a href="#h4-2" id="h4-2" class="h">@@ -99,7 +125,6 @@ class LSPatch(
</a>         printLog(&quot;Adding config&quot;)
         dstZFile.add(&quot;assets/lspatch/config.json&quot;, ByteArrayInputStream(patchConfig.toByteArray()))
 
<a href="#h4-2-3" id="h4-2-3" class="d">-
</a>         // add loader dex
         printLog(&quot;Adding dex files&quot;)
         dstZFile.add(&quot;classes.dex&quot;, context.assets.open(&quot;lspatch/dexes/metaloader.dex&quot;))
<a href="#h4-3" id="h4-3" class="h">@@ -117,7 +142,6 @@ class LSPatch(
</a>             dstZFile.add(&quot;assets/lspatch/modules/$packageName.apk&quot;, module.inputStream())
         }
 
<a href="#h4-3-3" id="h4-3-3" class="d">-
</a>         // link apk entries
         printLog(&quot;Linking apk entries&quot;)
 
<a href="#h4-4" id="h4-4" class="h">@@ -138,7 +162,22 @@ class LSPatch(
</a>         printLog(&quot;Done&quot;)
     }
 
<a href="#h4-4-3" id="h4-4-3" class="d">-    fun patch(input: File, outputFile: File) {
</a><a href="#h4-4-4" id="h4-4-4" class="i">+    fun patchSplits(inputs: List&lt;File&gt;): List&lt;File&gt; {
</a><a href="#h4-4-5" id="h4-4-5" class="i">+        val outputs = mutableListOf&lt;File&gt;()
</a><a href="#h4-4-6" id="h4-4-6" class="i">+        inputs.forEach { input -&gt;
</a><a href="#h4-4-7" id="h4-4-7" class="i">+            val outputFile = File.createTempFile(&quot;patched&quot;, &quot;.apk&quot;, context.cacheDir)
</a><a href="#h4-4-8" id="h4-4-8" class="i">+            if (input.name.contains(&quot;split&quot;)) {
</a><a href="#h4-4-9" id="h4-4-9" class="i">+                resignApk(input, outputFile)
</a><a href="#h4-4-10" id="h4-4-10" class="i">+                outputs.add(outputFile)
</a><a href="#h4-4-11" id="h4-4-11" class="i">+                return@forEach
</a><a href="#h4-4-12" id="h4-4-12" class="i">+            }
</a><a href="#h4-4-13" id="h4-4-13" class="i">+            patch(input, outputFile)
</a><a href="#h4-4-14" id="h4-4-14" class="i">+            outputs.add(outputFile)
</a><a href="#h4-4-15" id="h4-4-15" class="i">+        }
</a><a href="#h4-4-16" id="h4-4-16" class="i">+        return outputs
</a><a href="#h4-4-17" id="h4-4-17" class="i">+    }
</a><a href="#h4-4-18" id="h4-4-18" class="i">+
</a><a href="#h4-4-19" id="h4-4-19" class="i">+    private fun patch(input: File, outputFile: File) {
</a>         //check if input apk is already patched
         var isAlreadyPatched = false
         var inputFile = input
<b>diff --git a/<a id="h5" href="../file/manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/Navigation.kt.html">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/Navigation.kt</a> b/<a href="../file/manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/Navigation.kt.html">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/Navigation.kt</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -8,10 +8,7 @@ import androidx.compose.foundation.layout.PaddingValues
</a> import androidx.compose.foundation.layout.fillMaxHeight
 import androidx.compose.foundation.layout.padding
 import androidx.compose.foundation.layout.wrapContentWidth
<a href="#h5-0-3" id="h5-0-3" class="d">-import androidx.compose.material3.Icon
</a><a href="#h5-0-4" id="h5-0-4" class="d">-import androidx.compose.material3.NavigationBar
</a><a href="#h5-0-5" id="h5-0-5" class="d">-import androidx.compose.material3.NavigationBarItem
</a><a href="#h5-0-6" id="h5-0-6" class="d">-import androidx.compose.material3.Text
</a><a href="#h5-0-7" id="h5-0-7" class="i">+import androidx.compose.material3.*
</a> import androidx.compose.runtime.Composable
 import androidx.compose.runtime.getValue
 import androidx.compose.runtime.remember
<a href="#h5-1" id="h5-1" class="h">@@ -31,15 +28,26 @@ class Navigation(
</a>     private val tabs: List&lt;Tab&gt;,
     private val defaultTab: KClass&lt;out Tab&gt;
 ) {
<a href="#h5-1-3" id="h5-1-3" class="d">-
</a><a href="#h5-1-4" id="h5-1-4" class="i">+    @OptIn(ExperimentalMaterial3Api::class)
</a>     @Composable
     fun TopBar() {
<a href="#h5-1-7" id="h5-1-7" class="d">-
</a><a href="#h5-1-8" id="h5-1-8" class="i">+        val navBackStackEntry by navHostController.currentBackStackEntryAsState()
</a><a href="#h5-1-9" id="h5-1-9" class="i">+        val currentTab = tabs.firstOrNull { it.route == navBackStackEntry?.destination?.route }
</a><a href="#h5-1-10" id="h5-1-10" class="i">+        TopAppBar(title = {
</a><a href="#h5-1-11" id="h5-1-11" class="i">+            Text(text = currentTab?.route ?: &quot;&quot;)
</a><a href="#h5-1-12" id="h5-1-12" class="i">+        }, navigationIcon =  {
</a><a href="#h5-1-13" id="h5-1-13" class="i">+            currentTab?.icon?.let {
</a><a href="#h5-1-14" id="h5-1-14" class="i">+                Icon(imageVector = it, contentDescription = null)
</a><a href="#h5-1-15" id="h5-1-15" class="i">+            }
</a><a href="#h5-1-16" id="h5-1-16" class="i">+        }, actions = {
</a><a href="#h5-1-17" id="h5-1-17" class="i">+            currentTab?.TopBar()
</a><a href="#h5-1-18" id="h5-1-18" class="i">+        })
</a>     }
 
     @Composable
     fun FloatingActionButtons() {
<a href="#h5-1-23" id="h5-1-23" class="d">-
</a><a href="#h5-1-24" id="h5-1-24" class="i">+        val navBackStackEntry by navHostController.currentBackStackEntryAsState()
</a><a href="#h5-1-25" id="h5-1-25" class="i">+        tabs.firstOrNull { it.route == navBackStackEntry?.destination?.route }?.FloatingActionButtons()
</a>     }
 
     fun navigateTo(tab: KClass&lt;out Tab&gt;) {
<b>diff --git a/<a id="h6" href="../file/manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/Tab.kt.html">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/Tab.kt</a> b/<a href="../file/manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/Tab.kt.html">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/Tab.kt</a></b>
<a href="#h6-0" id="h6-0" class="h">@@ -1,6 +1,7 @@
</a> package me.rhunk.snapenhance.manager.ui
 
 import android.os.Bundle
<a href="#h6-0-3" id="h6-0-3" class="i">+import android.widget.Toast
</a> import androidx.activity.ComponentActivity
 import androidx.compose.runtime.Composable
 import androidx.compose.ui.graphics.vector.ImageVector
<a href="#h6-1" id="h6-1" class="h">@@ -46,4 +47,10 @@ open class Tab(
</a> 
     @Composable
     open fun Content() {}
<a href="#h6-1-3" id="h6-1-3" class="i">+
</a><a href="#h6-1-4" id="h6-1-4" class="i">+    fun toast(message: String) {
</a><a href="#h6-1-5" id="h6-1-5" class="i">+        activity.runOnUiThread {
</a><a href="#h6-1-6" id="h6-1-6" class="i">+            Toast.makeText(activity, message, Toast.LENGTH_SHORT).show()
</a><a href="#h6-1-7" id="h6-1-7" class="i">+        }
</a><a href="#h6-1-8" id="h6-1-8" class="i">+    }
</a> } 
\ No newline at end of file
<b>diff --git a/<a id="h7" href="../file/manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/components/Dialogs.kt.html">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/components/Dialogs.kt</a> b/<a href="../file/manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/components/Dialogs.kt.html">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/components/Dialogs.kt</a></b>
<a href="#h7-0" id="h7-0" class="h">@@ -0,0 +1,37 @@
</a><a href="#h7-0-0" id="h7-0-0" class="i">+package me.rhunk.snapenhance.manager.ui.components
</a><a href="#h7-0-1" id="h7-0-1" class="i">+
</a><a href="#h7-0-2" id="h7-0-2" class="i">+import androidx.compose.foundation.layout.Arrangement
</a><a href="#h7-0-3" id="h7-0-3" class="i">+import androidx.compose.foundation.layout.Column
</a><a href="#h7-0-4" id="h7-0-4" class="i">+import androidx.compose.foundation.layout.Row
</a><a href="#h7-0-5" id="h7-0-5" class="i">+import androidx.compose.foundation.layout.fillMaxWidth
</a><a href="#h7-0-6" id="h7-0-6" class="i">+import androidx.compose.foundation.layout.padding
</a><a href="#h7-0-7" id="h7-0-7" class="i">+import androidx.compose.material3.Button
</a><a href="#h7-0-8" id="h7-0-8" class="i">+import androidx.compose.material3.Card
</a><a href="#h7-0-9" id="h7-0-9" class="i">+import androidx.compose.material3.Text
</a><a href="#h7-0-10" id="h7-0-10" class="i">+import androidx.compose.runtime.Composable
</a><a href="#h7-0-11" id="h7-0-11" class="i">+import androidx.compose.ui.Modifier
</a><a href="#h7-0-12" id="h7-0-12" class="i">+import androidx.compose.ui.unit.dp
</a><a href="#h7-0-13" id="h7-0-13" class="i">+
</a><a href="#h7-0-14" id="h7-0-14" class="i">+
</a><a href="#h7-0-15" id="h7-0-15" class="i">+@Composable
</a><a href="#h7-0-16" id="h7-0-16" class="i">+fun ConfirmationDialog(title: String, onDismiss: () -&gt; Unit, onConfirm: () -&gt; Unit) {
</a><a href="#h7-0-17" id="h7-0-17" class="i">+    Card {
</a><a href="#h7-0-18" id="h7-0-18" class="i">+        Column(
</a><a href="#h7-0-19" id="h7-0-19" class="i">+            modifier = Modifier.padding(16.dp),
</a><a href="#h7-0-20" id="h7-0-20" class="i">+            verticalArrangement = Arrangement.spacedBy(10.dp)
</a><a href="#h7-0-21" id="h7-0-21" class="i">+        ) {
</a><a href="#h7-0-22" id="h7-0-22" class="i">+            Text(title)
</a><a href="#h7-0-23" id="h7-0-23" class="i">+            Row(
</a><a href="#h7-0-24" id="h7-0-24" class="i">+                modifier = Modifier.fillMaxWidth(),
</a><a href="#h7-0-25" id="h7-0-25" class="i">+                horizontalArrangement = Arrangement.SpaceBetween
</a><a href="#h7-0-26" id="h7-0-26" class="i">+            ) {
</a><a href="#h7-0-27" id="h7-0-27" class="i">+                Button(onClick = { onDismiss() }) {
</a><a href="#h7-0-28" id="h7-0-28" class="i">+                    Text(&quot;Cancel&quot;)
</a><a href="#h7-0-29" id="h7-0-29" class="i">+                }
</a><a href="#h7-0-30" id="h7-0-30" class="i">+                Button(onClick = { onConfirm() }) {
</a><a href="#h7-0-31" id="h7-0-31" class="i">+                    Text(&quot;Yes&quot;)
</a><a href="#h7-0-32" id="h7-0-32" class="i">+                }
</a><a href="#h7-0-33" id="h7-0-33" class="i">+            }
</a><a href="#h7-0-34" id="h7-0-34" class="i">+        }
</a><a href="#h7-0-35" id="h7-0-35" class="i">+    }
</a><a href="#h7-0-36" id="h7-0-36" class="i">+}</a><a href="#h7-0-37" id="h7-0-37" class="i">+
\ No newline at end of file
</a><b>diff --git a/<a id="h8" href="../file/manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/tab/HomeTab.kt.html">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/tab/HomeTab.kt</a> b/<a href="../file/manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/tab/HomeTab.kt.html">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/tab/HomeTab.kt</a></b>
<a href="#h8-0" id="h8-0" class="h">@@ -29,11 +29,13 @@ import me.rhunk.snapenhance.manager.BuildConfig
</a> import me.rhunk.snapenhance.manager.lspatch.config.Constants
 import me.rhunk.snapenhance.manager.ui.Tab
 import me.rhunk.snapenhance.manager.ui.tab.download.SEDownloadTab
<a href="#h8-0-3" id="h8-0-3" class="i">+import me.rhunk.snapenhance.manager.ui.tab.download.SnapchatPatchTab
</a> 
 class HomeTab : Tab(&quot;home&quot;, true, icon = Icons.Default.Home) {
     override fun init(activity: ComponentActivity) {
         super.init(activity)
         registerNestedTab(SEDownloadTab::class)
<a href="#h8-0-9" id="h8-0-9" class="i">+        registerNestedTab(SnapchatPatchTab::class)
</a>     }
 
     @Composable
<a href="#h8-1" id="h8-1" class="h">@@ -73,7 +75,7 @@ class HomeTab : Tab(&quot;home&quot;, true, icon = Icons.Default.Home) {
</a>                                 Text(text = &quot;Patched&quot;, fontSize = 16.sp, color = MaterialTheme.colorScheme.onSurface)
                             }
                             OutlinedButton(onClick = {
<a href="#h8-1-3" id="h8-1-3" class="d">-
</a><a href="#h8-1-4" id="h8-1-4" class="i">+                                navigation.navigateTo(SnapchatPatchTab::class)
</a>                             }) {
                                 Text(text = if (isLSPatched) &quot;Repatch&quot; else &quot;Patch&quot;)
                             }
<b>diff --git a/<a id="h9" href="../file/manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/tab/download/SnapchatPatchTab.kt.html">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/tab/download/SnapchatPatchTab.kt</a> b/<a href="../file/manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/tab/download/SnapchatPatchTab.kt.html">manager/src/main/kotlin/me/rhunk/snapenhance/manager/ui/tab/download/SnapchatPatchTab.kt</a></b>
<a href="#h9-0" id="h9-0" class="h">@@ -0,0 +1,252 @@
</a><a href="#h9-0-0" id="h9-0-0" class="i">+package me.rhunk.snapenhance.manager.ui.tab.download
</a><a href="#h9-0-1" id="h9-0-1" class="i">+
</a><a href="#h9-0-2" id="h9-0-2" class="i">+import androidx.compose.foundation.layout.*
</a><a href="#h9-0-3" id="h9-0-3" class="i">+import androidx.compose.foundation.lazy.LazyColumn
</a><a href="#h9-0-4" id="h9-0-4" class="i">+import androidx.compose.foundation.lazy.items
</a><a href="#h9-0-5" id="h9-0-5" class="i">+import androidx.compose.material.icons.Icons
</a><a href="#h9-0-6" id="h9-0-6" class="i">+import androidx.compose.material.icons.filled.Delete
</a><a href="#h9-0-7" id="h9-0-7" class="i">+import androidx.compose.material.icons.filled.DeleteForever
</a><a href="#h9-0-8" id="h9-0-8" class="i">+import androidx.compose.material.icons.filled.Download
</a><a href="#h9-0-9" id="h9-0-9" class="i">+import androidx.compose.material3.*
</a><a href="#h9-0-10" id="h9-0-10" class="i">+import androidx.compose.runtime.*
</a><a href="#h9-0-11" id="h9-0-11" class="i">+import androidx.compose.ui.Alignment
</a><a href="#h9-0-12" id="h9-0-12" class="i">+import androidx.compose.ui.Modifier
</a><a href="#h9-0-13" id="h9-0-13" class="i">+import androidx.compose.ui.draw.alpha
</a><a href="#h9-0-14" id="h9-0-14" class="i">+import androidx.compose.ui.res.painterResource
</a><a href="#h9-0-15" id="h9-0-15" class="i">+import androidx.compose.ui.unit.dp
</a><a href="#h9-0-16" id="h9-0-16" class="i">+import kotlinx.coroutines.CoroutineScope
</a><a href="#h9-0-17" id="h9-0-17" class="i">+import kotlinx.coroutines.Dispatchers
</a><a href="#h9-0-18" id="h9-0-18" class="i">+import kotlinx.coroutines.launch
</a><a href="#h9-0-19" id="h9-0-19" class="i">+import kotlinx.coroutines.withContext
</a><a href="#h9-0-20" id="h9-0-20" class="i">+import me.rhunk.snapenhance.manager.R
</a><a href="#h9-0-21" id="h9-0-21" class="i">+import me.rhunk.snapenhance.manager.data.APKMirror
</a><a href="#h9-0-22" id="h9-0-22" class="i">+import me.rhunk.snapenhance.manager.data.DownloadItem
</a><a href="#h9-0-23" id="h9-0-23" class="i">+import me.rhunk.snapenhance.manager.ui.Tab
</a><a href="#h9-0-24" id="h9-0-24" class="i">+import me.rhunk.snapenhance.manager.ui.components.ConfirmationDialog
</a><a href="#h9-0-25" id="h9-0-25" class="i">+
</a><a href="#h9-0-26" id="h9-0-26" class="i">+@OptIn(ExperimentalMaterial3Api::class)
</a><a href="#h9-0-27" id="h9-0-27" class="i">+class SnapchatPatchTab : Tab(&quot;snapchat_download_tab&quot;) {
</a><a href="#h9-0-28" id="h9-0-28" class="i">+    private val apkCache by lazy {
</a><a href="#h9-0-29" id="h9-0-29" class="i">+        activity.cacheDir.resolve(&quot;snapchat_apk_cache&quot;).also {
</a><a href="#h9-0-30" id="h9-0-30" class="i">+            if (!it.exists()) it.mkdirs()
</a><a href="#h9-0-31" id="h9-0-31" class="i">+        }
</a><a href="#h9-0-32" id="h9-0-32" class="i">+    }
</a><a href="#h9-0-33" id="h9-0-33" class="i">+    private val apkMirror =  APKMirror()
</a><a href="#h9-0-34" id="h9-0-34" class="i">+    private val cachedDownloadItems = mutableListOf&lt;DownloadItem&gt;()
</a><a href="#h9-0-35" id="h9-0-35" class="i">+    private var currentPage by mutableIntStateOf(1)
</a><a href="#h9-0-36" id="h9-0-36" class="i">+
</a><a href="#h9-0-37" id="h9-0-37" class="i">+    private fun isDownloaded(hash: String): Boolean {
</a><a href="#h9-0-38" id="h9-0-38" class="i">+        return apkCache.resolve(&quot;${hash}.apk&quot;).exists()
</a><a href="#h9-0-39" id="h9-0-39" class="i">+    }
</a><a href="#h9-0-40" id="h9-0-40" class="i">+
</a><a href="#h9-0-41" id="h9-0-41" class="i">+    private fun deleteDownload(hash: String) {
</a><a href="#h9-0-42" id="h9-0-42" class="i">+        runCatching {
</a><a href="#h9-0-43" id="h9-0-43" class="i">+            apkCache.resolve(&quot;${hash}.apk&quot;).delete()
</a><a href="#h9-0-44" id="h9-0-44" class="i">+        }.onFailure {
</a><a href="#h9-0-45" id="h9-0-45" class="i">+            it.printStackTrace()
</a><a href="#h9-0-46" id="h9-0-46" class="i">+            toast(&quot;Failed to delete download. It may have already been deleted.&quot;)
</a><a href="#h9-0-47" id="h9-0-47" class="i">+        }
</a><a href="#h9-0-48" id="h9-0-48" class="i">+    }
</a><a href="#h9-0-49" id="h9-0-49" class="i">+
</a><a href="#h9-0-50" id="h9-0-50" class="i">+    private suspend fun downloadSnapchatVersion(downloadItem: DownloadItem, onProgress: (Float) -&gt; Unit, onSuccess: suspend () -&gt; Unit) {
</a><a href="#h9-0-51" id="h9-0-51" class="i">+        withContext(Dispatchers.IO) {
</a><a href="#h9-0-52" id="h9-0-52" class="i">+            toast(&quot;Downloading ${downloadItem.title}...&quot;)
</a><a href="#h9-0-53" id="h9-0-53" class="i">+            val downloadLink = apkMirror.fetchDownloadLink(downloadItem.downloadPage) ?: run {
</a><a href="#h9-0-54" id="h9-0-54" class="i">+                toast(&quot;Failed to fetch download link&quot;)
</a><a href="#h9-0-55" id="h9-0-55" class="i">+                return@withContext
</a><a href="#h9-0-56" id="h9-0-56" class="i">+            }
</a><a href="#h9-0-57" id="h9-0-57" class="i">+
</a><a href="#h9-0-58" id="h9-0-58" class="i">+            val downloadResponse = apkMirror.okhttpClient.newCall(
</a><a href="#h9-0-59" id="h9-0-59" class="i">+                okhttp3.Request.Builder()
</a><a href="#h9-0-60" id="h9-0-60" class="i">+                    .url(downloadLink)
</a><a href="#h9-0-61" id="h9-0-61" class="i">+                    .build()
</a><a href="#h9-0-62" id="h9-0-62" class="i">+            ).execute()
</a><a href="#h9-0-63" id="h9-0-63" class="i">+
</a><a href="#h9-0-64" id="h9-0-64" class="i">+            if (!downloadResponse.isSuccessful) {
</a><a href="#h9-0-65" id="h9-0-65" class="i">+                toast(&quot;Failed to download&quot;)
</a><a href="#h9-0-66" id="h9-0-66" class="i">+                return@withContext
</a><a href="#h9-0-67" id="h9-0-67" class="i">+            }
</a><a href="#h9-0-68" id="h9-0-68" class="i">+
</a><a href="#h9-0-69" id="h9-0-69" class="i">+            val apkFile = apkCache.resolve(&quot;${downloadItem.hash}.apk&quot;)
</a><a href="#h9-0-70" id="h9-0-70" class="i">+            apkFile.outputStream().use { outputStream -&gt;
</a><a href="#h9-0-71" id="h9-0-71" class="i">+                runCatching {
</a><a href="#h9-0-72" id="h9-0-72" class="i">+                    downloadResponse.body.byteStream().use { inputStream -&gt;
</a><a href="#h9-0-73" id="h9-0-73" class="i">+                        val buffer = ByteArray(DEFAULT_BUFFER_SIZE)
</a><a href="#h9-0-74" id="h9-0-74" class="i">+                        var read: Int
</a><a href="#h9-0-75" id="h9-0-75" class="i">+                        var totalRead = 0L
</a><a href="#h9-0-76" id="h9-0-76" class="i">+                        val totalSize = downloadResponse.body.contentLength()
</a><a href="#h9-0-77" id="h9-0-77" class="i">+                        while (inputStream.read(buffer).also { read = it } != -1) {
</a><a href="#h9-0-78" id="h9-0-78" class="i">+                            outputStream.write(buffer, 0, read)
</a><a href="#h9-0-79" id="h9-0-79" class="i">+                            totalRead += read
</a><a href="#h9-0-80" id="h9-0-80" class="i">+                            onProgress(totalRead.toFloat() / totalSize.toFloat())
</a><a href="#h9-0-81" id="h9-0-81" class="i">+                        }
</a><a href="#h9-0-82" id="h9-0-82" class="i">+                    }
</a><a href="#h9-0-83" id="h9-0-83" class="i">+                }.onFailure {
</a><a href="#h9-0-84" id="h9-0-84" class="i">+                    it.printStackTrace()
</a><a href="#h9-0-85" id="h9-0-85" class="i">+                    toast(&quot;Failed to save apk&quot;)
</a><a href="#h9-0-86" id="h9-0-86" class="i">+                    return@withContext
</a><a href="#h9-0-87" id="h9-0-87" class="i">+                }
</a><a href="#h9-0-88" id="h9-0-88" class="i">+            }
</a><a href="#h9-0-89" id="h9-0-89" class="i">+
</a><a href="#h9-0-90" id="h9-0-90" class="i">+            withContext(Dispatchers.Main) {
</a><a href="#h9-0-91" id="h9-0-91" class="i">+                onSuccess()
</a><a href="#h9-0-92" id="h9-0-92" class="i">+            }
</a><a href="#h9-0-93" id="h9-0-93" class="i">+        }
</a><a href="#h9-0-94" id="h9-0-94" class="i">+    }
</a><a href="#h9-0-95" id="h9-0-95" class="i">+
</a><a href="#h9-0-96" id="h9-0-96" class="i">+    @Composable
</a><a href="#h9-0-97" id="h9-0-97" class="i">+    override fun TopBar() {
</a><a href="#h9-0-98" id="h9-0-98" class="i">+        var deleteAllDialog by remember { mutableStateOf(false) }
</a><a href="#h9-0-99" id="h9-0-99" class="i">+        IconButton(onClick = { deleteAllDialog = true }) {
</a><a href="#h9-0-100" id="h9-0-100" class="i">+            Icon(imageVector = Icons.Default.DeleteForever, contentDescription = null)
</a><a href="#h9-0-101" id="h9-0-101" class="i">+        }
</a><a href="#h9-0-102" id="h9-0-102" class="i">+
</a><a href="#h9-0-103" id="h9-0-103" class="i">+        if (deleteAllDialog) {
</a><a href="#h9-0-104" id="h9-0-104" class="i">+            AlertDialog(onDismissRequest = { deleteAllDialog = false }) {
</a><a href="#h9-0-105" id="h9-0-105" class="i">+                ConfirmationDialog(title = &quot;Are you sure you want to delete all downloads?&quot;, onDismiss = { deleteAllDialog = false }) {
</a><a href="#h9-0-106" id="h9-0-106" class="i">+                    deleteAllDialog = false
</a><a href="#h9-0-107" id="h9-0-107" class="i">+                    runCatching {
</a><a href="#h9-0-108" id="h9-0-108" class="i">+                        apkCache.listFiles()?.forEach { it.deleteRecursively() }
</a><a href="#h9-0-109" id="h9-0-109" class="i">+                    }.onFailure {
</a><a href="#h9-0-110" id="h9-0-110" class="i">+                        toast(&quot;Failed to delete downloads&quot;)
</a><a href="#h9-0-111" id="h9-0-111" class="i">+                        it.printStackTrace()
</a><a href="#h9-0-112" id="h9-0-112" class="i">+                    }
</a><a href="#h9-0-113" id="h9-0-113" class="i">+                    toast(&quot;Done!&quot;)
</a><a href="#h9-0-114" id="h9-0-114" class="i">+                }
</a><a href="#h9-0-115" id="h9-0-115" class="i">+            }
</a><a href="#h9-0-116" id="h9-0-116" class="i">+        }
</a><a href="#h9-0-117" id="h9-0-117" class="i">+    }
</a><a href="#h9-0-118" id="h9-0-118" class="i">+
</a><a href="#h9-0-119" id="h9-0-119" class="i">+    @Composable
</a><a href="#h9-0-120" id="h9-0-120" class="i">+    private fun DownloadItemRow(coroutineScope: CoroutineScope, item: DownloadItem) {
</a><a href="#h9-0-121" id="h9-0-121" class="i">+        var isDownloading by remember { mutableStateOf(false) }
</a><a href="#h9-0-122" id="h9-0-122" class="i">+        var downloadProgress by remember { mutableFloatStateOf(-1f) }
</a><a href="#h9-0-123" id="h9-0-123" class="i">+        var isDownloaded by remember { mutableStateOf(isDownloaded(item.hash)) }
</a><a href="#h9-0-124" id="h9-0-124" class="i">+
</a><a href="#h9-0-125" id="h9-0-125" class="i">+        var showDeleteCurrentDownloadDialog by remember { mutableStateOf(false) }
</a><a href="#h9-0-126" id="h9-0-126" class="i">+
</a><a href="#h9-0-127" id="h9-0-127" class="i">+        if (showDeleteCurrentDownloadDialog) {
</a><a href="#h9-0-128" id="h9-0-128" class="i">+            AlertDialog(onDismissRequest = { showDeleteCurrentDownloadDialog = false }) {
</a><a href="#h9-0-129" id="h9-0-129" class="i">+                ConfirmationDialog(title = &quot;Are you sure you want to delete this download?&quot;, onDismiss = { showDeleteCurrentDownloadDialog = false }) {
</a><a href="#h9-0-130" id="h9-0-130" class="i">+                    coroutineScope.launch {
</a><a href="#h9-0-131" id="h9-0-131" class="i">+                        deleteDownload(item.hash)
</a><a href="#h9-0-132" id="h9-0-132" class="i">+                        isDownloaded = false
</a><a href="#h9-0-133" id="h9-0-133" class="i">+                    }
</a><a href="#h9-0-134" id="h9-0-134" class="i">+                    showDeleteCurrentDownloadDialog = false
</a><a href="#h9-0-135" id="h9-0-135" class="i">+                }
</a><a href="#h9-0-136" id="h9-0-136" class="i">+            }
</a><a href="#h9-0-137" id="h9-0-137" class="i">+        }
</a><a href="#h9-0-138" id="h9-0-138" class="i">+
</a><a href="#h9-0-139" id="h9-0-139" class="i">+        ElevatedCard(
</a><a href="#h9-0-140" id="h9-0-140" class="i">+            modifier = Modifier.padding(10.dp),
</a><a href="#h9-0-141" id="h9-0-141" class="i">+        ) {
</a><a href="#h9-0-142" id="h9-0-142" class="i">+            Row(
</a><a href="#h9-0-143" id="h9-0-143" class="i">+                modifier = Modifier
</a><a href="#h9-0-144" id="h9-0-144" class="i">+                    .fillMaxWidth()
</a><a href="#h9-0-145" id="h9-0-145" class="i">+                    .padding(5.dp),
</a><a href="#h9-0-146" id="h9-0-146" class="i">+                horizontalArrangement = Arrangement.spacedBy(10.dp),
</a><a href="#h9-0-147" id="h9-0-147" class="i">+                verticalAlignment = Alignment.CenterVertically
</a><a href="#h9-0-148" id="h9-0-148" class="i">+            ) {
</a><a href="#h9-0-149" id="h9-0-149" class="i">+                Column(
</a><a href="#h9-0-150" id="h9-0-150" class="i">+                    modifier = Modifier.padding(10.dp),
</a><a href="#h9-0-151" id="h9-0-151" class="i">+                ) {
</a><a href="#h9-0-152" id="h9-0-152" class="i">+                    Icon(painter = painterResource(R.drawable.sclogo), contentDescription = null, tint = MaterialTheme.colorScheme.onSurface, modifier = Modifier.size(40.dp))
</a><a href="#h9-0-153" id="h9-0-153" class="i">+                }
</a><a href="#h9-0-154" id="h9-0-154" class="i">+                Column(
</a><a href="#h9-0-155" id="h9-0-155" class="i">+                    modifier = Modifier.weight(1f),
</a><a href="#h9-0-156" id="h9-0-156" class="i">+                    verticalArrangement = Arrangement.spacedBy(5.dp)
</a><a href="#h9-0-157" id="h9-0-157" class="i">+                ) {
</a><a href="#h9-0-158" id="h9-0-158" class="i">+                    Text(item.shortTitle)
</a><a href="#h9-0-159" id="h9-0-159" class="i">+                    Text(item.releaseDate)
</a><a href="#h9-0-160" id="h9-0-160" class="i">+                    if (!item.isBeta) {
</a><a href="#h9-0-161" id="h9-0-161" class="i">+                        Text(&quot;Recommended&quot;, color = MaterialTheme.colorScheme.tertiary)
</a><a href="#h9-0-162" id="h9-0-162" class="i">+                    }
</a><a href="#h9-0-163" id="h9-0-163" class="i">+                }
</a><a href="#h9-0-164" id="h9-0-164" class="i">+                Row(
</a><a href="#h9-0-165" id="h9-0-165" class="i">+                    modifier = Modifier.padding(5.dp),
</a><a href="#h9-0-166" id="h9-0-166" class="i">+                    horizontalArrangement = Arrangement.spacedBy(5.dp),
</a><a href="#h9-0-167" id="h9-0-167" class="i">+                ) {
</a><a href="#h9-0-168" id="h9-0-168" class="i">+                    if (!isDownloaded) {
</a><a href="#h9-0-169" id="h9-0-169" class="i">+                        if (isDownloading) {
</a><a href="#h9-0-170" id="h9-0-170" class="i">+                            if (downloadProgress != -1f) {
</a><a href="#h9-0-171" id="h9-0-171" class="i">+                                CircularProgressIndicator(progress = downloadProgress, modifier = Modifier.size(40.dp))
</a><a href="#h9-0-172" id="h9-0-172" class="i">+                            } else {
</a><a href="#h9-0-173" id="h9-0-173" class="i">+                                CircularProgressIndicator(modifier = Modifier.size(40.dp))
</a><a href="#h9-0-174" id="h9-0-174" class="i">+                            }
</a><a href="#h9-0-175" id="h9-0-175" class="i">+                        } else {
</a><a href="#h9-0-176" id="h9-0-176" class="i">+                            FilledIconButton(onClick = {
</a><a href="#h9-0-177" id="h9-0-177" class="i">+                                coroutineScope.launch {
</a><a href="#h9-0-178" id="h9-0-178" class="i">+                                    isDownloading = true
</a><a href="#h9-0-179" id="h9-0-179" class="i">+                                    downloadProgress = -1f
</a><a href="#h9-0-180" id="h9-0-180" class="i">+                                    downloadSnapchatVersion(item, onProgress = {
</a><a href="#h9-0-181" id="h9-0-181" class="i">+                                        downloadProgress = it
</a><a href="#h9-0-182" id="h9-0-182" class="i">+                                    }, onSuccess = { isDownloaded = true })
</a><a href="#h9-0-183" id="h9-0-183" class="i">+                                    isDownloading = false
</a><a href="#h9-0-184" id="h9-0-184" class="i">+                                }
</a><a href="#h9-0-185" id="h9-0-185" class="i">+                            }) {
</a><a href="#h9-0-186" id="h9-0-186" class="i">+                                Icon(imageVector = Icons.Default.Download, contentDescription = null)
</a><a href="#h9-0-187" id="h9-0-187" class="i">+                            }
</a><a href="#h9-0-188" id="h9-0-188" class="i">+                        }
</a><a href="#h9-0-189" id="h9-0-189" class="i">+                    } else {
</a><a href="#h9-0-190" id="h9-0-190" class="i">+                        Button(onClick = { /*TODO*/ }) {
</a><a href="#h9-0-191" id="h9-0-191" class="i">+                            Text(&quot;Patch&quot;)
</a><a href="#h9-0-192" id="h9-0-192" class="i">+                        }
</a><a href="#h9-0-193" id="h9-0-193" class="i">+                        IconButton(onClick = { showDeleteCurrentDownloadDialog = true }) {
</a><a href="#h9-0-194" id="h9-0-194" class="i">+                            Icon(imageVector = Icons.Default.Delete, contentDescription = null)
</a><a href="#h9-0-195" id="h9-0-195" class="i">+                        }
</a><a href="#h9-0-196" id="h9-0-196" class="i">+                    }
</a><a href="#h9-0-197" id="h9-0-197" class="i">+                }
</a><a href="#h9-0-198" id="h9-0-198" class="i">+            }
</a><a href="#h9-0-199" id="h9-0-199" class="i">+        }
</a><a href="#h9-0-200" id="h9-0-200" class="i">+    }
</a><a href="#h9-0-201" id="h9-0-201" class="i">+
</a><a href="#h9-0-202" id="h9-0-202" class="i">+    @Composable
</a><a href="#h9-0-203" id="h9-0-203" class="i">+    override fun Content() {
</a><a href="#h9-0-204" id="h9-0-204" class="i">+        val coroutineScope = rememberCoroutineScope()
</a><a href="#h9-0-205" id="h9-0-205" class="i">+        var isFetching by remember { mutableStateOf(false) }
</a><a href="#h9-0-206" id="h9-0-206" class="i">+        val downloadItems = remember { cachedDownloadItems.toMutableStateList() }
</a><a href="#h9-0-207" id="h9-0-207" class="i">+
</a><a href="#h9-0-208" id="h9-0-208" class="i">+        Column(
</a><a href="#h9-0-209" id="h9-0-209" class="i">+            modifier = Modifier.fillMaxSize(),
</a><a href="#h9-0-210" id="h9-0-210" class="i">+            horizontalAlignment = Alignment.CenterHorizontally,
</a><a href="#h9-0-211" id="h9-0-211" class="i">+            verticalArrangement = Arrangement.spacedBy(10.dp)
</a><a href="#h9-0-212" id="h9-0-212" class="i">+        ) {
</a><a href="#h9-0-213" id="h9-0-213" class="i">+            Text(&quot;Select a version to download and patch&quot;)
</a><a href="#h9-0-214" id="h9-0-214" class="i">+            LazyColumn {
</a><a href="#h9-0-215" id="h9-0-215" class="i">+                items(downloadItems, key = { it.hash }) { item -&gt;
</a><a href="#h9-0-216" id="h9-0-216" class="i">+                    DownloadItemRow(coroutineScope, item)
</a><a href="#h9-0-217" id="h9-0-217" class="i">+                }
</a><a href="#h9-0-218" id="h9-0-218" class="i">+                item {
</a><a href="#h9-0-219" id="h9-0-219" class="i">+                    Box(
</a><a href="#h9-0-220" id="h9-0-220" class="i">+                        modifier = Modifier
</a><a href="#h9-0-221" id="h9-0-221" class="i">+                            .fillMaxWidth()
</a><a href="#h9-0-222" id="h9-0-222" class="i">+                            .padding(20.dp),
</a><a href="#h9-0-223" id="h9-0-223" class="i">+                        contentAlignment = Alignment.Center
</a><a href="#h9-0-224" id="h9-0-224" class="i">+                    ) {
</a><a href="#h9-0-225" id="h9-0-225" class="i">+                        CircularProgressIndicator(modifier = Modifier.alpha(if (isFetching) 1f else 0f))
</a><a href="#h9-0-226" id="h9-0-226" class="i">+                    }
</a><a href="#h9-0-227" id="h9-0-227" class="i">+                    SideEffect {
</a><a href="#h9-0-228" id="h9-0-228" class="i">+                        if (isFetching) return@SideEffect
</a><a href="#h9-0-229" id="h9-0-229" class="i">+                        isFetching = true
</a><a href="#h9-0-230" id="h9-0-230" class="i">+                        coroutineScope.launch {
</a><a href="#h9-0-231" id="h9-0-231" class="i">+                            runCatching {
</a><a href="#h9-0-232" id="h9-0-232" class="i">+                                withContext(Dispatchers.IO) {
</a><a href="#h9-0-233" id="h9-0-233" class="i">+                                    apkMirror.fetchSnapchatVersions(currentPage)?.let {
</a><a href="#h9-0-234" id="h9-0-234" class="i">+                                        withContext(Dispatchers.Main) {
</a><a href="#h9-0-235" id="h9-0-235" class="i">+                                            cachedDownloadItems.addAll(it)
</a><a href="#h9-0-236" id="h9-0-236" class="i">+                                            downloadItems.addAll(it)
</a><a href="#h9-0-237" id="h9-0-237" class="i">+                                        }
</a><a href="#h9-0-238" id="h9-0-238" class="i">+                                    }
</a><a href="#h9-0-239" id="h9-0-239" class="i">+                                }
</a><a href="#h9-0-240" id="h9-0-240" class="i">+                            }.onFailure {
</a><a href="#h9-0-241" id="h9-0-241" class="i">+                                it.printStackTrace()
</a><a href="#h9-0-242" id="h9-0-242" class="i">+                            }
</a><a href="#h9-0-243" id="h9-0-243" class="i">+                            ++currentPage
</a><a href="#h9-0-244" id="h9-0-244" class="i">+                            isFetching = false
</a><a href="#h9-0-245" id="h9-0-245" class="i">+                        }
</a><a href="#h9-0-246" id="h9-0-246" class="i">+                    }
</a><a href="#h9-0-247" id="h9-0-247" class="i">+                }
</a><a href="#h9-0-248" id="h9-0-248" class="i">+            }
</a><a href="#h9-0-249" id="h9-0-249" class="i">+        }
</a><a href="#h9-0-250" id="h9-0-250" class="i">+    }
</a><a href="#h9-0-251" id="h9-0-251" class="i">+}</a><a href="#h9-0-252" id="h9-0-252" class="i">+
\ No newline at end of file
</a><b>diff --git a/<a id="h10" href="../file/manager/src/main/res/drawable/sclogo.xml.html">manager/src/main/res/drawable/sclogo.xml</a> b/<a href="../file/manager/src/main/res/drawable/sclogo.xml.html">manager/src/main/res/drawable/sclogo.xml</a></b>
<a href="#h10-0" id="h10-0" class="h">@@ -0,0 +1,15 @@
</a><a href="#h10-0-0" id="h10-0-0" class="i">+&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
</a><a href="#h10-0-1" id="h10-0-1" class="i">+    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
</a><a href="#h10-0-2" id="h10-0-2" class="i">+    android:width=&quot;200dp&quot;
</a><a href="#h10-0-3" id="h10-0-3" class="i">+    android:height=&quot;200dp&quot;
</a><a href="#h10-0-4" id="h10-0-4" class="i">+    android:viewportWidth=&quot;1024&quot;
</a><a href="#h10-0-5" id="h10-0-5" class="i">+    android:viewportHeight=&quot;1009&quot;&gt;
</a><a href="#h10-0-6" id="h10-0-6" class="i">+  &lt;path
</a><a href="#h10-0-7" id="h10-0-7" class="i">+      android:fillColor=&quot;#FF000000&quot;
</a><a href="#h10-0-8" id="h10-0-8" class="i">+      android:pathData=&quot;M992.5,748.4c-4.2,-13.9 -24.3,-23.7 -24.3,-23.7 -1.9,-1 -3.6,-1.9 -5,-2.6 -33.5,-16.2 -63.2,-35.7 -88.2,-57.8 -20.1,-17.8 -37.3,-37.4 -51.1,-58.2 -16.9,-25.4 -24.8,-46.6 -28.2,-58.1 -1.9,-7.5 -1.6,-10.5 0,-14.4 1.3,-3.3 5.2,-6.4 7,-7.9 11.3,-8 29.5,-19.8 40.7,-27 9.7,-6.3 18,-11.7 22.9,-15.1 15.7,-11 26.5,-22.2 32.8,-34.3 8.2,-15.6 9.2,-32.8 2.8,-49.7 -8.6,-22.8 -29.9,-36.4 -57,-36.4 -6,0 -12.2,0.7 -18.4,2 -15.5,3.4 -30.2,8.9 -42.5,13.7 -0.9,0.4 -1.9,-0.3 -1.8,-1.3 1.3,-30.5 2.8,-71.5 -0.6,-110.4 -3,-35.2 -10.3,-64.9 -22.1,-90.8 -11.9,-26 -27.4,-45.2 -39.5,-59.1 -11.5,-13.2 -31.8,-32.7 -62.4,-50.2 -43,-24.6 -92,-37.1 -145.6,-37.1 -53.5,0 -102.4,12.5 -145.5,37.1 -32.4,18.5 -53.1,39.4 -62.5,50.2 -12.1,13.9 -27.6,33.1 -39.5,59.1 -11.9,25.9 -19.1,55.5 -22.1,90.8 -3.4,39.1 -2,76.8 -0.6,110.4 0,1 -0.9,1.7 -1.9,1.3 -12.3,-4.8 -27,-10.3 -42.5,-13.7 -6.1,-1.3 -12.3,-2 -18.4,-2 -27,0 -48.3,13.6 -57,36.4 -6.4,16.9 -5.4,34.1 2.8,49.7 6.4,12.1 17.1,23.3 32.8,34.3 4.8,3.4 13.2,8.8 22.9,15.1 10.9,7.1 28.6,18.6 40,26.5 1.4,1 6.2,4.6 7.7,8.4 1.6,4 1.9,7 -0.2,15 -3.5,11.6 -11.4,32.6 -28,57.5 -13.8,20.9 -31,40.4 -51.1,58.2 -25,22.1 -54.7,41.6 -88.2,57.8 -1.6,0.8 -3.5,1.7 -5.5,2.9 0,0 -20,10.2 -23.8,23.4 -5.6,19.5 9.3,37.8 24.4,47.6 24.8,16 55,24.6 72.5,29.3 4.9,1.3 9.3,2.5 13.3,3.7 2.5,0.8 8.8,3.2 11.5,6.7 3.4,4.4 3.8,9.8 5,15.9 1.9,10.3 6.2,23 18.9,31.8 14,9.6 31.7,10.3 54.2,11.2 23.5,0.9 52.7,2 86.2,13.1 15.5,5.1 29.6,13.8 45.8,23.8 34,20.9 76.3,46.9 148.5,46.9 72.3,0 114.9,-26.1 149.1,-47.1 16.2,-9.9 30.1,-18.5 45.3,-23.5 33.5,-11.1 62.7,-12.2 86.2,-13.1 22.5,-0.9 40.2,-1.5 54.2,-11.2 13.6,-9.4 17.5,-23.4 19.3,-33.9 1,-5.2 1.6,-9.9 4.6,-13.7 2.6,-3.3 8.4,-5.6 11.1,-6.5 4.1,-1.3 8.7,-2.5 13.8,-3.9 17.5,-4.7 39.5,-10.2 66.2,-25.3 32.2,-18.3 34.4,-40.7 31,-51.8z&quot;
</a><a href="#h10-0-9" id="h10-0-9" class="i">+      tools:ignore=&quot;VectorPath&quot; /&gt;
</a><a href="#h10-0-10" id="h10-0-10" class="i">+  &lt;path
</a><a href="#h10-0-11" id="h10-0-11" class="i">+      android:fillColor=&quot;#FF000000&quot;
</a><a href="#h10-0-12" id="h10-0-12" class="i">+      android:pathData=&quot;M1020.3,737.6c-7.1,-19.4 -20.7,-29.7 -36.1,-38.3 -2.9,-1.7 -5.6,-3.1 -7.8,-4.1 -4.6,-2.4 -9.3,-4.7 -14,-7.1 -48.1,-25.5 -85.7,-57.7 -111.7,-95.8 -8.8,-12.9 -14.9,-24.5 -19.2,-34 -2.2,-6.4 -2.1,-10 -0.5,-13.3 1.2,-2.5 4.4,-5.1 6.2,-6.4 8.3,-5.5 16.8,-11 22.6,-14.7 10.3,-6.7 18.5,-12 23.7,-15.6 19.8,-13.8 33.6,-28.5 42.2,-44.9 12.2,-23.1 13.7,-49.5 4.3,-74.3 -13,-34.4 -45.6,-55.8 -85,-55.8 -8.2,0 -16.5,0.9 -24.7,2.7 -2.2,0.5 -4.3,1 -6.4,1.5 0.4,-23.4 -0.2,-48.4 -2.3,-72.8 -7.4,-86 -37.5,-131.1 -68.9,-167 -13.1,-15 -35.9,-36.9 -70.1,-56.5 -47.7,-27.4 -101.7,-41.2 -160.6,-41.2 -58.7,0 -112.7,13.8 -160.4,41.1 -34.4,19.6 -57.2,41.6 -70.2,56.5 -31.4,35.9 -61.5,81 -68.9,167 -2.1,24.4 -2.6,49.4 -2.3,72.8 -2.1,-0.5 -4.3,-1 -6.4,-1.5 -8.2,-1.8 -16.6,-2.7 -24.7,-2.7 -39.4,0 -72,21.4 -85,55.8 -9.4,24.8 -7.9,51.2 4.3,74.3 8.6,16.4 22.5,31.1 42.2,44.9 5.3,3.7 13.4,9 23.7,15.6 5.6,3.6 13.7,8.9 21.7,14.2 1.2,0.8 5.5,4 7,7 1.7,3.4 1.7,7.1 -0.8,13.9 -4.2,9.3 -10.3,20.7 -18.9,33.3 -25.5,37.3 -62,68.9 -108.5,94.1 -24.7,13.1 -50.3,21.8 -61.1,51.2 -8.2,22.2 -2.8,47.5 17.9,68.8 6.8,7.3 15.4,13.8 26.2,19.8 25.4,14 47,20.9 64,25.6 3,0.9 9.9,3.1 12.9,5.8 7.6,6.6 6.5,16.6 16.6,31.2 6.1,9.1 13.1,15.3 18.9,19.3 21.1,14.6 44.9,15.5 70.1,16.5 22.7,0.9 48.5,1.9 77.9,11.6 12.2,4 24.9,11.8 39.5,20.8 35.2,21.7 83.5,51.3 164.2,51.3 80.8,0 129.3,-29.8 164.8,-51.5 14.6,-8.9 27.2,-16.7 39,-20.6 29.4,-9.7 55.2,-10.7 77.9,-11.6 25.2,-1 48.9,-1.9 70.1,-16.5 6.6,-4.6 15,-12.1 21.6,-23.5 7.2,-12.3 7.1,-21 13.9,-26.9 2.8,-2.4 8.9,-4.5 12.2,-5.5 17.1,-4.7 39,-11.6 64.9,-25.9 11.5,-6.3 20.4,-13.2 27.5,-21.1l0.3,-0.3c19.3,-21 24.2,-45.5 16.2,-67.2zM948.6,776.1c-43.8,24.2 -72.9,21.6 -95.5,36.1 -19.2,12.4 -7.9,39.1 -21.8,48.7 -17.2,11.9 -67.9,-0.8 -133.4,20.8 -54,17.9 -88.5,69.2 -185.8,69.2 -97.5,0 -131,-51.1 -185.8,-69.2 -65.5,-21.6 -116.3,-8.9 -133.4,-20.8 -13.9,-9.6 -2.6,-36.3 -21.8,-48.7 -22.6,-14.6 -51.7,-12 -95.5,-36.1 -27.9,-15.4 -12.1,-24.9 -2.8,-29.4 158.6,-76.7 183.8,-195.3 185,-204.2 1.4,-10.6 2.9,-19 -8.8,-29.9 -11.3,-10.5 -61.6,-41.6 -75.5,-51.3 -23.1,-16.1 -33.2,-32.2 -25.7,-52 5.2,-13.7 18,-18.8 31.5,-18.8 4.2,0 8.5,0.5 12.6,1.4 25.3,5.5 49.9,18.2 64.1,21.6 2,0.5 3.7,0.7 5.2,0.7 7.6,0 10.2,-3.8 9.7,-12.5 -1.6,-27.7 -5.6,-81.7 -1.2,-132.2 6,-69.4 28.4,-103.8 55,-134.3 12.8,-14.6 72.8,-78 187.5,-78 115,0 174.7,63.4 187.5,78 26.6,30.4 49,64.8 55,134.3 4.4,50.5 0.6,104.5 -1.2,132.2 -0.6,9.1 2.2,12.5 9.7,12.5 1.5,0 3.3,-0.2 5.2,-0.7 14.2,-3.4 38.8,-16.1 64.1,-21.6 4.1,-0.9 8.4,-1.4 12.6,-1.4 13.5,0 26.3,5.2 31.5,18.8 7.5,19.8 -2.7,35.9 -25.7,52 -13.9,9.7 -64.2,40.8 -75.5,51.3 -11.7,10.8 -10.2,19.2 -8.8,29.9 1.1,8.9 26.4,127.5 185,204.2 9,4.5 24.9,14 -3,29.4z&quot;
</a><a href="#h10-0-13" id="h10-0-13" class="i">+      tools:ignore=&quot;VectorPath&quot; /&gt;
</a><a href="#h10-0-14" id="h10-0-14" class="i">+&lt;/vector&gt;
</a><b>diff --git a/<a id="h11" href="../file/manager/src/main/res/values/themes.xml.html">manager/src/main/res/values/themes.xml</a> b/<a href="../file/manager/src/main/res/values/themes.xml.html">manager/src/main/res/values/themes.xml</a></b>
<a href="#h11-0" id="h11-0" class="h">@@ -0,0 +1,8 @@
</a><a href="#h11-0-0" id="h11-0-0" class="i">+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
</a><a href="#h11-0-1" id="h11-0-1" class="i">+&lt;resources&gt;
</a><a href="#h11-0-2" id="h11-0-2" class="i">+    &lt;style name=&quot;AppTheme&quot;&gt;
</a><a href="#h11-0-3" id="h11-0-3" class="i">+        &lt;item name=&quot;android:windowNoTitle&quot;&gt;true&lt;/item&gt;
</a><a href="#h11-0-4" id="h11-0-4" class="i">+        &lt;item name=&quot;android:windowContentOverlay&quot;&gt;@null&lt;/item&gt;
</a><a href="#h11-0-5" id="h11-0-5" class="i">+        &lt;item name=&quot;android:alertDialogTheme&quot;&gt;@android:style/Theme.DeviceDefault.Dialog.Alert&lt;/item&gt;
</a><a href="#h11-0-6" id="h11-0-6" class="i">+    &lt;/style&gt;
</a><a href="#h11-0-7" id="h11-0-7" class="i">+&lt;/resources&gt;</a><a href="#h11-0-8" id="h11-0-8" class="i">+
\ No newline at end of file
</a></pre>
</div>
</body>
</html>
