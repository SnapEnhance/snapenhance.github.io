<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>feat(core/config): dynamic change listener - organize imports - SnapEnhance - An Xposed module offering an enhanced Snapchat experience
</title>
<link rel="icon" type="image/svg+xml" href="../../logo.png"/>
<link rel="alternate icon" href="../../favicon.png"/>
<link rel="alternate" type="application/atom+xml" title="SnapEnhance Atom Feed" href="../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="SnapEnhance Atom Feed (tags)" href="../tags.xml" />
<link rel="stylesheet" type="text/css" href="../../style.css" />
<link rel="stylesheet" type="text/css" href="../../fonts.css" />
</head>
<body>
<div id="head"><table><tr><td><a class="logo" href="../../"><img src="../../logo.png" alt="" width="32" height="32" /></a></td><td><strong>SnapEnhance</strong><span class="desc"> - An Xposed module offering an enhanced Snapchat experience
</span>
</td></tr></table>
<p><a href="../about.html">About</a> | <a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/.gitmodules.html">Submodules</a> | <a href="../file/LICENSE.html">License</a></p>
</div>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/14d516975857dae79a784c4662f67d403c57e256.html">14d516975857dae79a784c4662f67d403c57e256</a>
<b>parent</b> <a href="../commit/75857946d5b00113a8ca2fc2f4dbcbfb9c7f2aee.html">75857946d5b00113a8ca2fc2f4dbcbfb9c7f2aee</a>
<b>Author:</b> rhunk &lt;<a href="mailto:101876869+rhunk@users.noreply.github.com">101876869+rhunk@users.noreply.github.com</a>&gt;
<b>Date:</b>   Sun,  1 Oct 2023 15:55:07 +0200

feat(core/config): dynamic change listener
- organize imports

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">app/src/main/kotlin/me/rhunk/snapenhance/bridge/BridgeService.kt</a></td><td> | </td><td class="num">4</td><td><span class="i">++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">app/src/main/kotlin/me/rhunk/snapenhance/download/DownloadProcessor.kt</a></td><td> | </td><td class="num">9</td><td><span class="i">++</span><span class="d">-------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h2">app/src/main/kotlin/me/rhunk/snapenhance/download/FFMpegProcessor.kt</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h3">app/src/main/kotlin/me/rhunk/snapenhance/messaging/StreaksReminder.kt</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h4">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/Navigation.kt</a></td><td> | </td><td class="num">16</td><td><span class="i">++</span><span class="d">--------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h5">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/downloads/DownloadsSection.kt</a></td><td> | </td><td class="num">31</td><td><span class="i">+++</span><span class="d">----------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h6">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt</a></td><td> | </td><td class="num">50</td><td><span class="i">++++</span><span class="d">----------------------------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h7">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt</a></td><td> | </td><td class="num">26</td><td><span class="i">+++</span><span class="d">-----------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h8">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/ScopeContent.kt</a></td><td> | </td><td class="num">3</td><td><span class="i">+</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h9">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/SocialSection.kt</a></td><td> | </td><td class="num">31</td><td><span class="i">++++</span><span class="d">---------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h10">app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/SetupActivity.kt</a></td><td> | </td><td class="num">8</td><td><span class="i">+</span><span class="d">-------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h11">app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/MappingsScreen.kt</a></td><td> | </td><td class="num">7</td><td><span class="i">+</span><span class="d">------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h12">app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/PermissionsScreen.kt</a></td><td> | </td><td class="num">16</td><td><span class="i">++</span><span class="d">--------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h13">app/src/main/kotlin/me/rhunk/snapenhance/ui/util/AlertDialogs.kt</a></td><td> | </td><td class="num">15</td><td><span class="i">++</span><span class="d">-------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h14">core/src/main/aidl/me/rhunk/snapenhance/bridge/BridgeInterface.aidl</a></td><td> | </td><td class="num">3</td><td><span class="i">+++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h15">core/src/main/aidl/me/rhunk/snapenhance/bridge/ConfigStateListener.aidl</a></td><td> | </td><td class="num">8</td><td><span class="i">++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h16">core/src/main/kotlin/me/rhunk/snapenhance/SnapEnhance.kt</a></td><td> | </td><td class="num">50</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h17">core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/BridgeClient.kt</a></td><td> | </td><td class="num">3</td><td><span class="i">+++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h18">core/src/main/kotlin/me/rhunk/snapenhance/core/config/ConfigObjects.kt</a></td><td> | </td><td class="num">21</td><td><span class="i">+++++++++++++++</span><span class="d">------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h19">core/src/main/kotlin/me/rhunk/snapenhance/core/config/ModConfig.kt</a></td><td> | </td><td class="num">56</td><td><span class="i">++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h20">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/DownloaderConfig.kt</a></td><td> | </td><td class="num">4</td><td><span class="i">++</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h21">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Experimental.kt</a></td><td> | </td><td class="num">11</td><td><span class="i">+++++++</span><span class="d">----</span></td></tr>
<tr><td class="M">M</td><td><a href="#h22">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Global.kt</a></td><td> | </td><td class="num">4</td><td><span class="i">++</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h23">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/MessagingTweaks.kt</a></td><td> | </td><td class="num">8</td><td><span class="i">++++</span><span class="d">----</span></td></tr>
<tr><td class="M">M</td><td><a href="#h24">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/RootConfig.kt</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h25">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Scripting.kt</a></td><td> | </td><td class="num">4</td><td><span class="i">++</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h26">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/UserInterfaceTweaks.kt</a></td><td> | </td><td class="num">20</td><td><span class="i">++++++++++</span><span class="d">----------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h27">core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/DisableVideoLengthRestriction.kt</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h28">core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/Notifications.kt</a></td><td> | </td><td class="num">1</td><td><span class="i"></span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h29">core/src/main/kotlin/me/rhunk/snapenhance/manager/impl/ActionManager.kt</a></td><td> | </td><td class="num">2</td><td><span class="i">+</span><span class="d">-</span></td></tr>
</table></pre><pre>30 files changed, 195 insertions(+), 224 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/bridge/BridgeService.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/bridge/BridgeService.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/bridge/BridgeService.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/bridge/BridgeService.kt</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -193,5 +193,9 @@ class BridgeService : Service() {
</a>                 remoteSideContext.log.error(&quot;Failed to close settings overlay&quot;, it)
             }
         }
<a href="#h0-0-3" id="h0-0-3" class="i">+
</a><a href="#h0-0-4" id="h0-0-4" class="i">+        override fun registerConfigStateListener(listener: ConfigStateListener) {
</a><a href="#h0-0-5" id="h0-0-5" class="i">+            remoteSideContext.config.configStateListener = listener
</a><a href="#h0-0-6" id="h0-0-6" class="i">+        }
</a>     }
 }
<b>diff --git a/<a id="h1" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/download/DownloadProcessor.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/download/DownloadProcessor.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/download/DownloadProcessor.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/download/DownloadProcessor.kt</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -17,15 +17,10 @@ import me.rhunk.snapenhance.Constants
</a> import me.rhunk.snapenhance.RemoteSideContext
 import me.rhunk.snapenhance.bridge.DownloadCallback
 import me.rhunk.snapenhance.core.download.DownloadManagerClient
<a href="#h1-0-3" id="h1-0-3" class="d">-import me.rhunk.snapenhance.data.FileType
</a><a href="#h1-0-4" id="h1-0-4" class="d">-import me.rhunk.snapenhance.core.download.data.DownloadMediaType
</a><a href="#h1-0-5" id="h1-0-5" class="d">-import me.rhunk.snapenhance.core.download.data.DownloadMetadata
</a><a href="#h1-0-6" id="h1-0-6" class="d">-import me.rhunk.snapenhance.core.download.data.DownloadRequest
</a><a href="#h1-0-7" id="h1-0-7" class="d">-import me.rhunk.snapenhance.core.download.data.DownloadStage
</a><a href="#h1-0-8" id="h1-0-8" class="d">-import me.rhunk.snapenhance.core.download.data.InputMedia
</a><a href="#h1-0-9" id="h1-0-9" class="d">-import me.rhunk.snapenhance.core.download.data.SplitMediaAssetType
</a><a href="#h1-0-10" id="h1-0-10" class="i">+import me.rhunk.snapenhance.core.download.data.*
</a> import me.rhunk.snapenhance.core.util.download.RemoteMediaResolver
 import me.rhunk.snapenhance.core.util.snap.MediaDownloaderHelper
<a href="#h1-0-13" id="h1-0-13" class="i">+import me.rhunk.snapenhance.data.FileType
</a> import java.io.File
 import java.io.InputStream
 import java.net.HttpURLConnection
<b>diff --git a/<a id="h2" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/download/FFMpegProcessor.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/download/FFMpegProcessor.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/download/FFMpegProcessor.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/download/FFMpegProcessor.kt</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -4,10 +4,10 @@ import com.arthenica.ffmpegkit.FFmpegKit
</a> import com.arthenica.ffmpegkit.FFmpegSession
 import com.arthenica.ffmpegkit.Level
 import kotlinx.coroutines.suspendCancellableCoroutine
<a href="#h2-0-3" id="h2-0-3" class="d">-import me.rhunk.snapenhance.core.logger.LogLevel
</a> import me.rhunk.snapenhance.LogManager
 import me.rhunk.snapenhance.core.Logger
 import me.rhunk.snapenhance.core.config.impl.DownloaderConfig
<a href="#h2-0-7" id="h2-0-7" class="i">+import me.rhunk.snapenhance.core.logger.LogLevel
</a> import java.io.File
 import java.util.concurrent.Executors
 
<b>diff --git a/<a id="h3" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/messaging/StreaksReminder.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/messaging/StreaksReminder.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/messaging/StreaksReminder.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/messaging/StreaksReminder.kt</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -14,8 +14,8 @@ import me.rhunk.snapenhance.R
</a> import me.rhunk.snapenhance.RemoteSideContext
 import me.rhunk.snapenhance.SharedContextHolder
 import me.rhunk.snapenhance.bridge.ForceStartActivity
<a href="#h3-0-3" id="h3-0-3" class="d">-import me.rhunk.snapenhance.ui.util.ImageRequestHelper
</a> import me.rhunk.snapenhance.core.util.snap.BitmojiSelfie
<a href="#h3-0-5" id="h3-0-5" class="i">+import me.rhunk.snapenhance.ui.util.ImageRequestHelper
</a> 
 class StreaksReminder(
     private val remoteSideContext: RemoteSideContext? = null
<b>diff --git a/<a id="h4" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/Navigation.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/Navigation.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/Navigation.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/Navigation.kt</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -4,22 +4,10 @@ import androidx.compose.animation.core.animateFloatAsState
</a> import androidx.compose.animation.core.tween
 import androidx.compose.animation.fadeIn
 import androidx.compose.animation.fadeOut
<a href="#h4-0-3" id="h4-0-3" class="d">-import androidx.compose.foundation.layout.Box
</a><a href="#h4-0-4" id="h4-0-4" class="d">-import androidx.compose.foundation.layout.PaddingValues
</a><a href="#h4-0-5" id="h4-0-5" class="d">-import androidx.compose.foundation.layout.fillMaxHeight
</a><a href="#h4-0-6" id="h4-0-6" class="d">-import androidx.compose.foundation.layout.height
</a><a href="#h4-0-7" id="h4-0-7" class="d">-import androidx.compose.foundation.layout.padding
</a><a href="#h4-0-8" id="h4-0-8" class="d">-import androidx.compose.foundation.layout.width
</a><a href="#h4-0-9" id="h4-0-9" class="d">-import androidx.compose.foundation.layout.wrapContentWidth
</a><a href="#h4-0-10" id="h4-0-10" class="i">+import androidx.compose.foundation.layout.*
</a> import androidx.compose.material.icons.Icons
 import androidx.compose.material.icons.filled.ArrowBack
<a href="#h4-0-13" id="h4-0-13" class="d">-import androidx.compose.material3.ExperimentalMaterial3Api
</a><a href="#h4-0-14" id="h4-0-14" class="d">-import androidx.compose.material3.Icon
</a><a href="#h4-0-15" id="h4-0-15" class="d">-import androidx.compose.material3.IconButton
</a><a href="#h4-0-16" id="h4-0-16" class="d">-import androidx.compose.material3.NavigationBar
</a><a href="#h4-0-17" id="h4-0-17" class="d">-import androidx.compose.material3.NavigationBarItem
</a><a href="#h4-0-18" id="h4-0-18" class="d">-import androidx.compose.material3.Text
</a><a href="#h4-0-19" id="h4-0-19" class="d">-import androidx.compose.material3.TopAppBar
</a><a href="#h4-0-20" id="h4-0-20" class="i">+import androidx.compose.material3.*
</a> import androidx.compose.runtime.Composable
 import androidx.compose.runtime.getValue
 import androidx.compose.ui.Modifier
<b>diff --git a/<a id="h5" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/downloads/DownloadsSection.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/downloads/DownloadsSection.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/downloads/DownloadsSection.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/downloads/DownloadsSection.kt</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -4,40 +4,15 @@ import android.content.Intent
</a> import android.net.Uri
 import androidx.compose.foundation.Image
 import androidx.compose.foundation.background
<a href="#h5-0-3" id="h5-0-3" class="d">-import androidx.compose.foundation.layout.Arrangement
</a><a href="#h5-0-4" id="h5-0-4" class="d">-import androidx.compose.foundation.layout.Box
</a><a href="#h5-0-5" id="h5-0-5" class="d">-import androidx.compose.foundation.layout.Column
</a><a href="#h5-0-6" id="h5-0-6" class="d">-import androidx.compose.foundation.layout.Row
</a><a href="#h5-0-7" id="h5-0-7" class="d">-import androidx.compose.foundation.layout.RowScope
</a><a href="#h5-0-8" id="h5-0-8" class="d">-import androidx.compose.foundation.layout.Spacer
</a><a href="#h5-0-9" id="h5-0-9" class="d">-import androidx.compose.foundation.layout.fillMaxHeight
</a><a href="#h5-0-10" id="h5-0-10" class="d">-import androidx.compose.foundation.layout.fillMaxSize
</a><a href="#h5-0-11" id="h5-0-11" class="d">-import androidx.compose.foundation.layout.fillMaxWidth
</a><a href="#h5-0-12" id="h5-0-12" class="d">-import androidx.compose.foundation.layout.height
</a><a href="#h5-0-13" id="h5-0-13" class="d">-import androidx.compose.foundation.layout.padding
</a><a href="#h5-0-14" id="h5-0-14" class="i">+import androidx.compose.foundation.layout.*
</a> import androidx.compose.foundation.lazy.LazyColumn
 import androidx.compose.foundation.lazy.rememberLazyListState
 import androidx.compose.material.icons.Icons
 import androidx.compose.material.icons.filled.Delete
 import androidx.compose.material.icons.filled.FilterList
 import androidx.compose.material.icons.filled.OpenInNew
<a href="#h5-0-21" id="h5-0-21" class="d">-import androidx.compose.material3.Card
</a><a href="#h5-0-22" id="h5-0-22" class="d">-import androidx.compose.material3.DropdownMenu
</a><a href="#h5-0-23" id="h5-0-23" class="d">-import androidx.compose.material3.DropdownMenuItem
</a><a href="#h5-0-24" id="h5-0-24" class="d">-import androidx.compose.material3.FilledIconButton
</a><a href="#h5-0-25" id="h5-0-25" class="d">-import androidx.compose.material3.Icon
</a><a href="#h5-0-26" id="h5-0-26" class="d">-import androidx.compose.material3.IconButton
</a><a href="#h5-0-27" id="h5-0-27" class="d">-import androidx.compose.material3.IconButtonDefaults
</a><a href="#h5-0-28" id="h5-0-28" class="d">-import androidx.compose.material3.MaterialTheme
</a><a href="#h5-0-29" id="h5-0-29" class="d">-import androidx.compose.material3.RadioButton
</a><a href="#h5-0-30" id="h5-0-30" class="d">-import androidx.compose.material3.Text
</a><a href="#h5-0-31" id="h5-0-31" class="d">-import androidx.compose.runtime.Composable
</a><a href="#h5-0-32" id="h5-0-32" class="d">-import androidx.compose.runtime.LaunchedEffect
</a><a href="#h5-0-33" id="h5-0-33" class="d">-import androidx.compose.runtime.getValue
</a><a href="#h5-0-34" id="h5-0-34" class="d">-import androidx.compose.runtime.mutableStateOf
</a><a href="#h5-0-35" id="h5-0-35" class="d">-import androidx.compose.runtime.remember
</a><a href="#h5-0-36" id="h5-0-36" class="d">-import androidx.compose.runtime.rememberCoroutineScope
</a><a href="#h5-0-37" id="h5-0-37" class="d">-import androidx.compose.runtime.setValue
</a><a href="#h5-0-38" id="h5-0-38" class="i">+import androidx.compose.material3.*
</a><a href="#h5-0-39" id="h5-0-39" class="i">+import androidx.compose.runtime.*
</a> import androidx.compose.ui.Alignment
 import androidx.compose.ui.Modifier
 import androidx.compose.ui.draw.blur
<b>diff --git a/<a id="h6" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/features/FeaturesSection.kt</a></b>
<a href="#h6-0" id="h6-0" class="h">@@ -6,21 +6,7 @@ import androidx.compose.animation.AnimatedContentTransitionScope
</a> import androidx.compose.animation.core.tween
 import androidx.compose.foundation.background
 import androidx.compose.foundation.clickable
<a href="#h6-0-3" id="h6-0-3" class="d">-import androidx.compose.foundation.layout.Arrangement
</a><a href="#h6-0-4" id="h6-0-4" class="d">-import androidx.compose.foundation.layout.Box
</a><a href="#h6-0-5" id="h6-0-5" class="d">-import androidx.compose.foundation.layout.Column
</a><a href="#h6-0-6" id="h6-0-6" class="d">-import androidx.compose.foundation.layout.PaddingValues
</a><a href="#h6-0-7" id="h6-0-7" class="d">-import androidx.compose.foundation.layout.Row
</a><a href="#h6-0-8" id="h6-0-8" class="d">-import androidx.compose.foundation.layout.RowScope
</a><a href="#h6-0-9" id="h6-0-9" class="d">-import androidx.compose.foundation.layout.Spacer
</a><a href="#h6-0-10" id="h6-0-10" class="d">-import androidx.compose.foundation.layout.fillMaxHeight
</a><a href="#h6-0-11" id="h6-0-11" class="d">-import androidx.compose.foundation.layout.fillMaxSize
</a><a href="#h6-0-12" id="h6-0-12" class="d">-import androidx.compose.foundation.layout.fillMaxWidth
</a><a href="#h6-0-13" id="h6-0-13" class="d">-import androidx.compose.foundation.layout.height
</a><a href="#h6-0-14" id="h6-0-14" class="d">-import androidx.compose.foundation.layout.padding
</a><a href="#h6-0-15" id="h6-0-15" class="d">-import androidx.compose.foundation.layout.width
</a><a href="#h6-0-16" id="h6-0-16" class="d">-import androidx.compose.foundation.layout.widthIn
</a><a href="#h6-0-17" id="h6-0-17" class="d">-import androidx.compose.foundation.layout.wrapContentWidth
</a><a href="#h6-0-18" id="h6-0-18" class="i">+import androidx.compose.foundation.layout.*
</a> import androidx.compose.foundation.lazy.LazyColumn
 import androidx.compose.foundation.lazy.items
 import androidx.compose.foundation.shape.RoundedCornerShape
<a href="#h6-1" id="h6-1" class="h">@@ -32,30 +18,8 @@ import androidx.compose.material.icons.filled.MoreVert
</a> import androidx.compose.material.icons.filled.OpenInNew
 import androidx.compose.material.icons.filled.Search
 import androidx.compose.material.icons.rounded.Save
<a href="#h6-1-3" id="h6-1-3" class="d">-import androidx.compose.material3.BottomSheetScaffoldState
</a><a href="#h6-1-4" id="h6-1-4" class="d">-import androidx.compose.material3.Card
</a><a href="#h6-1-5" id="h6-1-5" class="d">-import androidx.compose.material3.DropdownMenu
</a><a href="#h6-1-6" id="h6-1-6" class="d">-import androidx.compose.material3.DropdownMenuItem
</a><a href="#h6-1-7" id="h6-1-7" class="d">-import androidx.compose.material3.ExperimentalMaterial3Api
</a><a href="#h6-1-8" id="h6-1-8" class="d">-import androidx.compose.material3.FilledIconButton
</a><a href="#h6-1-9" id="h6-1-9" class="d">-import androidx.compose.material3.FloatingActionButton
</a><a href="#h6-1-10" id="h6-1-10" class="d">-import androidx.compose.material3.Icon
</a><a href="#h6-1-11" id="h6-1-11" class="d">-import androidx.compose.material3.IconButton
</a><a href="#h6-1-12" id="h6-1-12" class="d">-import androidx.compose.material3.MaterialTheme
</a><a href="#h6-1-13" id="h6-1-13" class="d">-import androidx.compose.material3.Scaffold
</a><a href="#h6-1-14" id="h6-1-14" class="d">-import androidx.compose.material3.SnackbarHost
</a><a href="#h6-1-15" id="h6-1-15" class="d">-import androidx.compose.material3.Switch
</a><a href="#h6-1-16" id="h6-1-16" class="d">-import androidx.compose.material3.Text
</a><a href="#h6-1-17" id="h6-1-17" class="d">-import androidx.compose.material3.TextField
</a><a href="#h6-1-18" id="h6-1-18" class="d">-import androidx.compose.material3.TextFieldDefaults
</a><a href="#h6-1-19" id="h6-1-19" class="d">-import androidx.compose.material3.rememberBottomSheetScaffoldState
</a><a href="#h6-1-20" id="h6-1-20" class="d">-import androidx.compose.runtime.Composable
</a><a href="#h6-1-21" id="h6-1-21" class="d">-import androidx.compose.runtime.LaunchedEffect
</a><a href="#h6-1-22" id="h6-1-22" class="d">-import androidx.compose.runtime.getValue
</a><a href="#h6-1-23" id="h6-1-23" class="d">-import androidx.compose.runtime.mutableStateOf
</a><a href="#h6-1-24" id="h6-1-24" class="d">-import androidx.compose.runtime.remember
</a><a href="#h6-1-25" id="h6-1-25" class="d">-import androidx.compose.runtime.rememberCoroutineScope
</a><a href="#h6-1-26" id="h6-1-26" class="d">-import androidx.compose.runtime.setValue
</a><a href="#h6-1-27" id="h6-1-27" class="i">+import androidx.compose.material3.*
</a><a href="#h6-1-28" id="h6-1-28" class="i">+import androidx.compose.runtime.*
</a> import androidx.compose.ui.Alignment
 import androidx.compose.ui.Modifier
 import androidx.compose.ui.focus.FocusRequester
<a href="#h6-2" id="h6-2" class="h">@@ -73,13 +37,7 @@ import androidx.navigation.navigation
</a> import kotlinx.coroutines.Job
 import kotlinx.coroutines.delay
 import kotlinx.coroutines.launch
<a href="#h6-2-3" id="h6-2-3" class="d">-import me.rhunk.snapenhance.core.config.ConfigContainer
</a><a href="#h6-2-4" id="h6-2-4" class="d">-import me.rhunk.snapenhance.core.config.ConfigFlag
</a><a href="#h6-2-5" id="h6-2-5" class="d">-import me.rhunk.snapenhance.core.config.DataProcessors
</a><a href="#h6-2-6" id="h6-2-6" class="d">-import me.rhunk.snapenhance.core.config.FeatureNotice
</a><a href="#h6-2-7" id="h6-2-7" class="d">-import me.rhunk.snapenhance.core.config.PropertyKey
</a><a href="#h6-2-8" id="h6-2-8" class="d">-import me.rhunk.snapenhance.core.config.PropertyPair
</a><a href="#h6-2-9" id="h6-2-9" class="d">-import me.rhunk.snapenhance.core.config.PropertyValue
</a><a href="#h6-2-10" id="h6-2-10" class="i">+import me.rhunk.snapenhance.core.config.*
</a> import me.rhunk.snapenhance.ui.manager.MainActivity
 import me.rhunk.snapenhance.ui.manager.Section
 import me.rhunk.snapenhance.ui.util.*
<b>diff --git a/<a id="h7" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/AddFriendDialog.kt</a></b>
<a href="#h7-0" id="h7-0" class="h">@@ -1,33 +1,13 @@
</a> package me.rhunk.snapenhance.ui.manager.sections.social
 
 import androidx.compose.foundation.clickable
<a href="#h7-0-3" id="h7-0-3" class="d">-import androidx.compose.foundation.layout.Arrangement
</a><a href="#h7-0-4" id="h7-0-4" class="d">-import androidx.compose.foundation.layout.Column
</a><a href="#h7-0-5" id="h7-0-5" class="d">-import androidx.compose.foundation.layout.Row
</a><a href="#h7-0-6" id="h7-0-6" class="d">-import androidx.compose.foundation.layout.fillMaxSize
</a><a href="#h7-0-7" id="h7-0-7" class="d">-import androidx.compose.foundation.layout.fillMaxWidth
</a><a href="#h7-0-8" id="h7-0-8" class="d">-import androidx.compose.foundation.layout.padding
</a><a href="#h7-0-9" id="h7-0-9" class="d">-import androidx.compose.foundation.layout.size
</a><a href="#h7-0-10" id="h7-0-10" class="i">+import androidx.compose.foundation.layout.*
</a> import androidx.compose.foundation.lazy.LazyColumn
 import androidx.compose.foundation.text.KeyboardOptions
 import androidx.compose.material.icons.Icons
 import androidx.compose.material.icons.filled.Search
<a href="#h7-0-15" id="h7-0-15" class="d">-import androidx.compose.material3.Card
</a><a href="#h7-0-16" id="h7-0-16" class="d">-import androidx.compose.material3.CardDefaults
</a><a href="#h7-0-17" id="h7-0-17" class="d">-import androidx.compose.material3.Checkbox
</a><a href="#h7-0-18" id="h7-0-18" class="d">-import androidx.compose.material3.CircularProgressIndicator
</a><a href="#h7-0-19" id="h7-0-19" class="d">-import androidx.compose.material3.Icon
</a><a href="#h7-0-20" id="h7-0-20" class="d">-import androidx.compose.material3.MaterialTheme
</a><a href="#h7-0-21" id="h7-0-21" class="d">-import androidx.compose.material3.Text
</a><a href="#h7-0-22" id="h7-0-22" class="d">-import androidx.compose.material3.TextField
</a><a href="#h7-0-23" id="h7-0-23" class="d">-import androidx.compose.runtime.Composable
</a><a href="#h7-0-24" id="h7-0-24" class="d">-import androidx.compose.runtime.LaunchedEffect
</a><a href="#h7-0-25" id="h7-0-25" class="d">-import androidx.compose.runtime.MutableState
</a><a href="#h7-0-26" id="h7-0-26" class="d">-import androidx.compose.runtime.getValue
</a><a href="#h7-0-27" id="h7-0-27" class="d">-import androidx.compose.runtime.mutableStateOf
</a><a href="#h7-0-28" id="h7-0-28" class="d">-import androidx.compose.runtime.remember
</a><a href="#h7-0-29" id="h7-0-29" class="d">-import androidx.compose.runtime.rememberCoroutineScope
</a><a href="#h7-0-30" id="h7-0-30" class="d">-import androidx.compose.runtime.setValue
</a><a href="#h7-0-31" id="h7-0-31" class="i">+import androidx.compose.material3.*
</a><a href="#h7-0-32" id="h7-0-32" class="i">+import androidx.compose.runtime.*
</a> import androidx.compose.ui.Alignment
 import androidx.compose.ui.Modifier
 import androidx.compose.ui.layout.onGloballyPositioned
<b>diff --git a/<a id="h8" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/ScopeContent.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/ScopeContent.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/ScopeContent.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/ScopeContent.kt</a></b>
<a href="#h8-0" id="h8-0" class="h">@@ -12,7 +12,6 @@ import androidx.compose.runtime.Composable
</a> import androidx.compose.runtime.getValue
 import androidx.compose.runtime.mutableStateOf
 import androidx.compose.runtime.remember
<a href="#h8-0-3" id="h8-0-3" class="d">-import androidx.compose.runtime.rememberCoroutineScope
</a> import androidx.compose.runtime.setValue
 import androidx.compose.ui.Alignment
 import androidx.compose.ui.Modifier
<a href="#h8-1" id="h8-1" class="h">@@ -25,9 +24,9 @@ import kotlinx.coroutines.launch
</a> import me.rhunk.snapenhance.RemoteSideContext
 import me.rhunk.snapenhance.core.messaging.MessagingRuleType
 import me.rhunk.snapenhance.core.messaging.SocialScope
<a href="#h8-1-3" id="h8-1-3" class="d">-import me.rhunk.snapenhance.ui.util.BitmojiImage
</a> import me.rhunk.snapenhance.core.util.snap.BitmojiSelfie
 import me.rhunk.snapenhance.ui.util.AlertDialogs
<a href="#h8-1-6" id="h8-1-6" class="i">+import me.rhunk.snapenhance.ui.util.BitmojiImage
</a> import me.rhunk.snapenhance.ui.util.Dialog
 import kotlin.io.encoding.Base64
 import kotlin.io.encoding.ExperimentalEncodingApi
<b>diff --git a/<a id="h9" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/SocialSection.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/SocialSection.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/SocialSection.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/manager/sections/social/SocialSection.kt</a></b>
<a href="#h9-0" id="h9-0" class="h">@@ -2,16 +2,7 @@ package me.rhunk.snapenhance.ui.manager.sections.social
</a> 
 import androidx.compose.foundation.ExperimentalFoundationApi
 import androidx.compose.foundation.clickable
<a href="#h9-0-3" id="h9-0-3" class="d">-import androidx.compose.foundation.layout.Arrangement
</a><a href="#h9-0-4" id="h9-0-4" class="d">-import androidx.compose.foundation.layout.Column
</a><a href="#h9-0-5" id="h9-0-5" class="d">-import androidx.compose.foundation.layout.PaddingValues
</a><a href="#h9-0-6" id="h9-0-6" class="d">-import androidx.compose.foundation.layout.Row
</a><a href="#h9-0-7" id="h9-0-7" class="d">-import androidx.compose.foundation.layout.RowScope
</a><a href="#h9-0-8" id="h9-0-8" class="d">-import androidx.compose.foundation.layout.fillMaxHeight
</a><a href="#h9-0-9" id="h9-0-9" class="d">-import androidx.compose.foundation.layout.fillMaxSize
</a><a href="#h9-0-10" id="h9-0-10" class="d">-import androidx.compose.foundation.layout.fillMaxWidth
</a><a href="#h9-0-11" id="h9-0-11" class="d">-import androidx.compose.foundation.layout.height
</a><a href="#h9-0-12" id="h9-0-12" class="d">-import androidx.compose.foundation.layout.padding
</a><a href="#h9-0-13" id="h9-0-13" class="i">+import androidx.compose.foundation.layout.*
</a> import androidx.compose.foundation.lazy.LazyColumn
 import androidx.compose.foundation.pager.HorizontalPager
 import androidx.compose.foundation.pager.rememberPagerState
<a href="#h9-1" id="h9-1" class="h">@@ -19,22 +10,8 @@ import androidx.compose.foundation.shape.RoundedCornerShape
</a> import androidx.compose.material.icons.Icons
 import androidx.compose.material.icons.rounded.Add
 import androidx.compose.material.icons.rounded.DeleteForever
<a href="#h9-1-3" id="h9-1-3" class="d">-import androidx.compose.material3.Card
</a><a href="#h9-1-4" id="h9-1-4" class="d">-import androidx.compose.material3.FloatingActionButton
</a><a href="#h9-1-5" id="h9-1-5" class="d">-import androidx.compose.material3.Icon
</a><a href="#h9-1-6" id="h9-1-6" class="d">-import androidx.compose.material3.IconButton
</a><a href="#h9-1-7" id="h9-1-7" class="d">-import androidx.compose.material3.MaterialTheme
</a><a href="#h9-1-8" id="h9-1-8" class="d">-import androidx.compose.material3.Scaffold
</a><a href="#h9-1-9" id="h9-1-9" class="d">-import androidx.compose.material3.Tab
</a><a href="#h9-1-10" id="h9-1-10" class="d">-import androidx.compose.material3.TabRow
</a><a href="#h9-1-11" id="h9-1-11" class="d">-import androidx.compose.material3.TabRowDefaults
</a><a href="#h9-1-12" id="h9-1-12" class="d">-import androidx.compose.material3.Text
</a><a href="#h9-1-13" id="h9-1-13" class="d">-import androidx.compose.runtime.Composable
</a><a href="#h9-1-14" id="h9-1-14" class="d">-import androidx.compose.runtime.getValue
</a><a href="#h9-1-15" id="h9-1-15" class="d">-import androidx.compose.runtime.mutableStateOf
</a><a href="#h9-1-16" id="h9-1-16" class="d">-import androidx.compose.runtime.remember
</a><a href="#h9-1-17" id="h9-1-17" class="d">-import androidx.compose.runtime.rememberCoroutineScope
</a><a href="#h9-1-18" id="h9-1-18" class="d">-import androidx.compose.runtime.setValue
</a><a href="#h9-1-19" id="h9-1-19" class="i">+import androidx.compose.material3.*
</a><a href="#h9-1-20" id="h9-1-20" class="i">+import androidx.compose.runtime.*
</a> import androidx.compose.ui.Alignment
 import androidx.compose.ui.Modifier
 import androidx.compose.ui.graphics.vector.ImageVector
<a href="#h9-2" id="h9-2" class="h">@@ -53,11 +30,11 @@ import me.rhunk.snapenhance.R
</a> import me.rhunk.snapenhance.core.messaging.MessagingFriendInfo
 import me.rhunk.snapenhance.core.messaging.MessagingGroupInfo
 import me.rhunk.snapenhance.core.messaging.SocialScope
<a href="#h9-2-3" id="h9-2-3" class="i">+import me.rhunk.snapenhance.core.util.snap.BitmojiSelfie
</a> import me.rhunk.snapenhance.ui.manager.Section
 import me.rhunk.snapenhance.ui.util.AlertDialogs
 import me.rhunk.snapenhance.ui.util.BitmojiImage
 import me.rhunk.snapenhance.ui.util.pagerTabIndicatorOffset
<a href="#h9-2-8" id="h9-2-8" class="d">-import me.rhunk.snapenhance.core.util.snap.BitmojiSelfie
</a> 
 class SocialSection : Section() {
     private lateinit var friendList: List&lt;MessagingFriendInfo&gt;
<b>diff --git a/<a id="h10" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/SetupActivity.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/SetupActivity.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/SetupActivity.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/SetupActivity.kt</a></b>
<a href="#h10-0" id="h10-0" class="h">@@ -7,13 +7,7 @@ import androidx.activity.compose.BackHandler
</a> import androidx.activity.compose.setContent
 import androidx.compose.animation.core.animateFloatAsState
 import androidx.compose.foundation.background
<a href="#h10-0-3" id="h10-0-3" class="d">-import androidx.compose.foundation.layout.Arrangement
</a><a href="#h10-0-4" id="h10-0-4" class="d">-import androidx.compose.foundation.layout.Column
</a><a href="#h10-0-5" id="h10-0-5" class="d">-import androidx.compose.foundation.layout.fillMaxSize
</a><a href="#h10-0-6" id="h10-0-6" class="d">-import androidx.compose.foundation.layout.fillMaxWidth
</a><a href="#h10-0-7" id="h10-0-7" class="d">-import androidx.compose.foundation.layout.height
</a><a href="#h10-0-8" id="h10-0-8" class="d">-import androidx.compose.foundation.layout.padding
</a><a href="#h10-0-9" id="h10-0-9" class="d">-import androidx.compose.foundation.layout.width
</a><a href="#h10-0-10" id="h10-0-10" class="i">+import androidx.compose.foundation.layout.*
</a> import androidx.compose.material.icons.Icons
 import androidx.compose.material.icons.filled.ArrowForwardIos
 import androidx.compose.material.icons.filled.Check
<b>diff --git a/<a id="h11" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/MappingsScreen.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/MappingsScreen.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/MappingsScreen.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/MappingsScreen.kt</a></b>
<a href="#h11-0" id="h11-0" class="h">@@ -6,12 +6,7 @@ import androidx.compose.material3.Button
</a> import androidx.compose.material3.CircularProgressIndicator
 import androidx.compose.material3.MaterialTheme
 import androidx.compose.material3.Text
<a href="#h11-0-3" id="h11-0-3" class="d">-import androidx.compose.runtime.Composable
</a><a href="#h11-0-4" id="h11-0-4" class="d">-import androidx.compose.runtime.getValue
</a><a href="#h11-0-5" id="h11-0-5" class="d">-import androidx.compose.runtime.mutableStateOf
</a><a href="#h11-0-6" id="h11-0-6" class="d">-import androidx.compose.runtime.remember
</a><a href="#h11-0-7" id="h11-0-7" class="d">-import androidx.compose.runtime.rememberCoroutineScope
</a><a href="#h11-0-8" id="h11-0-8" class="d">-import androidx.compose.runtime.setValue
</a><a href="#h11-0-9" id="h11-0-9" class="i">+import androidx.compose.runtime.*
</a> import androidx.compose.ui.Modifier
 import androidx.compose.ui.unit.dp
 import androidx.compose.ui.window.Dialog
<b>diff --git a/<a id="h12" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/PermissionsScreen.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/PermissionsScreen.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/PermissionsScreen.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/setup/screens/impl/PermissionsScreen.kt</a></b>
<a href="#h12-0" id="h12-0" class="h">@@ -10,27 +10,15 @@ import android.os.Build
</a> import android.os.PowerManager
 import android.provider.Settings
 import androidx.activity.ComponentActivity
<a href="#h12-0-3" id="h12-0-3" class="d">-import androidx.compose.foundation.layout.Arrangement
</a><a href="#h12-0-4" id="h12-0-4" class="d">-import androidx.compose.foundation.layout.Column
</a><a href="#h12-0-5" id="h12-0-5" class="d">-import androidx.compose.foundation.layout.Row
</a><a href="#h12-0-6" id="h12-0-6" class="d">-import androidx.compose.foundation.layout.fillMaxWidth
</a><a href="#h12-0-7" id="h12-0-7" class="d">-import androidx.compose.foundation.layout.padding
</a><a href="#h12-0-8" id="h12-0-8" class="d">-import androidx.compose.foundation.layout.size
</a><a href="#h12-0-9" id="h12-0-9" class="i">+import androidx.compose.foundation.layout.*
</a> import androidx.compose.material.icons.Icons
 import androidx.compose.material.icons.filled.Check
 import androidx.compose.material3.Button
 import androidx.compose.material3.Icon
 import androidx.compose.material3.OutlinedCard
 import androidx.compose.material3.Text
<a href="#h12-0-16" id="h12-0-16" class="d">-import androidx.compose.runtime.Composable
</a><a href="#h12-0-17" id="h12-0-17" class="d">-import androidx.compose.runtime.LaunchedEffect
</a><a href="#h12-0-18" id="h12-0-18" class="d">-import androidx.compose.runtime.getValue
</a><a href="#h12-0-19" id="h12-0-19" class="d">-import androidx.compose.runtime.mutableStateOf
</a><a href="#h12-0-20" id="h12-0-20" class="d">-import androidx.compose.runtime.remember
</a><a href="#h12-0-21" id="h12-0-21" class="d">-import androidx.compose.runtime.rememberCoroutineScope
</a><a href="#h12-0-22" id="h12-0-22" class="d">-import androidx.compose.runtime.setValue
</a><a href="#h12-0-23" id="h12-0-23" class="i">+import androidx.compose.runtime.*
</a> import androidx.compose.ui.Modifier
<a href="#h12-0-25" id="h12-0-25" class="d">-import androidx.compose.ui.graphics.Color
</a> import androidx.compose.ui.unit.dp
 import kotlinx.coroutines.launch
 import me.rhunk.snapenhance.ui.setup.screens.SetupScreen
<b>diff --git a/<a id="h13" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/util/AlertDialogs.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/util/AlertDialogs.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/ui/util/AlertDialogs.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/ui/util/AlertDialogs.kt</a></b>
<a href="#h13-0" id="h13-0" class="h">@@ -2,21 +2,10 @@ package me.rhunk.snapenhance.ui.util
</a> 
 import androidx.compose.foundation.ScrollState
 import androidx.compose.foundation.clickable
<a href="#h13-0-3" id="h13-0-3" class="d">-import androidx.compose.foundation.layout.Arrangement
</a><a href="#h13-0-4" id="h13-0-4" class="d">-import androidx.compose.foundation.layout.Column
</a><a href="#h13-0-5" id="h13-0-5" class="d">-import androidx.compose.foundation.layout.ColumnScope
</a><a href="#h13-0-6" id="h13-0-6" class="d">-import androidx.compose.foundation.layout.Row
</a><a href="#h13-0-7" id="h13-0-7" class="d">-import androidx.compose.foundation.layout.fillMaxWidth
</a><a href="#h13-0-8" id="h13-0-8" class="d">-import androidx.compose.foundation.layout.padding
</a><a href="#h13-0-9" id="h13-0-9" class="i">+import androidx.compose.foundation.layout.*
</a> import androidx.compose.foundation.text.KeyboardOptions
 import androidx.compose.foundation.verticalScroll
<a href="#h13-0-12" id="h13-0-12" class="d">-import androidx.compose.material3.Button
</a><a href="#h13-0-13" id="h13-0-13" class="d">-import androidx.compose.material3.Card
</a><a href="#h13-0-14" id="h13-0-14" class="d">-import androidx.compose.material3.MaterialTheme
</a><a href="#h13-0-15" id="h13-0-15" class="d">-import androidx.compose.material3.RadioButton
</a><a href="#h13-0-16" id="h13-0-16" class="d">-import androidx.compose.material3.Switch
</a><a href="#h13-0-17" id="h13-0-17" class="d">-import androidx.compose.material3.Text
</a><a href="#h13-0-18" id="h13-0-18" class="d">-import androidx.compose.material3.TextField
</a><a href="#h13-0-19" id="h13-0-19" class="i">+import androidx.compose.material3.*
</a> import androidx.compose.runtime.Composable
 import androidx.compose.runtime.getValue
 import androidx.compose.runtime.mutableStateOf
<b>diff --git a/<a id="h14" href="../file/core/src/main/aidl/me/rhunk/snapenhance/bridge/BridgeInterface.aidl.html">core/src/main/aidl/me/rhunk/snapenhance/bridge/BridgeInterface.aidl</a> b/<a href="../file/core/src/main/aidl/me/rhunk/snapenhance/bridge/BridgeInterface.aidl.html">core/src/main/aidl/me/rhunk/snapenhance/bridge/BridgeInterface.aidl</a></b>
<a href="#h14-0" id="h14-0" class="h">@@ -6,6 +6,7 @@ import me.rhunk.snapenhance.bridge.SyncCallback;
</a> import me.rhunk.snapenhance.bridge.scripting.IScripting;
 import me.rhunk.snapenhance.bridge.e2ee.E2eeInterface;
 import me.rhunk.snapenhance.bridge.MessageLoggerInterface;
<a href="#h14-0-3" id="h14-0-3" class="i">+import me.rhunk.snapenhance.bridge.ConfigStateListener;
</a> 
 interface BridgeInterface {
     /**
<a href="#h14-1" id="h14-1" class="h">@@ -82,4 +83,6 @@ interface BridgeInterface {
</a>     void openSettingsOverlay();
 
     void closeSettingsOverlay();
<a href="#h14-1-3" id="h14-1-3" class="i">+
</a><a href="#h14-1-4" id="h14-1-4" class="i">+    void registerConfigStateListener(in ConfigStateListener listener);
</a> } 
\ No newline at end of file
<b>diff --git a/<a id="h15" href="../file/core/src/main/aidl/me/rhunk/snapenhance/bridge/ConfigStateListener.aidl.html">core/src/main/aidl/me/rhunk/snapenhance/bridge/ConfigStateListener.aidl</a> b/<a href="../file/core/src/main/aidl/me/rhunk/snapenhance/bridge/ConfigStateListener.aidl.html">core/src/main/aidl/me/rhunk/snapenhance/bridge/ConfigStateListener.aidl</a></b>
<a href="#h15-0" id="h15-0" class="h">@@ -0,0 +1,7 @@
</a><a href="#h15-0-0" id="h15-0-0" class="i">+package me.rhunk.snapenhance.bridge;
</a><a href="#h15-0-1" id="h15-0-1" class="i">+
</a><a href="#h15-0-2" id="h15-0-2" class="i">+oneway interface ConfigStateListener {
</a><a href="#h15-0-3" id="h15-0-3" class="i">+    void onConfigChanged();
</a><a href="#h15-0-4" id="h15-0-4" class="i">+    void onRestartRequired();
</a><a href="#h15-0-5" id="h15-0-5" class="i">+    void onCleanCacheRequired();
</a><a href="#h15-0-6" id="h15-0-6" class="i">+}</a><a href="#h15-0-7" id="h15-0-7" class="i">+
\ No newline at end of file
</a><b>diff --git a/<a id="h16" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/SnapEnhance.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/SnapEnhance.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/SnapEnhance.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/SnapEnhance.kt</a></b>
<a href="#h16-0" id="h16-0" class="h">@@ -7,6 +7,8 @@ import kotlinx.coroutines.CoroutineScope
</a> import kotlinx.coroutines.Dispatchers
 import kotlinx.coroutines.launch
 import kotlinx.coroutines.runBlocking
<a href="#h16-0-3" id="h16-0-3" class="i">+import me.rhunk.snapenhance.action.EnumAction
</a><a href="#h16-0-4" id="h16-0-4" class="i">+import me.rhunk.snapenhance.bridge.ConfigStateListener
</a> import me.rhunk.snapenhance.bridge.SyncCallback
 import me.rhunk.snapenhance.core.Logger
 import me.rhunk.snapenhance.core.bridge.BridgeClient
<a href="#h16-1" id="h16-1" class="h">@@ -30,6 +32,7 @@ class SnapEnhance {
</a>     }
     private val appContext = ModContext()
     private var isBridgeInitialized = false
<a href="#h16-1-3" id="h16-1-3" class="i">+    private var isActivityPaused = false
</a> 
     private fun hookMainActivity(methodName: String, stage: HookStage = HookStage.AFTER, block: Activity.() -&gt; Unit) {
         Activity::class.java.hook(methodName, stage, { isBridgeInitialized }) { param -&gt;
<a href="#h16-2" id="h16-2" class="h">@@ -84,12 +87,14 @@ class SnapEnhance {
</a> 
         hookMainActivity(&quot;onPause&quot;) {
             appContext.bridgeClient.closeSettingsOverlay()
<a href="#h16-2-3" id="h16-2-3" class="i">+            isActivityPaused = true
</a>         }
 
         var activityWasResumed = false
         //we need to reload the config when the app is resumed
         //FIXME: called twice at first launch
         hookMainActivity(&quot;onResume&quot;) {
<a href="#h16-2-10" id="h16-2-10" class="i">+            isActivityPaused = false
</a>             if (!activityWasResumed) {
                 activityWasResumed = true
                 return@hookMainActivity
<a href="#h16-3" id="h16-3" class="h">@@ -104,6 +109,8 @@ class SnapEnhance {
</a>     private fun init(scope: CoroutineScope) {
         with(appContext) {
             reloadConfig()
<a href="#h16-3-3" id="h16-3-3" class="i">+            actionManager.init()
</a><a href="#h16-3-4" id="h16-3-4" class="i">+            initConfigListener()
</a>             scope.launch(Dispatchers.IO) {
                 initNative()
                 translation.userLocale = getConfigLocale()
<a href="#h16-4" id="h16-4" class="h">@@ -125,7 +132,6 @@ class SnapEnhance {
</a>         measureTimeMillis {
             with(appContext) {
                 features.onActivityCreate()
<a href="#h16-4-3" id="h16-4-3" class="d">-                actionManager.init()
</a>                 scriptRuntime.eachModule { callFunction(&quot;module.onSnapActivity&quot;, mainActivity!!) }
             }
         }.also { time -&gt;
<a href="#h16-5" id="h16-5" class="h">@@ -148,6 +154,48 @@ class SnapEnhance {
</a>         }
     }
 
<a href="#h16-5-3" id="h16-5-3" class="i">+    private fun initConfigListener() {
</a><a href="#h16-5-4" id="h16-5-4" class="i">+        val tasks = linkedSetOf&lt;() -&gt; Unit&gt;()
</a><a href="#h16-5-5" id="h16-5-5" class="i">+        hookMainActivity(&quot;onResume&quot;) {
</a><a href="#h16-5-6" id="h16-5-6" class="i">+            tasks.forEach { it() }
</a><a href="#h16-5-7" id="h16-5-7" class="i">+        }
</a><a href="#h16-5-8" id="h16-5-8" class="i">+
</a><a href="#h16-5-9" id="h16-5-9" class="i">+        fun runLater(task: () -&gt; Unit) {
</a><a href="#h16-5-10" id="h16-5-10" class="i">+            if (isActivityPaused) {
</a><a href="#h16-5-11" id="h16-5-11" class="i">+                tasks.add(task)
</a><a href="#h16-5-12" id="h16-5-12" class="i">+            } else {
</a><a href="#h16-5-13" id="h16-5-13" class="i">+                task()
</a><a href="#h16-5-14" id="h16-5-14" class="i">+            }
</a><a href="#h16-5-15" id="h16-5-15" class="i">+        }
</a><a href="#h16-5-16" id="h16-5-16" class="i">+
</a><a href="#h16-5-17" id="h16-5-17" class="i">+        appContext.apply {
</a><a href="#h16-5-18" id="h16-5-18" class="i">+            bridgeClient.registerConfigStateListener(object: ConfigStateListener.Stub() {
</a><a href="#h16-5-19" id="h16-5-19" class="i">+                override fun onConfigChanged() {
</a><a href="#h16-5-20" id="h16-5-20" class="i">+                    log.verbose(&quot;onConfigChanged&quot;)
</a><a href="#h16-5-21" id="h16-5-21" class="i">+                    reloadConfig()
</a><a href="#h16-5-22" id="h16-5-22" class="i">+                }
</a><a href="#h16-5-23" id="h16-5-23" class="i">+
</a><a href="#h16-5-24" id="h16-5-24" class="i">+                override fun onRestartRequired() {
</a><a href="#h16-5-25" id="h16-5-25" class="i">+                    log.verbose(&quot;onRestartRequired&quot;)
</a><a href="#h16-5-26" id="h16-5-26" class="i">+                    runLater {
</a><a href="#h16-5-27" id="h16-5-27" class="i">+                        log.verbose(&quot;softRestart&quot;)
</a><a href="#h16-5-28" id="h16-5-28" class="i">+                        softRestartApp(saveSettings = false)
</a><a href="#h16-5-29" id="h16-5-29" class="i">+                    }
</a><a href="#h16-5-30" id="h16-5-30" class="i">+                }
</a><a href="#h16-5-31" id="h16-5-31" class="i">+
</a><a href="#h16-5-32" id="h16-5-32" class="i">+                override fun onCleanCacheRequired() {
</a><a href="#h16-5-33" id="h16-5-33" class="i">+                    log.verbose(&quot;onCleanCacheRequired&quot;)
</a><a href="#h16-5-34" id="h16-5-34" class="i">+                    tasks.clear()
</a><a href="#h16-5-35" id="h16-5-35" class="i">+                    runLater {
</a><a href="#h16-5-36" id="h16-5-36" class="i">+                        log.verbose(&quot;cleanCache&quot;)
</a><a href="#h16-5-37" id="h16-5-37" class="i">+                        actionManager.execute(EnumAction.CLEAN_CACHE)
</a><a href="#h16-5-38" id="h16-5-38" class="i">+                    }
</a><a href="#h16-5-39" id="h16-5-39" class="i">+                }
</a><a href="#h16-5-40" id="h16-5-40" class="i">+            })
</a><a href="#h16-5-41" id="h16-5-41" class="i">+        }
</a><a href="#h16-5-42" id="h16-5-42" class="i">+
</a><a href="#h16-5-43" id="h16-5-43" class="i">+    }
</a><a href="#h16-5-44" id="h16-5-44" class="i">+
</a>     private fun syncRemote() {
         appContext.executeAsync {
             bridgeClient.sync(object : SyncCallback.Stub() {
<b>diff --git a/<a id="h17" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/BridgeClient.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/BridgeClient.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/BridgeClient.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/bridge/BridgeClient.kt</a></b>
<a href="#h17-0" id="h17-0" class="h">@@ -12,6 +12,7 @@ import android.os.IBinder
</a> import de.robv.android.xposed.XposedHelpers
 import me.rhunk.snapenhance.ModContext
 import me.rhunk.snapenhance.bridge.BridgeInterface
<a href="#h17-0-3" id="h17-0-3" class="i">+import me.rhunk.snapenhance.bridge.ConfigStateListener
</a> import me.rhunk.snapenhance.bridge.DownloadCallback
 import me.rhunk.snapenhance.bridge.SyncCallback
 import me.rhunk.snapenhance.bridge.e2ee.E2eeInterface
<a href="#h17-1" id="h17-1" class="h">@@ -144,4 +145,6 @@ class BridgeClient(
</a> 
     fun openSettingsOverlay() = service.openSettingsOverlay()
     fun closeSettingsOverlay() = service.closeSettingsOverlay()
<a href="#h17-1-3" id="h17-1-3" class="i">+
</a><a href="#h17-1-4" id="h17-1-4" class="i">+    fun registerConfigStateListener(listener: ConfigStateListener) = service.registerConfigStateListener(listener)
</a> }
<b>diff --git a/<a id="h18" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/ConfigObjects.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/ConfigObjects.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/ConfigObjects.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/ConfigObjects.kt</a></b>
<a href="#h18-0" id="h18-0" class="h">@@ -22,10 +22,12 @@ enum class FeatureNotice(
</a> enum class ConfigFlag(
     val id: Int
 ) {
<a href="#h18-0-3" id="h18-0-3" class="d">-    NO_TRANSLATE(0b0001),
</a><a href="#h18-0-4" id="h18-0-4" class="d">-    HIDDEN(0b0010),
</a><a href="#h18-0-5" id="h18-0-5" class="d">-    FOLDER(0b0100),
</a><a href="#h18-0-6" id="h18-0-6" class="d">-    NO_DISABLE_KEY(0b1000)
</a><a href="#h18-0-7" id="h18-0-7" class="i">+    NO_TRANSLATE(0b000001),
</a><a href="#h18-0-8" id="h18-0-8" class="i">+    HIDDEN(0b000010),
</a><a href="#h18-0-9" id="h18-0-9" class="i">+    FOLDER(0b000100),
</a><a href="#h18-0-10" id="h18-0-10" class="i">+    NO_DISABLE_KEY(0b001000),
</a><a href="#h18-0-11" id="h18-0-11" class="i">+    REQUIRE_RESTART(0b010000),
</a><a href="#h18-0-12" id="h18-0-12" class="i">+    REQUIRE_CLEAN_CACHE(0b100000)
</a> }
 
 class ConfigParams(
<a href="#h18-1" id="h18-1" class="h">@@ -47,6 +49,13 @@ class ConfigParams(
</a>     fun addFlags(vararg values: ConfigFlag) {
         this._flags = (this._flags ?: 0) or values.fold(0) { acc, flag -&gt; acc or flag.id }
     }
<a href="#h18-1-3" id="h18-1-3" class="i">+
</a><a href="#h18-1-4" id="h18-1-4" class="i">+    fun requireRestart() {
</a><a href="#h18-1-5" id="h18-1-5" class="i">+        addFlags(ConfigFlag.REQUIRE_RESTART)
</a><a href="#h18-1-6" id="h18-1-6" class="i">+    }
</a><a href="#h18-1-7" id="h18-1-7" class="i">+    fun requireCleanCache() {
</a><a href="#h18-1-8" id="h18-1-8" class="i">+        addFlags(ConfigFlag.REQUIRE_CLEAN_CACHE)
</a><a href="#h18-1-9" id="h18-1-9" class="i">+    }
</a> }
 
 class PropertyValue&lt;T&gt;(
<a href="#h18-2" id="h18-2" class="h">@@ -65,7 +74,7 @@ class PropertyValue&lt;T&gt;(
</a>     fun getNullable() = value?.takeIf { it != &quot;null&quot; }
     fun isEmpty() = value == null || value == &quot;null&quot; || value.toString().isEmpty()
     fun get() = getNullable() ?: throw IllegalStateException(&quot;Property is not set&quot;)
<a href="#h18-2-3" id="h18-2-3" class="d">-    fun set(value: T?) { this.value = value }
</a><a href="#h18-2-4" id="h18-2-4" class="i">+    fun set(value: T?) { setAny(value) }
</a>     @Suppress(&quot;UNCHECKED_CAST&quot;)
     fun setAny(value: Any?) { this.value = value as T? }
 
<a href="#h18-3" id="h18-3" class="h">@@ -79,7 +88,7 @@ data class PropertyKey&lt;T&gt;(
</a>     val dataType: DataProcessors.PropertyDataProcessor&lt;T&gt;,
     val params: ConfigParams = ConfigParams(),
 ) {
<a href="#h18-3-3" id="h18-3-3" class="d">-    val parentKey by lazy { _parent() }
</a><a href="#h18-3-4" id="h18-3-4" class="i">+    private val parentKey by lazy { _parent() }
</a> 
     fun propertyOption(translation: LocaleWrapper, key: String): String {
         if (key == &quot;null&quot;) {
<b>diff --git a/<a id="h19" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/ModConfig.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/ModConfig.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/ModConfig.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/ModConfig.kt</a></b>
<a href="#h19-0" id="h19-0" class="h">@@ -4,6 +4,8 @@ import android.content.Context
</a> import com.google.gson.Gson
 import com.google.gson.GsonBuilder
 import com.google.gson.JsonObject
<a href="#h19-0-3" id="h19-0-3" class="i">+import me.rhunk.snapenhance.bridge.ConfigStateListener
</a><a href="#h19-0-4" id="h19-0-4" class="i">+import me.rhunk.snapenhance.core.Logger
</a> import me.rhunk.snapenhance.core.bridge.BridgeClient
 import me.rhunk.snapenhance.core.bridge.FileLoaderWrapper
 import me.rhunk.snapenhance.core.bridge.types.BridgeFileType
<a href="#h19-1" id="h19-1" class="h">@@ -18,7 +20,10 @@ class ModConfig {
</a>     private val file = FileLoaderWrapper(BridgeFileType.CONFIG, &quot;{}&quot;.toByteArray(Charsets.UTF_8))
     var wasPresent by Delegates.notNull&lt;Boolean&gt;()
 
<a href="#h19-1-3" id="h19-1-3" class="i">+    /* Used to notify the bridge client about config changes */
</a><a href="#h19-1-4" id="h19-1-4" class="i">+    var configStateListener: ConfigStateListener? = null
</a>     lateinit var root: RootConfig
<a href="#h19-1-6" id="h19-1-6" class="i">+        private set
</a> 
     private fun load() {
         root = RootConfig()
<a href="#h19-2" id="h19-2" class="h">@@ -54,6 +59,57 @@ class ModConfig {
</a>     }
 
     fun writeConfig() {
<a href="#h19-2-3" id="h19-2-3" class="i">+        var shouldRestart = false
</a><a href="#h19-2-4" id="h19-2-4" class="i">+        var shouldCleanCache = false
</a><a href="#h19-2-5" id="h19-2-5" class="i">+        var configChanged = false
</a><a href="#h19-2-6" id="h19-2-6" class="i">+
</a><a href="#h19-2-7" id="h19-2-7" class="i">+        fun compareDiff(originalContainer: ConfigContainer, modifiedContainer: ConfigContainer) {
</a><a href="#h19-2-8" id="h19-2-8" class="i">+            val parentContainerFlags = modifiedContainer.parentContainerKey?.params?.flags ?: emptySet()
</a><a href="#h19-2-9" id="h19-2-9" class="i">+
</a><a href="#h19-2-10" id="h19-2-10" class="i">+            parentContainerFlags.takeIf { originalContainer.hasGlobalState }?.apply {
</a><a href="#h19-2-11" id="h19-2-11" class="i">+                if (modifiedContainer.globalState != originalContainer.globalState) {
</a><a href="#h19-2-12" id="h19-2-12" class="i">+                    configChanged = true
</a><a href="#h19-2-13" id="h19-2-13" class="i">+                    if (contains(ConfigFlag.REQUIRE_RESTART)) shouldRestart = true
</a><a href="#h19-2-14" id="h19-2-14" class="i">+                    if (contains(ConfigFlag.REQUIRE_CLEAN_CACHE)) shouldCleanCache = true
</a><a href="#h19-2-15" id="h19-2-15" class="i">+                }
</a><a href="#h19-2-16" id="h19-2-16" class="i">+            }
</a><a href="#h19-2-17" id="h19-2-17" class="i">+
</a><a href="#h19-2-18" id="h19-2-18" class="i">+            for (property in modifiedContainer.properties) {
</a><a href="#h19-2-19" id="h19-2-19" class="i">+                val modifiedValue = property.value.getNullable()
</a><a href="#h19-2-20" id="h19-2-20" class="i">+                val originalValue = originalContainer.properties.entries.firstOrNull {
</a><a href="#h19-2-21" id="h19-2-21" class="i">+                    it.key.name == property.key.name
</a><a href="#h19-2-22" id="h19-2-22" class="i">+                }?.value?.getNullable()
</a><a href="#h19-2-23" id="h19-2-23" class="i">+
</a><a href="#h19-2-24" id="h19-2-24" class="i">+                if (originalValue is ConfigContainer &amp;&amp; modifiedValue is ConfigContainer) {
</a><a href="#h19-2-25" id="h19-2-25" class="i">+                    compareDiff(originalValue, modifiedValue)
</a><a href="#h19-2-26" id="h19-2-26" class="i">+                    continue
</a><a href="#h19-2-27" id="h19-2-27" class="i">+                }
</a><a href="#h19-2-28" id="h19-2-28" class="i">+
</a><a href="#h19-2-29" id="h19-2-29" class="i">+                if (modifiedValue != originalValue) {
</a><a href="#h19-2-30" id="h19-2-30" class="i">+                    val flags = property.key.params.flags + parentContainerFlags
</a><a href="#h19-2-31" id="h19-2-31" class="i">+                    configChanged = true
</a><a href="#h19-2-32" id="h19-2-32" class="i">+                    if (flags.contains(ConfigFlag.REQUIRE_RESTART)) shouldRestart = true
</a><a href="#h19-2-33" id="h19-2-33" class="i">+                    if (flags.contains(ConfigFlag.REQUIRE_CLEAN_CACHE)) shouldCleanCache = true
</a><a href="#h19-2-34" id="h19-2-34" class="i">+                }
</a><a href="#h19-2-35" id="h19-2-35" class="i">+            }
</a><a href="#h19-2-36" id="h19-2-36" class="i">+        }
</a><a href="#h19-2-37" id="h19-2-37" class="i">+
</a><a href="#h19-2-38" id="h19-2-38" class="i">+        configStateListener?.also {
</a><a href="#h19-2-39" id="h19-2-39" class="i">+            runCatching {
</a><a href="#h19-2-40" id="h19-2-40" class="i">+                compareDiff(RootConfig().apply {
</a><a href="#h19-2-41" id="h19-2-41" class="i">+                    fromJson(gson.fromJson(file.read().toString(Charsets.UTF_8), JsonObject::class.java))
</a><a href="#h19-2-42" id="h19-2-42" class="i">+                }, root)
</a><a href="#h19-2-43" id="h19-2-43" class="i">+
</a><a href="#h19-2-44" id="h19-2-44" class="i">+                if (configChanged) {
</a><a href="#h19-2-45" id="h19-2-45" class="i">+                    it.onConfigChanged()
</a><a href="#h19-2-46" id="h19-2-46" class="i">+                    if (shouldCleanCache) it.onCleanCacheRequired()
</a><a href="#h19-2-47" id="h19-2-47" class="i">+                    else if (shouldRestart) it.onRestartRequired()
</a><a href="#h19-2-48" id="h19-2-48" class="i">+                }
</a><a href="#h19-2-49" id="h19-2-49" class="i">+            }.onFailure {
</a><a href="#h19-2-50" id="h19-2-50" class="i">+                Logger.directError(&quot;Error while calling config state listener&quot;, it, &quot;ConfigStateListener&quot;)
</a><a href="#h19-2-51" id="h19-2-51" class="i">+            }
</a><a href="#h19-2-52" id="h19-2-52" class="i">+        }
</a><a href="#h19-2-53" id="h19-2-53" class="i">+
</a>         file.write(exportToString().toByteArray(Charsets.UTF_8))
     }
 
<b>diff --git a/<a id="h20" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/DownloaderConfig.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/DownloaderConfig.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/DownloaderConfig.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/DownloaderConfig.kt</a></b>
<a href="#h20-0" id="h20-0" class="h">@@ -17,7 +17,7 @@ class DownloaderConfig : ConfigContainer() {
</a>         val customAudioCodec = string(&quot;custom_audio_codec&quot;) { addFlags(ConfigFlag.NO_TRANSLATE) }
     }
 
<a href="#h20-0-3" id="h20-0-3" class="d">-    val saveFolder = string(&quot;save_folder&quot;) { addFlags(ConfigFlag.FOLDER) }
</a><a href="#h20-0-4" id="h20-0-4" class="i">+    val saveFolder = string(&quot;save_folder&quot;) { addFlags(ConfigFlag.FOLDER); requireRestart() }
</a>     val autoDownloadSources = multiple(&quot;auto_download_sources&quot;,
         &quot;friend_snaps&quot;,
         &quot;friend_stories&quot;,
<a href="#h20-1" id="h20-1" class="h">@@ -41,7 +41,7 @@ class DownloaderConfig : ConfigContainer() {
</a>     val forceVoiceNoteFormat = unique(&quot;force_voice_note_format&quot;, &quot;aac&quot;, &quot;mp3&quot;, &quot;opus&quot;) {
         addFlags(ConfigFlag.NO_TRANSLATE)
     }
<a href="#h20-1-3" id="h20-1-3" class="d">-    val downloadProfilePictures = boolean(&quot;download_profile_pictures&quot;)
</a><a href="#h20-1-4" id="h20-1-4" class="i">+    val downloadProfilePictures = boolean(&quot;download_profile_pictures&quot;) { requireRestart() }
</a>     val chatDownloadContextMenu = boolean(&quot;chat_download_context_menu&quot;)
     val ffmpegOptions = container(&quot;ffmpeg_options&quot;, FFMpegOptions()) { addNotices(FeatureNotice.UNSTABLE) }
     val logging = multiple(&quot;logging&quot;, &quot;started&quot;, &quot;success&quot;, &quot;progress&quot;, &quot;failure&quot;).apply {
<b>diff --git a/<a id="h21" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Experimental.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Experimental.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Experimental.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Experimental.kt</a></b>
<a href="#h21-0" id="h21-0" class="h">@@ -4,16 +4,19 @@ import me.rhunk.snapenhance.core.config.ConfigContainer
</a> import me.rhunk.snapenhance.core.config.FeatureNotice
 
 class Experimental : ConfigContainer() {
<a href="#h21-0-3" id="h21-0-3" class="d">-    val nativeHooks = container(&quot;native_hooks&quot;, NativeHooks()) { icon = &quot;Memory&quot; }
</a><a href="#h21-0-4" id="h21-0-4" class="i">+    val nativeHooks = container(&quot;native_hooks&quot;, NativeHooks()) { icon = &quot;Memory&quot;; requireRestart() }
</a>     val spoof = container(&quot;spoof&quot;, Spoof()) { icon = &quot;Fingerprint&quot; }
     val appPasscode = string(&quot;app_passcode&quot;)
     val appLockOnResume = boolean(&quot;app_lock_on_resume&quot;)
     val infiniteStoryBoost = boolean(&quot;infinite_story_boost&quot;)
     val meoPasscodeBypass = boolean(&quot;meo_passcode_bypass&quot;)
     val unlimitedMultiSnap = boolean(&quot;unlimited_multi_snap&quot;) { addNotices(FeatureNotice.BAN_RISK)}
<a href="#h21-0-11" id="h21-0-11" class="d">-    val noFriendScoreDelay = boolean(&quot;no_friend_score_delay&quot;)
</a><a href="#h21-0-12" id="h21-0-12" class="d">-    val e2eEncryption = container(&quot;e2ee&quot;, E2EEConfig())
</a><a href="#h21-0-13" id="h21-0-13" class="d">-    val hiddenSnapchatPlusFeatures = boolean(&quot;hidden_snapchat_plus_features&quot;) { addNotices(FeatureNotice.BAN_RISK, FeatureNotice.UNSTABLE) }
</a><a href="#h21-0-14" id="h21-0-14" class="i">+    val noFriendScoreDelay = boolean(&quot;no_friend_score_delay&quot;) { requireRestart()}
</a><a href="#h21-0-15" id="h21-0-15" class="i">+    val e2eEncryption = container(&quot;e2ee&quot;, E2EEConfig()) { requireRestart()}
</a><a href="#h21-0-16" id="h21-0-16" class="i">+    val hiddenSnapchatPlusFeatures = boolean(&quot;hidden_snapchat_plus_features&quot;) {
</a><a href="#h21-0-17" id="h21-0-17" class="i">+        addNotices(FeatureNotice.BAN_RISK, FeatureNotice.UNSTABLE)
</a><a href="#h21-0-18" id="h21-0-18" class="i">+        requireRestart()
</a><a href="#h21-0-19" id="h21-0-19" class="i">+    }
</a>     val addFriendSourceSpoof = unique(&quot;add_friend_source_spoof&quot;,
         &quot;added_by_username&quot;,
         &quot;added_by_mention&quot;,
<b>diff --git a/<a id="h22" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Global.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Global.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Global.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Global.kt</a></b>
<a href="#h22-0" id="h22-0" class="h">@@ -4,11 +4,11 @@ import me.rhunk.snapenhance.core.config.ConfigContainer
</a> import me.rhunk.snapenhance.core.config.FeatureNotice
 
 class Global : ConfigContainer() {
<a href="#h22-0-3" id="h22-0-3" class="d">-    val snapchatPlus = boolean(&quot;snapchat_plus&quot;) { addNotices(FeatureNotice.BAN_RISK) }
</a><a href="#h22-0-4" id="h22-0-4" class="i">+    val snapchatPlus = boolean(&quot;snapchat_plus&quot;) { addNotices(FeatureNotice.BAN_RISK); requireRestart() }
</a>     val disableMetrics = boolean(&quot;disable_metrics&quot;)
     val blockAds = boolean(&quot;block_ads&quot;)
     val disableVideoLengthRestrictions = boolean(&quot;disable_video_length_restrictions&quot;) { addNotices(FeatureNotice.BAN_RISK) }
<a href="#h22-0-8" id="h22-0-8" class="d">-    val disableGooglePlayDialogs = boolean(&quot;disable_google_play_dialogs&quot;)
</a><a href="#h22-0-9" id="h22-0-9" class="i">+    val disableGooglePlayDialogs = boolean(&quot;disable_google_play_dialogs&quot;) { requireRestart() }
</a>     val forceMediaSourceQuality = boolean(&quot;force_media_source_quality&quot;)
     val disableSnapSplitting = boolean(&quot;disable_snap_splitting&quot;) { addNotices(FeatureNotice.INTERNAL_BEHAVIOR) }
 } 
\ No newline at end of file
<b>diff --git a/<a id="h23" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/MessagingTweaks.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/MessagingTweaks.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/MessagingTweaks.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/MessagingTweaks.kt</a></b>
<a href="#h23-0" id="h23-0" class="h">@@ -16,16 +16,16 @@ class MessagingTweaks : ConfigContainer() {
</a>         &quot;NOTE&quot;,
         &quot;EXTERNAL_MEDIA&quot;,
         &quot;STICKER&quot;
<a href="#h23-0-3" id="h23-0-3" class="d">-    )
</a><a href="#h23-0-4" id="h23-0-4" class="d">-    val snapToChatMedia = boolean(&quot;snap_to_chat_media&quot;)
</a><a href="#h23-0-5" id="h23-0-5" class="i">+    ) { requireRestart() }
</a><a href="#h23-0-6" id="h23-0-6" class="i">+    val snapToChatMedia = boolean(&quot;snap_to_chat_media&quot;) { requireRestart() }
</a>     val preventMessageSending = multiple(&quot;prevent_message_sending&quot;, *NotificationType.getOutgoingValues().map { it.key }.toTypedArray()) {
         customOptionTranslationPath = &quot;features.options.notifications&quot;
     }
<a href="#h23-0-10" id="h23-0-10" class="d">-    val betterNotifications = multiple(&quot;better_notifications&quot;, &quot;snap&quot;, &quot;chat&quot;, &quot;reply_button&quot;, &quot;download_button&quot;, &quot;group&quot;)
</a><a href="#h23-0-11" id="h23-0-11" class="i">+    val betterNotifications = multiple(&quot;better_notifications&quot;, &quot;snap&quot;, &quot;chat&quot;, &quot;reply_button&quot;, &quot;download_button&quot;, &quot;group&quot;) { requireRestart() }
</a>     val notificationBlacklist = multiple(&quot;notification_blacklist&quot;, *NotificationType.getIncomingValues().map { it.key }.toTypedArray()) {
         customOptionTranslationPath = &quot;features.options.notifications&quot;
     }
<a href="#h23-0-15" id="h23-0-15" class="d">-    val messageLogger = boolean(&quot;message_logger&quot;) { addNotices(FeatureNotice.UNSTABLE) }
</a><a href="#h23-0-16" id="h23-0-16" class="i">+    val messageLogger = boolean(&quot;message_logger&quot;) { addNotices(FeatureNotice.UNSTABLE); requireRestart() }
</a>     val galleryMediaSendOverride = boolean(&quot;gallery_media_send_override&quot;)
     val messagePreviewLength = integer(&quot;message_preview_length&quot;, defaultValue = 20)
 } 
\ No newline at end of file
<b>diff --git a/<a id="h24" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/RootConfig.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/RootConfig.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/RootConfig.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/RootConfig.kt</a></b>
<a href="#h24-0" id="h24-0" class="h">@@ -9,7 +9,7 @@ class RootConfig : ConfigContainer() {
</a>     val messaging = container(&quot;messaging&quot;, MessagingTweaks()) { icon = &quot;Send&quot; }
     val global = container(&quot;global&quot;, Global()) { icon = &quot;MiscellaneousServices&quot; }
     val rules = container(&quot;rules&quot;, Rules()) { icon = &quot;Rule&quot; }
<a href="#h24-0-3" id="h24-0-3" class="d">-    val camera = container(&quot;camera&quot;, Camera()) { icon = &quot;Camera&quot;}
</a><a href="#h24-0-4" id="h24-0-4" class="i">+    val camera = container(&quot;camera&quot;, Camera()) { icon = &quot;Camera&quot;; requireRestart() }
</a>     val streaksReminder = container(&quot;streaks_reminder&quot;, StreaksReminderConfig()) { icon = &quot;Alarm&quot; }
     val experimental = container(&quot;experimental&quot;, Experimental()) {
         icon = &quot;Science&quot;; addNotices(FeatureNotice.UNSTABLE)
<b>diff --git a/<a id="h25" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Scripting.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Scripting.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Scripting.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/Scripting.kt</a></b>
<a href="#h25-0" id="h25-0" class="h">@@ -4,7 +4,7 @@ import me.rhunk.snapenhance.core.config.ConfigContainer
</a> import me.rhunk.snapenhance.core.config.ConfigFlag
 
 class Scripting : ConfigContainer() {
<a href="#h25-0-3" id="h25-0-3" class="d">-    val developerMode = boolean(&quot;developer_mode&quot;, false)
</a><a href="#h25-0-4" id="h25-0-4" class="d">-    val moduleFolder = string(&quot;module_folder&quot;, &quot;modules&quot;) { addFlags(ConfigFlag.FOLDER)  }
</a><a href="#h25-0-5" id="h25-0-5" class="i">+    val developerMode = boolean(&quot;developer_mode&quot;, false) { requireRestart() }
</a><a href="#h25-0-6" id="h25-0-6" class="i">+    val moduleFolder = string(&quot;module_folder&quot;, &quot;modules&quot;) { addFlags(ConfigFlag.FOLDER); requireRestart()  }
</a>     val hotReload = boolean(&quot;hot_reload&quot;, false)
 } 
\ No newline at end of file
<b>diff --git a/<a id="h26" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/UserInterfaceTweaks.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/UserInterfaceTweaks.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/UserInterfaceTweaks.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/config/impl/UserInterfaceTweaks.kt</a></b>
<a href="#h26-0" id="h26-0" class="h">@@ -8,7 +8,7 @@ import me.rhunk.snapenhance.features.impl.ui.ClientBootstrapOverride
</a> class UserInterfaceTweaks : ConfigContainer() {
     inner class BootstrapOverride : ConfigContainer() {
         val appAppearance = unique(&quot;app_appearance&quot;, &quot;always_light&quot;, &quot;always_dark&quot;)
<a href="#h26-0-3" id="h26-0-3" class="d">-        val homeTab = unique(&quot;home_tab&quot;, *ClientBootstrapOverride.tabs) { addNotices(FeatureNotice.UNSTABLE)  }
</a><a href="#h26-0-4" id="h26-0-4" class="i">+        val homeTab = unique(&quot;home_tab&quot;, *ClientBootstrapOverride.tabs) { addNotices(FeatureNotice.UNSTABLE) }
</a>     }
 
     val friendFeedMenuButtons = multiple(
<a href="#h26-1" id="h26-1" class="h">@@ -17,20 +17,20 @@ class UserInterfaceTweaks : ConfigContainer() {
</a>         set(mutableListOf(&quot;conversation_info&quot;, MessagingRuleType.STEALTH.key))
     }
     val friendFeedMenuPosition = integer(&quot;friend_feed_menu_position&quot;, defaultValue = 1)
<a href="#h26-1-3" id="h26-1-3" class="d">-    val amoledDarkMode = boolean(&quot;amoled_dark_mode&quot;) { addNotices(FeatureNotice.UNSTABLE) }
</a><a href="#h26-1-4" id="h26-1-4" class="d">-    val bootstrapOverride = container(&quot;bootstrap_override&quot;, BootstrapOverride())
</a><a href="#h26-1-5" id="h26-1-5" class="d">-    val mapFriendNameTags = boolean(&quot;map_friend_nametags&quot;)
</a><a href="#h26-1-6" id="h26-1-6" class="d">-    val streakExpirationInfo = boolean(&quot;streak_expiration_info&quot;)
</a><a href="#h26-1-7" id="h26-1-7" class="i">+    val amoledDarkMode = boolean(&quot;amoled_dark_mode&quot;) { addNotices(FeatureNotice.UNSTABLE); requireRestart() }
</a><a href="#h26-1-8" id="h26-1-8" class="i">+    val bootstrapOverride = container(&quot;bootstrap_override&quot;, BootstrapOverride()) { requireRestart() }
</a><a href="#h26-1-9" id="h26-1-9" class="i">+    val mapFriendNameTags = boolean(&quot;map_friend_nametags&quot;) { requireRestart() }
</a><a href="#h26-1-10" id="h26-1-10" class="i">+    val streakExpirationInfo = boolean(&quot;streak_expiration_info&quot;) { requireRestart() }
</a>     val hideStorySections = multiple(&quot;hide_story_sections&quot;,
<a href="#h26-1-12" id="h26-1-12" class="d">-        &quot;hide_friend_suggestions&quot;, &quot;hide_friends&quot;, &quot;hide_suggested&quot;, &quot;hide_for_you&quot;)
</a><a href="#h26-1-13" id="h26-1-13" class="i">+        &quot;hide_friend_suggestions&quot;, &quot;hide_friends&quot;, &quot;hide_suggested&quot;, &quot;hide_for_you&quot;) { requireRestart() }
</a>     val hideUiComponents = multiple(&quot;hide_ui_components&quot;,
         &quot;hide_voice_record_button&quot;,
         &quot;hide_stickers_button&quot;,
         &quot;hide_live_location_share_button&quot;,
         &quot;hide_chat_call_buttons&quot;,
         &quot;hide_profile_call_buttons&quot;
<a href="#h26-1-20" id="h26-1-20" class="d">-    )
</a><a href="#h26-1-21" id="h26-1-21" class="d">-    val ddBitmojiSelfie = boolean(&quot;2d_bitmoji_selfie&quot;)
</a><a href="#h26-1-22" id="h26-1-22" class="d">-    val disableSpotlight = boolean(&quot;disable_spotlight&quot;)
</a><a href="#h26-1-23" id="h26-1-23" class="d">-    val storyViewerOverride = unique(&quot;story_viewer_override&quot;, &quot;DISCOVER_PLAYBACK_SEEKBAR&quot;, &quot;VERTICAL_STORY_VIEWER&quot;)
</a><a href="#h26-1-24" id="h26-1-24" class="i">+    ) { requireRestart() }
</a><a href="#h26-1-25" id="h26-1-25" class="i">+    val ddBitmojiSelfie = boolean(&quot;2d_bitmoji_selfie&quot;) { requireCleanCache() }
</a><a href="#h26-1-26" id="h26-1-26" class="i">+    val disableSpotlight = boolean(&quot;disable_spotlight&quot;) { requireRestart() }
</a><a href="#h26-1-27" id="h26-1-27" class="i">+    val storyViewerOverride = unique(&quot;story_viewer_override&quot;, &quot;DISCOVER_PLAYBACK_SEEKBAR&quot;, &quot;VERTICAL_STORY_VIEWER&quot;) { requireRestart() }
</a> }
<b>diff --git a/<a id="h27" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/DisableVideoLengthRestriction.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/DisableVideoLengthRestriction.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/DisableVideoLengthRestriction.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/DisableVideoLengthRestriction.kt</a></b>
<a href="#h27-0" id="h27-0" class="h">@@ -18,7 +18,7 @@ class DisableVideoLengthRestriction : Feature(&quot;DisableVideoLengthRestriction&quot;, l
</a>         val isState by context.config.global.disableVideoLengthRestrictions
 
         //fix black videos when story is posted
<a href="#h27-0-3" id="h27-0-3" class="d">-        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {
</a><a href="#h27-0-4" id="h27-0-4" class="i">+        if (isState &amp;&amp; Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {
</a>             val postedStorySnapFolder = File(context.androidContext.filesDir, &quot;file_manager/posted_story_snap&quot;)
 
             fileObserver = (object : FileObserver(postedStorySnapFolder, MOVED_TO) {
<b>diff --git a/<a id="h28" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/Notifications.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/Notifications.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/Notifications.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/Notifications.kt</a></b>
<a href="#h28-0" id="h28-0" class="h">@@ -185,7 +185,6 @@ class Notifications : Feature(&quot;Notifications&quot;, loadParams = FeatureLoadParams.IN
</a>         }
     }
 
<a href="#h28-0-3" id="h28-0-3" class="d">-    @OptIn(ExperimentalEncodingApi::class)
</a>     private fun fetchMessagesResult(conversationId: String, messages: List&lt;Message&gt;) {
         val sendNotificationData = { notificationData: NotificationData, forceCreate: Boolean  -&gt;
             val notificationId = if (forceCreate) System.nanoTime().toInt() else notificationData.id
<b>diff --git a/<a id="h29" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/manager/impl/ActionManager.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/manager/impl/ActionManager.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/manager/impl/ActionManager.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/manager/impl/ActionManager.kt</a></b>
<a href="#h29-0" id="h29-0" class="h">@@ -28,7 +28,7 @@ class ActionManager(
</a>         intent.removeExtra(ACTION_PARAMETER)
     }
 
<a href="#h29-0-3" id="h29-0-3" class="d">-    private fun execute(action: EnumAction) {
</a><a href="#h29-0-4" id="h29-0-4" class="i">+    fun execute(action: EnumAction) {
</a>         actions[action.key]?.run()
         if (action.exitOnFinish) {
             modContext.forceCloseApp()
</pre>
</div>
</body>
</html>
