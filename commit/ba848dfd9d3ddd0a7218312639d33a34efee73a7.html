<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Merge branch &#39;dev&#39; into dev_gh - SnapEnhance - An Xposed module offering an enhanced Snapchat experience
</title>
<link rel="icon" type="image/svg+xml" href="../../logo.png"/>
<link rel="alternate icon" href="../../favicon.png"/>
<link rel="alternate" type="application/atom+xml" title="SnapEnhance Atom Feed" href="../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="SnapEnhance Atom Feed (tags)" href="../tags.xml" />
<link rel="stylesheet" type="text/css" href="../../style.css" />
<link rel="stylesheet" type="text/css" href="../../fonts.css" />
</head>
<body>
<div id="head"><table><tr><td><a class="logo" href="../../"><img src="../../logo.png" alt="" width="32" height="32" /></a></td><td><strong>SnapEnhance</strong><span class="desc"> - An Xposed module offering an enhanced Snapchat experience
</span>
</td></tr></table>
<p><a href="../about.html">About</a> | <a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/LICENSE.html">License</a></p>
</div>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/ba848dfd9d3ddd0a7218312639d33a34efee73a7.html">ba848dfd9d3ddd0a7218312639d33a34efee73a7</a>
<b>parent</b> <a href="../commit/81ef4537e2f39ce0730ae1b358c66db3f3657e6c.html">81ef4537e2f39ce0730ae1b358c66db3f3657e6c</a>
<b>Author:</b> rhunk &lt;<a href="mailto:101876869+rhunk@users.noreply.github.com">101876869+rhunk@users.noreply.github.com</a>&gt;
<b>Date:</b>   Sun,  1 Jun 2025 15:04:49 +0200

Merge branch &#39;dev&#39; into dev_gh

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">common/src/main/assets/lang/en_US.json</a></td><td> | </td><td class="num">8</td><td><span class="i">++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Experimental.kt</a></td><td> | </td><td class="num">1</td><td><span class="i">+</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h2">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/MessagingTweaks.kt</a></td><td> | </td><td class="num">1</td><td><span class="i">+</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h3">composer/src/main/ts/composer.ts</a></td><td> | </td><td class="num">8</td><td><span class="i">+++++</span><span class="d">---</span></td></tr>
<tr><td class="M">M</td><td><a href="#h4">composer/src/main/ts/imports.ts</a></td><td> | </td><td class="num">5</td><td><span class="i">++++</span><span class="d">-</span></td></tr>
<tr><td class="M">M</td><td><a href="#h5">composer/src/main/ts/main.ts</a></td><td> | </td><td class="num">4</td><td><span class="i">+++</span><span class="d">-</span></td></tr>
<tr><td class="A">A</td><td><a href="#h6">composer/src/main/ts/modules/selfDestructSnapDelay.ts</a></td><td> | </td><td class="num">48</td><td><span class="i">++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h7">composer/src/main/ts/types.ts</a></td><td> | </td><td class="num">1</td><td><span class="i">+</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h8">core/src/main/kotlin/me/rhunk/snapenhance/core/features/FeatureManager.kt</a></td><td> | </td><td class="num">1</td><td><span class="i">+</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h9">core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/experiments/ComposerHooks.kt</a></td><td> | </td><td class="num">26</td><td><span class="i">++++++++++++++</span><span class="d">------------</span></td></tr>
<tr><td class="A">A</td><td><a href="#h10">core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/tweaks/DisableSnapModeRestrictions.kt</a></td><td> | </td><td class="num">19</td><td><span class="i">+++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h11">core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/ui/CustomStreaksExpirationFormat.kt</a></td><td> | </td><td class="num">86</td><td><span class="i">++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">---------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h12">core/src/main/kotlin/me/rhunk/snapenhance/core/ui/menu/MenuViewInjector.kt</a></td><td> | </td><td class="num">3</td><td><span class="i">+</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h13">mapper/src/main/kotlin/me/rhunk/snapenhance/mapper/impl/StreaksExpirationMapper.kt</a></td><td> | </td><td class="num">37</td><td><span class="i"></span><span class="d">-------------------------------------</span></td></tr>
<tr><td class="A">A</td><td><a href="#h14">native/rust/.cargo/config.toml</a></td><td> | </td><td class="num">3</td><td><span class="i">+++</span><span class="d"></span></td></tr>
</table></pre><pre>15 files changed, 166 insertions(+), 85 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/common/src/main/assets/lang/en_US.json.html">common/src/main/assets/lang/en_US.json</a> b/<a href="../file/common/src/main/assets/lang/en_US.json.html">common/src/main/assets/lang/en_US.json</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -638,6 +638,10 @@
</a>                         &quot;name&quot;: &quot;Unlimited Conversation Pinning&quot;,
                         &quot;description&quot;: &quot;Allows you to pin an unlimited amount of conversations locally&quot;
                     },
<a href="#h0-0-3" id="h0-0-3" class="i">+                    &quot;disable_snap_mode_restrictions&quot;: {
</a><a href="#h0-0-4" id="h0-0-4" class="i">+                        &quot;name&quot;: &quot;Disable Snap Mode Restrictions&quot;,
</a><a href="#h0-0-5" id="h0-0-5" class="i">+                        &quot;description&quot;: &quot;Allows you to view self-destructing Snaps without restrictions&quot;
</a><a href="#h0-0-6" id="h0-0-6" class="i">+                    },
</a>                     &quot;prevent_message_sending&quot;: {
                         &quot;name&quot;: &quot;Prevent Message Sending&quot;,
                         &quot;description&quot;: &quot;Prevents sending certain types of messages&quot;
<a href="#h0-1" id="h0-1" class="h">@@ -982,6 +986,10 @@
</a>                                         &quot;name&quot;: &quot;Bypass Camera Roll Limit&quot;,
                                         &quot;description&quot;: &quot;Increases the maximum amount of media you can send from the camera roll&quot;
                                     },
<a href="#h0-1-3" id="h0-1-3" class="i">+                                    &quot;custom_self_destruct_snap_delay&quot;: {
</a><a href="#h0-1-4" id="h0-1-4" class="i">+                                        &quot;name&quot;: &quot;Custom Self Destruct Snap Delay&quot;,
</a><a href="#h0-1-5" id="h0-1-5" class="i">+                                        &quot;description&quot;: &quot;Gives more options for the self-destruct timer when sending a Snap&quot;
</a><a href="#h0-1-6" id="h0-1-6" class="i">+                                    },
</a>                                     &quot;composer_console&quot;: {
                                         &quot;name&quot;: &quot;Composer Console&quot;,
                                         &quot;description&quot;: &quot;Allows you to execute JavaScript code in Composer (arm64 only)&quot;
<b>diff --git a/<a id="h1" href="../file/common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Experimental.kt.html">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Experimental.kt</a> b/<a href="../file/common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Experimental.kt.html">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/Experimental.kt</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -27,6 +27,7 @@ class Experimental : ConfigContainer() {
</a>     class ComposerHooksConfig: ConfigContainer(hasGlobalState = true) {
         val showFirstCreatedUsername = boolean(&quot;show_first_created_username&quot;)
         val bypassCameraRollLimit = boolean(&quot;bypass_camera_roll_limit&quot;)
<a href="#h1-0-3" id="h1-0-3" class="i">+        val customSelfDestructSnapDelay = boolean(&quot;custom_self_destruct_snap_delay&quot;)
</a>         val composerConsole = boolean(&quot;composer_console&quot;)
         val composerLogs = boolean(&quot;composer_logs&quot;)
     }
<b>diff --git a/<a id="h2" href="../file/common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/MessagingTweaks.kt.html">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/MessagingTweaks.kt</a> b/<a href="../file/common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/MessagingTweaks.kt.html">common/src/main/kotlin/me/rhunk/snapenhance/common/config/impl/MessagingTweaks.kt</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -70,6 +70,7 @@ class MessagingTweaks : ConfigContainer() {
</a>     val halfSwipeNotifier = container(&quot;half_swipe_notifier&quot;, HalfSwipeNotifierConfig()) { requireRestart()}
     val callStartConfirmation = boolean(&quot;call_start_confirmation&quot;) { requireRestart() }
     val unlimitedConversationPinning = boolean(&quot;unlimited_conversation_pinning&quot;) { requireRestart() }
<a href="#h2-0-3" id="h2-0-3" class="i">+    val disableSnapModeRestrictions = boolean(&quot;disable_snap_mode_restrictions&quot;) { requireRestart() }
</a>     val autoSaveMessagesInConversations = multiple(&quot;auto_save_messages_in_conversations&quot;,
         &quot;CHAT&quot;,
         &quot;SNAP&quot;,
<b>diff --git a/<a id="h3" href="../file/composer/src/main/ts/composer.ts.html">composer/src/main/ts/composer.ts</a> b/<a href="../file/composer/src/main/ts/composer.ts.html">composer/src/main/ts/composer.ts</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -1,4 +1,6 @@
</a><a href="#h3-0-0" id="h3-0-0" class="d">-export const jsx = require(&#39;composer_core/src/JSX&#39;).jsx;
</a><a href="#h3-0-1" id="h3-0-1" class="d">-export const assetCatalog = require(&quot;composer_core/src/AssetCatalog&quot;)
</a><a href="#h3-0-2" id="h3-0-2" class="d">-export const style = require(&quot;composer_core/src/Style&quot;);
</a><a href="#h3-0-3" id="h3-0-3" class="i">+import { runtimeName } from &quot;./imports&quot;
</a><a href="#h3-0-4" id="h3-0-4" class="i">+
</a><a href="#h3-0-5" id="h3-0-5" class="i">+export const jsx = require(runtimeName + &#39;_core/src/JSX&#39;).jsx;
</a><a href="#h3-0-6" id="h3-0-6" class="i">+export const assetCatalog = require(runtimeName + &quot;_core/src/AssetCatalog&quot;)
</a><a href="#h3-0-7" id="h3-0-7" class="i">+export const style = require(runtimeName + &quot;_core/src/Style&quot;);
</a> export const colors = require(&quot;coreui/src/styles/semanticColors&quot;);
<b>diff --git a/<a id="h4" href="../file/composer/src/main/ts/imports.ts.html">composer/src/main/ts/imports.ts</a> b/<a href="../file/composer/src/main/ts/imports.ts.html">composer/src/main/ts/imports.ts</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -1,7 +1,10 @@
</a> import { Config, FriendInfo } from &quot;./types&quot;;
 
 declare var _getImportsFunctionName: string;
<a href="#h4-0-3" id="h4-0-3" class="d">-const remoteImports = require(&#39;composer_core/src/DeviceBridge&#39;)[_getImportsFunctionName]();
</a><a href="#h4-0-4" id="h4-0-4" class="i">+declare var _runtimeName: boolean;
</a><a href="#h4-0-5" id="h4-0-5" class="i">+export const runtimeName = _runtimeName;
</a><a href="#h4-0-6" id="h4-0-6" class="i">+
</a><a href="#h4-0-7" id="h4-0-7" class="i">+const remoteImports = require(_runtimeName + &#39;_core/src/DeviceBridge&#39;)[_getImportsFunctionName]();
</a> 
 function callRemoteFunction(method: string, ...args: any[]): any | null {
     return remoteImports[method](...args);
<b>diff --git a/<a id="h5" href="../file/composer/src/main/ts/main.ts.html">composer/src/main/ts/main.ts</a> b/<a href="../file/composer/src/main/ts/main.ts.html">composer/src/main/ts/main.ts</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -4,6 +4,7 @@ import { modules } from &quot;./types&quot;;
</a> import &quot;./modules/operaDownloadButton&quot;;
 import &quot;./modules/firstCreatedUsername&quot;;
 import &quot;./modules/bypassCameraRollSelectionLimit&quot;;
<a href="#h5-0-3" id="h5-0-3" class="i">+import &quot;./modules/selfDestructSnapDelay&quot;;
</a> 
 
 try {
<a href="#h5-1" id="h5-1" class="h">@@ -21,12 +22,13 @@ try {
</a>         }
         try {
             m.init();
<a href="#h5-1-3" id="h5-1-3" class="i">+            console.debug(`module ${m.name} initialized`);
</a>         } catch (e) {
             console.error(`failed to initialize module ${m.name}`, e, e.stack);
         }
     });
 
<a href="#h5-1-9" id="h5-1-9" class="d">-    console.log(&quot;modules loaded!&quot;);
</a><a href="#h5-1-10" id="h5-1-10" class="i">+    console.debug(&quot;modules loaded!&quot;);
</a> } catch (e) {
     log(&quot;error&quot;, &quot;Failed to load composer modules\n&quot; + e + &quot;\n&quot; + e.stack)
 }
<b>diff --git a/<a id="h6" href="../file/composer/src/main/ts/modules/selfDestructSnapDelay.ts.html">composer/src/main/ts/modules/selfDestructSnapDelay.ts</a> b/<a href="../file/composer/src/main/ts/modules/selfDestructSnapDelay.ts.html">composer/src/main/ts/modules/selfDestructSnapDelay.ts</a></b>
<a href="#h6-0" id="h6-0" class="h">@@ -0,0 +1,47 @@
</a><a href="#h6-0-0" id="h6-0-0" class="i">+import { defineModule } from &quot;../types&quot;;
</a><a href="#h6-0-1" id="h6-0-1" class="i">+import { interceptComponent } from &quot;../utils&quot;;
</a><a href="#h6-0-2" id="h6-0-2" class="i">+
</a><a href="#h6-0-3" id="h6-0-3" class="i">+export default defineModule({
</a><a href="#h6-0-4" id="h6-0-4" class="i">+    name: &quot;Self Destruct Snap Delay&quot;,
</a><a href="#h6-0-5" id="h6-0-5" class="i">+    enabled: config =&gt; config.customSelfDestructSnapDelay,
</a><a href="#h6-0-6" id="h6-0-6" class="i">+    init() {
</a><a href="#h6-0-7" id="h6-0-7" class="i">+        interceptComponent(
</a><a href="#h6-0-8" id="h6-0-8" class="i">+            &#39;snap_editor_timer_tool/src/TimerPickerView&#39;,
</a><a href="#h6-0-9" id="h6-0-9" class="i">+            &#39;TimerPickerView&#39;,
</a><a href="#h6-0-10" id="h6-0-10" class="i">+            {
</a><a href="#h6-0-11" id="h6-0-11" class="i">+                &quot;&lt;init&gt;&quot;: (args: any[], superCall: () =&gt; void) =&gt; {
</a><a href="#h6-0-12" id="h6-0-12" class="i">+                    if (args[1].options[0] == 30) {
</a><a href="#h6-0-13" id="h6-0-13" class="i">+                        args[1].style = 0; // seconds format
</a><a href="#h6-0-14" id="h6-0-14" class="i">+
</a><a href="#h6-0-15" id="h6-0-15" class="i">+                        args[1].options = [
</a><a href="#h6-0-16" id="h6-0-16" class="i">+                            5, // 5 seconds
</a><a href="#h6-0-17" id="h6-0-17" class="i">+                            10, // 10 seconds
</a><a href="#h6-0-18" id="h6-0-18" class="i">+                            20, // 20 seconds
</a><a href="#h6-0-19" id="h6-0-19" class="i">+                            30, // 30 seconds
</a><a href="#h6-0-20" id="h6-0-20" class="i">+                            60, // 1 minute
</a><a href="#h6-0-21" id="h6-0-21" class="i">+                            120, // 2 minutes
</a><a href="#h6-0-22" id="h6-0-22" class="i">+                            180, // 3 minutes
</a><a href="#h6-0-23" id="h6-0-23" class="i">+                            240, // 4 minutes
</a><a href="#h6-0-24" id="h6-0-24" class="i">+                            300, // 5 minutes
</a><a href="#h6-0-25" id="h6-0-25" class="i">+                            600, // 10 minutes
</a><a href="#h6-0-26" id="h6-0-26" class="i">+                            900, // 15 minutes
</a><a href="#h6-0-27" id="h6-0-27" class="i">+                            1200, // 20 minutes
</a><a href="#h6-0-28" id="h6-0-28" class="i">+                            1800, // 30 minutes
</a><a href="#h6-0-29" id="h6-0-29" class="i">+                            3600, // 1 hour
</a><a href="#h6-0-30" id="h6-0-30" class="i">+                            7200, // 2 hours
</a><a href="#h6-0-31" id="h6-0-31" class="i">+                            10800, // 3 hours
</a><a href="#h6-0-32" id="h6-0-32" class="i">+                            14400, // 4 hours
</a><a href="#h6-0-33" id="h6-0-33" class="i">+                            21600, // 6 hours
</a><a href="#h6-0-34" id="h6-0-34" class="i">+                            28800, // 8 hours
</a><a href="#h6-0-35" id="h6-0-35" class="i">+                            43200, // 12 hours
</a><a href="#h6-0-36" id="h6-0-36" class="i">+                            86400, // 1 day
</a><a href="#h6-0-37" id="h6-0-37" class="i">+                            172800, // 2 days
</a><a href="#h6-0-38" id="h6-0-38" class="i">+                        ]
</a><a href="#h6-0-39" id="h6-0-39" class="i">+                    }
</a><a href="#h6-0-40" id="h6-0-40" class="i">+
</a><a href="#h6-0-41" id="h6-0-41" class="i">+                    superCall();
</a><a href="#h6-0-42" id="h6-0-42" class="i">+                }
</a><a href="#h6-0-43" id="h6-0-43" class="i">+            }
</a><a href="#h6-0-44" id="h6-0-44" class="i">+        )
</a><a href="#h6-0-45" id="h6-0-45" class="i">+    }
</a><a href="#h6-0-46" id="h6-0-46" class="i">+});</a><a href="#h6-0-47" id="h6-0-47" class="i">+
\ No newline at end of file
</a><b>diff --git a/<a id="h7" href="../file/composer/src/main/ts/types.ts.html">composer/src/main/ts/types.ts</a> b/<a href="../file/composer/src/main/ts/types.ts.html">composer/src/main/ts/types.ts</a></b>
<a href="#h7-0" id="h7-0" class="h">@@ -3,6 +3,7 @@ export interface Config {
</a>     readonly bypassCameraRollLimit: boolean
     readonly showFirstCreatedUsername: boolean
     readonly composerLogs: boolean
<a href="#h7-0-3" id="h7-0-3" class="i">+    readonly customSelfDestructSnapDelay: boolean
</a> }
 
 export interface FriendInfo {
<b>diff --git a/<a id="h8" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/features/FeatureManager.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/features/FeatureManager.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/features/FeatureManager.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/features/FeatureManager.kt</a></b>
<a href="#h8-0" id="h8-0" class="h">@@ -143,6 +143,7 @@ class FeatureManager(
</a>             FriendNotes(),
             DoubleTapChatAction(),
             SnapScoreChanges(),
<a href="#h8-0-3" id="h8-0-3" class="i">+            DisableSnapModeRestrictions(),
</a>         )
 
         features.values.toList().forEach { feature -&gt;
<b>diff --git a/<a id="h9" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/experiments/ComposerHooks.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/experiments/ComposerHooks.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/experiments/ComposerHooks.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/experiments/ComposerHooks.kt</a></b>
<a href="#h9-0" id="h9-0" class="h">@@ -104,6 +104,8 @@ class ComposerHooks: Feature(&quot;ComposerHooks&quot;) {
</a>     override fun init() {
         if (config.globalState != true) return
 
<a href="#h9-0-3" id="h9-0-3" class="i">+        val nativeBridgeClass = runCatching { findClass(&quot;com.snapchat.client.valdi.NativeBridge&quot;) }.getOrNull() ?: findClass(&quot;com.snapchat.client.composer.NativeBridge&quot;)
</a><a href="#h9-0-4" id="h9-0-4" class="i">+
</a>         val importedFunctions = mutableMapOf&lt;String, Any?&gt;()
 
         fun composerFunction(name: String, block: ComposerMarshaller.() -&gt; Unit) {
<a href="#h9-1" id="h9-1" class="h">@@ -118,7 +120,8 @@ class ComposerHooks: Feature(&quot;ComposerHooks&quot;) {
</a>                 &quot;operaDownloadButton&quot; to context.config.downloader.operaDownloadButton.get(),
                 &quot;bypassCameraRollLimit&quot; to config.bypassCameraRollLimit.get(),
                 &quot;showFirstCreatedUsername&quot; to config.showFirstCreatedUsername.get(),
<a href="#h9-1-3" id="h9-1-3" class="d">-                &quot;composerLogs&quot; to config.composerLogs.get()
</a><a href="#h9-1-4" id="h9-1-4" class="i">+                &quot;composerLogs&quot; to config.composerLogs.get(),
</a><a href="#h9-1-5" id="h9-1-5" class="i">+                &quot;customSelfDestructSnapDelay&quot; to config.customSelfDestructSnapDelay.get(),
</a>             ))
         }
 
<a href="#h9-2" id="h9-2" class="h">@@ -172,7 +175,8 @@ class ComposerHooks: Feature(&quot;ComposerHooks&quot;) {
</a>             context.native.setComposerLoader(&quot;&quot;&quot;
                 const i = setInterval(() =&gt; {
                     try {
<a href="#h9-2-3" id="h9-2-3" class="d">-                        require(&#39;composer_core/src/DeviceBridge&#39;).getDisplayWidth();
</a><a href="#h9-2-4" id="h9-2-4" class="i">+                        const _runtimeName = &quot;${if (nativeBridgeClass.name == &quot;com.snapchat.client.valdi.NativeBridge&quot;) &quot;valdi&quot; else &quot;composer&quot;}&quot;;
</a><a href="#h9-2-5" id="h9-2-5" class="i">+                        require(_runtimeName + &#39;_core/src/DeviceBridge&#39;).getDisplayWidth();
</a>                         clearInterval(i);
                         (() =&gt; { const _getImportsFunctionName = &quot;$getImportsFunctionName&quot;; $loaderScript })();
                     } catch (e) {}
<a href="#h9-3" id="h9-3" class="h">@@ -195,16 +199,14 @@ class ComposerHooks: Feature(&quot;ComposerHooks&quot;) {
</a>             }
         }
 
<a href="#h9-3-3" id="h9-3-3" class="d">-        findClass(&quot;com.snapchat.client.composer.NativeBridge&quot;).apply {
</a><a href="#h9-3-4" id="h9-3-4" class="d">-            hook(&quot;registerNativeModuleFactory&quot;, HookStage.BEFORE) { param -&gt;
</a><a href="#h9-3-5" id="h9-3-5" class="d">-                val moduleFactory = param.argNullable&lt;Any&gt;(1) ?: return@hook
</a><a href="#h9-3-6" id="h9-3-6" class="d">-                if (moduleFactory.javaClass.getMethod(&quot;getModulePath&quot;).invoke(moduleFactory)?.toString()?.contains(&quot;DeviceBridge&quot;) != true) return@hook
</a><a href="#h9-3-7" id="h9-3-7" class="d">-                Hooker.ephemeralHookObjectMethod(moduleFactory.javaClass, moduleFactory, &quot;loadModule&quot;, HookStage.AFTER) { methodParam -&gt;
</a><a href="#h9-3-8" id="h9-3-8" class="d">-                    val result = methodParam.getResult() as? MutableMap&lt;String, Any?&gt; ?: return@ephemeralHookObjectMethod
</a><a href="#h9-3-9" id="h9-3-9" class="d">-                    result[getImportsFunctionName] = newComposerFunction {
</a><a href="#h9-3-10" id="h9-3-10" class="d">-                        pushUntyped(importedFunctions)
</a><a href="#h9-3-11" id="h9-3-11" class="d">-                        true
</a><a href="#h9-3-12" id="h9-3-12" class="d">-                    }
</a><a href="#h9-3-13" id="h9-3-13" class="i">+        nativeBridgeClass.hook(&quot;registerNativeModuleFactory&quot;, HookStage.BEFORE) { param -&gt;
</a><a href="#h9-3-14" id="h9-3-14" class="i">+            val moduleFactory = param.argNullable&lt;Any&gt;(1) ?: return@hook
</a><a href="#h9-3-15" id="h9-3-15" class="i">+            if (moduleFactory.javaClass.getMethod(&quot;getModulePath&quot;).invoke(moduleFactory)?.toString()?.contains(&quot;DeviceBridge&quot;) != true) return@hook
</a><a href="#h9-3-16" id="h9-3-16" class="i">+            Hooker.ephemeralHookObjectMethod(moduleFactory.javaClass, moduleFactory, &quot;loadModule&quot;, HookStage.AFTER) { methodParam -&gt;
</a><a href="#h9-3-17" id="h9-3-17" class="i">+                val result = methodParam.getResult() as? MutableMap&lt;String, Any?&gt; ?: return@ephemeralHookObjectMethod
</a><a href="#h9-3-18" id="h9-3-18" class="i">+                result[getImportsFunctionName] = newComposerFunction {
</a><a href="#h9-3-19" id="h9-3-19" class="i">+                    pushUntyped(importedFunctions)
</a><a href="#h9-3-20" id="h9-3-20" class="i">+                    true
</a>                 }
             }
         }
<b>diff --git a/<a id="h10" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/tweaks/DisableSnapModeRestrictions.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/tweaks/DisableSnapModeRestrictions.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/tweaks/DisableSnapModeRestrictions.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/tweaks/DisableSnapModeRestrictions.kt</a></b>
<a href="#h10-0" id="h10-0" class="h">@@ -0,0 +1,18 @@
</a><a href="#h10-0-0" id="h10-0-0" class="i">+package me.rhunk.snapenhance.core.features.impl.tweaks
</a><a href="#h10-0-1" id="h10-0-1" class="i">+
</a><a href="#h10-0-2" id="h10-0-2" class="i">+import me.rhunk.snapenhance.core.features.Feature
</a><a href="#h10-0-3" id="h10-0-3" class="i">+import me.rhunk.snapenhance.core.util.dataBuilder
</a><a href="#h10-0-4" id="h10-0-4" class="i">+import me.rhunk.snapenhance.core.util.hook.HookStage
</a><a href="#h10-0-5" id="h10-0-5" class="i">+import me.rhunk.snapenhance.core.util.hook.hookConstructor
</a><a href="#h10-0-6" id="h10-0-6" class="i">+
</a><a href="#h10-0-7" id="h10-0-7" class="i">+class DisableSnapModeRestrictions: Feature(&quot;Disable Snap Mode Restrictions&quot;) {
</a><a href="#h10-0-8" id="h10-0-8" class="i">+    override fun init() {
</a><a href="#h10-0-9" id="h10-0-9" class="i">+        if (!context.config.messaging.disableSnapModeRestrictions.get()) return
</a><a href="#h10-0-10" id="h10-0-10" class="i">+
</a><a href="#h10-0-11" id="h10-0-11" class="i">+        findClass(&quot;com.snapchat.client.messaging.SnapModeInfo&quot;).hookConstructor(HookStage.AFTER) { param -&gt;
</a><a href="#h10-0-12" id="h10-0-12" class="i">+            param.thisObject&lt;Any&gt;().dataBuilder {
</a><a href="#h10-0-13" id="h10-0-13" class="i">+                set(&quot;mSelfDestructSnapDurationMs&quot;, null)
</a><a href="#h10-0-14" id="h10-0-14" class="i">+            }
</a><a href="#h10-0-15" id="h10-0-15" class="i">+        }
</a><a href="#h10-0-16" id="h10-0-16" class="i">+    }
</a><a href="#h10-0-17" id="h10-0-17" class="i">+}</a><a href="#h10-0-18" id="h10-0-18" class="i">+
\ No newline at end of file
</a><b>diff --git a/<a id="h11" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/ui/CustomStreaksExpirationFormat.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/ui/CustomStreaksExpirationFormat.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/ui/CustomStreaksExpirationFormat.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/features/impl/ui/CustomStreaksExpirationFormat.kt</a></b>
<a href="#h11-0" id="h11-0" class="h">@@ -3,8 +3,12 @@ package me.rhunk.snapenhance.core.features.impl.ui
</a> import me.rhunk.snapenhance.core.features.Feature
 import me.rhunk.snapenhance.core.util.hook.HookStage
 import me.rhunk.snapenhance.core.util.hook.hook
<a href="#h11-0-3" id="h11-0-3" class="i">+import me.rhunk.snapenhance.core.util.hook.hookConstructor
</a> import me.rhunk.snapenhance.core.util.ktx.getObjectField
<a href="#h11-0-5" id="h11-0-5" class="i">+import me.rhunk.snapenhance.core.wrapper.impl.SnapUUID
</a> import me.rhunk.snapenhance.mapper.impl.StreaksExpirationMapper
<a href="#h11-0-7" id="h11-0-7" class="i">+import java.util.concurrent.ConcurrentHashMap
</a><a href="#h11-0-8" id="h11-0-8" class="i">+import kotlin.time.Duration.Companion.hours
</a> import kotlin.time.Duration.Companion.milliseconds
 
 class CustomStreaksExpirationFormat: Feature(&quot;CustomStreaksExpirationFormat&quot;) {
<a href="#h11-1" id="h11-1" class="h">@@ -12,44 +16,68 @@ class CustomStreaksExpirationFormat: Feature(&quot;CustomStreaksExpirationFormat&quot;) {
</a>         return this.toString().padStart(2, &#39;0&#39;)
     }
 
<a href="#h11-1-3" id="h11-1-3" class="i">+    private val streakCache = ConcurrentHashMap&lt;String, Pair&lt;Int, Long&gt;&gt;()
</a><a href="#h11-1-4" id="h11-1-4" class="i">+
</a>     override fun init() {
<a href="#h11-1-6" id="h11-1-6" class="i">+        context.classCache.feedEntry.hookConstructor(HookStage.AFTER) { param -&gt;
</a><a href="#h11-1-7" id="h11-1-7" class="i">+            val conversationId = SnapUUID(param.thisObject&lt;Any&gt;().getObjectField(&quot;mConversationId&quot;)).toString()
</a><a href="#h11-1-8" id="h11-1-8" class="i">+
</a><a href="#h11-1-9" id="h11-1-9" class="i">+            val streakMetadata = param.thisObject&lt;Any&gt;().getObjectField(&quot;mStreakMetadata&quot;) ?: apply {
</a><a href="#h11-1-10" id="h11-1-10" class="i">+                if (streakCache.containsKey(conversationId)) streakCache.remove(conversationId)
</a><a href="#h11-1-11" id="h11-1-11" class="i">+                return@hookConstructor
</a><a href="#h11-1-12" id="h11-1-12" class="i">+            }
</a><a href="#h11-1-13" id="h11-1-13" class="i">+
</a><a href="#h11-1-14" id="h11-1-14" class="i">+            streakCache.put(conversationId, streakMetadata.getObjectField(&quot;mCount&quot;) as Int to
</a><a href="#h11-1-15" id="h11-1-15" class="i">+                streakMetadata.getObjectField(&quot;mExpirationTimestampMs&quot;) as Long)
</a><a href="#h11-1-16" id="h11-1-16" class="i">+        }
</a><a href="#h11-1-17" id="h11-1-17" class="i">+
</a>         onNextActivityCreate {
             val expirationFormat by context.config.experimental.customStreaksExpirationFormat
             if (expirationFormat.isNotEmpty() || context.config.userInterface.streakExpirationInfo.get()) {
                 context.mappings.useMapper(StreaksExpirationMapper::class) {
<a href="#h11-1-22" id="h11-1-22" class="d">-                    runCatching {
</a><a href="#h11-1-23" id="h11-1-23" class="d">-                        simpleStreaksFormatterClass.getAsClass()?.hook(formatSimpleStreaksTextMethod.get() ?: return@useMapper, HookStage.BEFORE) { param -&gt;
</a><a href="#h11-1-24" id="h11-1-24" class="d">-                            param.setResult(null)
</a><a href="#h11-1-25" id="h11-1-25" class="i">+                    simpleStreaksFormatterClass.getAsClass()?.hook(
</a><a href="#h11-1-26" id="h11-1-26" class="i">+                        formatSimpleStreaksTextMethod.get() ?: return@useMapper,
</a><a href="#h11-1-27" id="h11-1-27" class="i">+                        HookStage.AFTER
</a><a href="#h11-1-28" id="h11-1-28" class="i">+                    ) { param -&gt;
</a><a href="#h11-1-29" id="h11-1-29" class="i">+                        val result = param.getResult() as? String ?: return@hook
</a><a href="#h11-1-30" id="h11-1-30" class="i">+
</a><a href="#h11-1-31" id="h11-1-31" class="i">+                        streakCache[param.arg&lt;String&gt;(1)]?.also { (streakCount, expirationTime) -&gt;
</a><a href="#h11-1-32" id="h11-1-32" class="i">+                            if (expirationTime &lt;= 0L) return@also
</a><a href="#h11-1-33" id="h11-1-33" class="i">+
</a><a href="#h11-1-34" id="h11-1-34" class="i">+                            if (expirationFormat.isEmpty()) {
</a><a href="#h11-1-35" id="h11-1-35" class="i">+                                val remainingTime = (expirationTime - System.currentTimeMillis()).milliseconds.inWholeHours
</a><a href="#h11-1-36" id="h11-1-36" class="i">+                                var emojiIndex = result.indexOfFirst { it.code &gt; 127 }.takeIf { it != -1 }
</a><a href="#h11-1-37" id="h11-1-37" class="i">+                                    ?.let { it + 2 }
</a><a href="#h11-1-38" id="h11-1-38" class="i">+
</a><a href="#h11-1-39" id="h11-1-39" class="i">+                                if (emojiIndex == null) {
</a><a href="#h11-1-40" id="h11-1-40" class="i">+                                    emojiIndex = result.length
</a><a href="#h11-1-41" id="h11-1-41" class="i">+                                }
</a><a href="#h11-1-42" id="h11-1-42" class="i">+
</a><a href="#h11-1-43" id="h11-1-43" class="i">+                                param.setResult(
</a><a href="#h11-1-44" id="h11-1-44" class="i">+                                    result.substring(0, emojiIndex) + remainingTime + result.substring(emojiIndex)
</a><a href="#h11-1-45" id="h11-1-45" class="i">+                                )
</a><a href="#h11-1-46" id="h11-1-46" class="i">+                                return@hook
</a><a href="#h11-1-47" id="h11-1-47" class="i">+                            }
</a><a href="#h11-1-48" id="h11-1-48" class="i">+
</a><a href="#h11-1-49" id="h11-1-49" class="i">+                            val delta = (expirationTime - System.currentTimeMillis()).milliseconds
</a><a href="#h11-1-50" id="h11-1-50" class="i">+
</a><a href="#h11-1-51" id="h11-1-51" class="i">+                            val hourGlassEmoji =
</a><a href="#h11-1-52" id="h11-1-52" class="i">+                                if (delta.inWholeMilliseconds in 1..(15.hours.inWholeMilliseconds)) if (expirationTime % 2 == 0L) &quot;\u23F3&quot; else &quot;\u231B&quot; else &quot;&quot;
</a><a href="#h11-1-53" id="h11-1-53" class="i">+
</a><a href="#h11-1-54" id="h11-1-54" class="i">+                            param.setResult(
</a><a href="#h11-1-55" id="h11-1-55" class="i">+                                expirationFormat
</a><a href="#h11-1-56" id="h11-1-56" class="i">+                                    .replace(&quot;%c&quot;, streakCount.toString())
</a><a href="#h11-1-57" id="h11-1-57" class="i">+                                    .replace(&quot;%e&quot;, hourGlassEmoji)
</a><a href="#h11-1-58" id="h11-1-58" class="i">+                                    .replace(&quot;%d&quot;, delta.inWholeDays.toString())
</a><a href="#h11-1-59" id="h11-1-59" class="i">+                                    .replace(&quot;%h&quot;, (delta.inWholeHours % 24).padZero())
</a><a href="#h11-1-60" id="h11-1-60" class="i">+                                    .replace(&quot;%m&quot;, (delta.inWholeMinutes % 60).padZero())
</a><a href="#h11-1-61" id="h11-1-61" class="i">+                                    .replace(&quot;%s&quot;, (delta.inWholeSeconds % 60).padZero())
</a><a href="#h11-1-62" id="h11-1-62" class="i">+                                    .replace(&quot;%w&quot;, delta.toString())
</a><a href="#h11-1-63" id="h11-1-63" class="i">+                            )
</a>                         }
<a href="#h11-1-65" id="h11-1-65" class="d">-                    }.onFailure {
</a><a href="#h11-1-66" id="h11-1-66" class="d">-                        context.log.warn(&quot;Failed to hook simpleStreaksFormatterClass : &quot; + it.message)
</a>                     }
                 }
             }
<a href="#h11-1-70" id="h11-1-70" class="d">-            if (expirationFormat.isEmpty()) return@onNextActivityCreate
</a><a href="#h11-1-71" id="h11-1-71" class="d">-
</a><a href="#h11-1-72" id="h11-1-72" class="d">-            context.mappings.useMapper(StreaksExpirationMapper::class) {
</a><a href="#h11-1-73" id="h11-1-73" class="d">-                streaksFormatterClass.getAsClass()?.hook(formatStreaksTextMethod.get() ?: return@useMapper, HookStage.AFTER) { param -&gt;
</a><a href="#h11-1-74" id="h11-1-74" class="d">-                    val streaksCount = param.argNullable(2) ?: 0
</a><a href="#h11-1-75" id="h11-1-75" class="d">-                    val streaksExpiration = param.argNullable&lt;Any&gt;(3) ?: return@hook
</a><a href="#h11-1-76" id="h11-1-76" class="d">-
</a><a href="#h11-1-77" id="h11-1-77" class="d">-                    val hourGlassTimeRemaining = streaksExpiration.getObjectField(hourGlassTimeRemainingField.get() ?: return@hook) as? Long ?: return@hook
</a><a href="#h11-1-78" id="h11-1-78" class="d">-                    val expirationTime = streaksExpiration.getObjectField(expirationTimeField.get() ?: return@hook) as? Long ?: return@hook
</a><a href="#h11-1-79" id="h11-1-79" class="d">-                    val delta = (expirationTime - System.currentTimeMillis()).milliseconds
</a><a href="#h11-1-80" id="h11-1-80" class="d">-
</a><a href="#h11-1-81" id="h11-1-81" class="d">-                    val hourGlassEmoji = if (delta.inWholeMilliseconds in 1..hourGlassTimeRemaining) if (expirationTime % 2 == 0L) &quot;\u23F3&quot; else &quot;\u231B&quot; else &quot;&quot;
</a><a href="#h11-1-82" id="h11-1-82" class="d">-
</a><a href="#h11-1-83" id="h11-1-83" class="d">-                    param.setResult(expirationFormat
</a><a href="#h11-1-84" id="h11-1-84" class="d">-                        .replace(&quot;%c&quot;, streaksCount.toString())
</a><a href="#h11-1-85" id="h11-1-85" class="d">-                        .replace(&quot;%e&quot;, hourGlassEmoji)
</a><a href="#h11-1-86" id="h11-1-86" class="d">-                        .replace(&quot;%d&quot;, delta.inWholeDays.toString())
</a><a href="#h11-1-87" id="h11-1-87" class="d">-                        .replace(&quot;%h&quot;, (delta.inWholeHours % 24).padZero())
</a><a href="#h11-1-88" id="h11-1-88" class="d">-                        .replace(&quot;%m&quot;, (delta.inWholeMinutes % 60).padZero())
</a><a href="#h11-1-89" id="h11-1-89" class="d">-                        .replace(&quot;%s&quot;, (delta.inWholeSeconds % 60).padZero())
</a><a href="#h11-1-90" id="h11-1-90" class="d">-                        .replace(&quot;%w&quot;, delta.toString())
</a><a href="#h11-1-91" id="h11-1-91" class="d">-                    )
</a><a href="#h11-1-92" id="h11-1-92" class="d">-                }
</a><a href="#h11-1-93" id="h11-1-93" class="d">-            }
</a>         }
     }
 } 
\ No newline at end of file
<b>diff --git a/<a id="h12" href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/ui/menu/MenuViewInjector.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/ui/menu/MenuViewInjector.kt</a> b/<a href="../file/core/src/main/kotlin/me/rhunk/snapenhance/core/ui/menu/MenuViewInjector.kt.html">core/src/main/kotlin/me/rhunk/snapenhance/core/ui/menu/MenuViewInjector.kt</a></b>
<a href="#h12-0" id="h12-0" class="h">@@ -38,8 +38,7 @@ class MenuViewInjector : Feature(&quot;MenuViewInjector&quot;) {
</a>         onNextActivityCreate(defer = true) {
             menuMap.forEach { it.value.init() }
 
<a href="#h12-0-3" id="h12-0-3" class="d">-            val chatActionMenu = context.resources.getIdentifier(&quot;chat_action_menu&quot;, &quot;id&quot;)
</a><a href="#h12-0-4" id="h12-0-4" class="d">-            val hasV2ActionMenu = { context.feature(COFOverride::class).hasActionMenuV2 }
</a><a href="#h12-0-5" id="h12-0-5" class="i">+            val hasV2ActionMenu = { true }
</a> 
             context.event.subscribe(AddViewEvent::class) { event -&gt;
                 menuMap.forEach { it.value.onViewAdded(event) }
<b>diff --git a/<a id="h13" href="../file/mapper/src/main/kotlin/me/rhunk/snapenhance/mapper/impl/StreaksExpirationMapper.kt.html">mapper/src/main/kotlin/me/rhunk/snapenhance/mapper/impl/StreaksExpirationMapper.kt</a> b/<a href="../file/mapper/src/main/kotlin/me/rhunk/snapenhance/mapper/impl/StreaksExpirationMapper.kt.html">mapper/src/main/kotlin/me/rhunk/snapenhance/mapper/impl/StreaksExpirationMapper.kt</a></b>
<a href="#h13-0" id="h13-0" class="h">@@ -3,16 +3,9 @@ package me.rhunk.snapenhance.mapper.impl
</a> import me.rhunk.snapenhance.mapper.AbstractClassMapper
 import me.rhunk.snapenhance.mapper.ext.findConstString
 import me.rhunk.snapenhance.mapper.ext.getClassName
<a href="#h13-0-3" id="h13-0-3" class="d">-import me.rhunk.snapenhance.mapper.ext.searchNextFieldReference
</a> import java.lang.reflect.Modifier
 
 class StreaksExpirationMapper: AbstractClassMapper(&quot;StreaksExpirationMapper&quot;) {
<a href="#h13-0-7" id="h13-0-7" class="d">-    val hourGlassTimeRemainingField = string(&quot;hourGlassTimeRemainingField&quot;)
</a><a href="#h13-0-8" id="h13-0-8" class="d">-    val expirationTimeField = string(&quot;expirationTimeField&quot;)
</a><a href="#h13-0-9" id="h13-0-9" class="d">-
</a><a href="#h13-0-10" id="h13-0-10" class="d">-    val streaksFormatterClass = classReference(&quot;streaksFormatterClass&quot;)
</a><a href="#h13-0-11" id="h13-0-11" class="d">-    val formatStreaksTextMethod = string(&quot;formatStreaksTextMethod&quot;)
</a><a href="#h13-0-12" id="h13-0-12" class="d">-
</a>     val simpleStreaksFormatterClass = classReference(&quot;simpleStreaksFormatterClass&quot;)
     val formatSimpleStreaksTextMethod = string(&quot;formatSimpleStreaksTextMethod&quot;)
 
<a href="#h13-1" id="h13-1" class="h">@@ -41,35 +34,5 @@ class StreaksExpirationMapper: AbstractClassMapper(&quot;StreaksExpirationMapper&quot;) {
</a>                 return@mapper
             }
         }
<a href="#h13-1-3" id="h13-1-3" class="d">-
</a><a href="#h13-1-4" id="h13-1-4" class="d">-        mapper {
</a><a href="#h13-1-5" id="h13-1-5" class="d">-            var streaksExpirationClassName: String? = null
</a><a href="#h13-1-6" id="h13-1-6" class="d">-            for (clazz in classes) {
</a><a href="#h13-1-7" id="h13-1-7" class="d">-                val toStringMethod = clazz.methods.firstOrNull { it.name == &quot;toString&quot; } ?: continue
</a><a href="#h13-1-8" id="h13-1-8" class="d">-                if (toStringMethod.implementation?.findConstString(&quot;StreaksExpiration(&quot;, contains = true) != true) continue
</a><a href="#h13-1-9" id="h13-1-9" class="d">-
</a><a href="#h13-1-10" id="h13-1-10" class="d">-                streaksExpirationClassName = clazz.getClassName()
</a><a href="#h13-1-11" id="h13-1-11" class="d">-                toStringMethod.implementation?.apply {
</a><a href="#h13-1-12" id="h13-1-12" class="d">-                    hourGlassTimeRemainingField.set(searchNextFieldReference(&quot;hourGlassTimeRemaining&quot;, contains = true)?.name)
</a><a href="#h13-1-13" id="h13-1-13" class="d">-                    expirationTimeField.set(searchNextFieldReference(&quot;expirationTime&quot;, contains = true)?.name)
</a><a href="#h13-1-14" id="h13-1-14" class="d">-                }
</a><a href="#h13-1-15" id="h13-1-15" class="d">-                break
</a><a href="#h13-1-16" id="h13-1-16" class="d">-            }
</a><a href="#h13-1-17" id="h13-1-17" class="d">-
</a><a href="#h13-1-18" id="h13-1-18" class="d">-            if (streaksExpirationClassName == null) return@mapper
</a><a href="#h13-1-19" id="h13-1-19" class="d">-
</a><a href="#h13-1-20" id="h13-1-20" class="d">-            for (clazz in classes) {
</a><a href="#h13-1-21" id="h13-1-21" class="d">-                val formatStreaksTextDexMethod = clazz.methods.firstOrNull { method -&gt;
</a><a href="#h13-1-22" id="h13-1-22" class="d">-                    Modifier.isStatic(method.accessFlags) &amp;&amp;
</a><a href="#h13-1-23" id="h13-1-23" class="d">-                    method.returnType == &quot;Ljava/lang/String;&quot; &amp;&amp;
</a><a href="#h13-1-24" id="h13-1-24" class="d">-                    method.parameterTypes.let {
</a><a href="#h13-1-25" id="h13-1-25" class="d">-                        it.size &gt;= 4 &amp;&amp; it[0] == &quot;Ljava/util/Map;&quot; &amp;&amp; it[2] == &quot;Ljava/lang/Integer;&quot; &amp;&amp; it[3].contains(streaksExpirationClassName)
</a><a href="#h13-1-26" id="h13-1-26" class="d">-                    }
</a><a href="#h13-1-27" id="h13-1-27" class="d">-                } ?: continue
</a><a href="#h13-1-28" id="h13-1-28" class="d">-                streaksFormatterClass.set(clazz.getClassName())
</a><a href="#h13-1-29" id="h13-1-29" class="d">-                formatStreaksTextMethod.set(formatStreaksTextDexMethod.name)
</a><a href="#h13-1-30" id="h13-1-30" class="d">-                break
</a><a href="#h13-1-31" id="h13-1-31" class="d">-            }
</a><a href="#h13-1-32" id="h13-1-32" class="d">-        }
</a>     }
 } 
\ No newline at end of file
<b>diff --git a/<a id="h14" href="../file/native/rust/.cargo/config.toml.html">native/rust/.cargo/config.toml</a> b/<a href="../file/native/rust/.cargo/config.toml.html">native/rust/.cargo/config.toml</a></b>
<a href="#h14-0" id="h14-0" class="h">@@ -0,0 +1,2 @@
</a><a href="#h14-0-0" id="h14-0-0" class="i">+[build]
</a><a href="#h14-0-1" id="h14-0-1" class="i">+target = &quot;aarch64-linux-android&quot;</a><a href="#h14-0-2" id="h14-0-2" class="i">+
\ No newline at end of file
</a></pre>
</div>
</body>
</html>
