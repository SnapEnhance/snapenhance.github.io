<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>feat: camera settings override (#51) - SnapEnhance - An Xposed module offering an enhanced Snapchat experience
</title>
<link rel="icon" type="image/svg+xml" href="../../logo.png"/>
<link rel="alternate icon" href="../../favicon.png"/>
<link rel="alternate" type="application/atom+xml" title="SnapEnhance Atom Feed" href="../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="SnapEnhance Atom Feed (tags)" href="../tags.xml" />
<link rel="stylesheet" type="text/css" href="../../style.css" />
<link rel="stylesheet" type="text/css" href="../../fonts.css" />
</head>
<body>
<div id="head"><table><tr><td><a class="logo" href="../../"><img src="../../logo.png" alt="" width="32" height="32" /></a></td><td><strong>SnapEnhance</strong><span class="desc"> - An Xposed module offering an enhanced Snapchat experience
</span>
</td></tr></table>
<p><a href="../about.html">About</a> | <a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/LICENSE.html">License</a></p>
</div>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/0b80489a1d068cf576ee84bea073dfa1e144432b.html">0b80489a1d068cf576ee84bea073dfa1e144432b</a>
<b>parent</b> <a href="../commit/9e9d82ab06c9ce63207f44c9cde071bbe9b57569.html">9e9d82ab06c9ce63207f44c9cde071bbe9b57569</a>
<b>Author:</b> auth &lt;<a href="mailto:64337177+authorisation@users.noreply.github.com">64337177+authorisation@users.noreply.github.com</a>&gt;
<b>Date:</b>   Fri,  9 Jun 2023 02:45:41 +0200

feat: camera settings override (#51)

* feat: camera tweaks

* refact: force media source quality

---------

Co-authored-by: rhunk &lt;101876869+rhunk@users.noreply.github.com&gt;
<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">app/src/main/assets/lang/en_US.json</a></td><td> | </td><td class="num">9</td><td><span class="i">+++++++</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h1">app/src/main/kotlin/me/rhunk/snapenhance/config/ConfigCategory.kt</a></td><td> | </td><td class="num">1</td><td><span class="i">+</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h2">app/src/main/kotlin/me/rhunk/snapenhance/config/ConfigProperty.kt</a></td><td> | </td><td class="num">55</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++</span><span class="d">--------------</span></td></tr>
<tr><td class="A">A</td><td><a href="#h3">app/src/main/kotlin/me/rhunk/snapenhance/data/wrapper/impl/ScSize.kt</a></td><td> | </td><td class="num">27</td><td><span class="i">+++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h4">app/src/main/kotlin/me/rhunk/snapenhance/features/impl/ConfigEnumKeys.kt</a></td><td> | </td><td class="num">59</td><td><span class="i">++++++++++++++++++++++++++++++++++++++</span><span class="d">---------------------</span></td></tr>
<tr><td class="A">A</td><td><a href="#h5">app/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/CameraTweaks.kt</a></td><td> | </td><td class="num">53</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h6">app/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/MediaQualityLevelOverride.kt</a></td><td> | </td><td class="num">9</td><td><span class="i">++</span><span class="d">-------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h7">app/src/main/kotlin/me/rhunk/snapenhance/features/impl/ui/menus/impl/SettingsMenu.kt</a></td><td> | </td><td class="num">34</td><td><span class="i">++++++++++++++++++++++++++</span><span class="d">--------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h8">app/src/main/kotlin/me/rhunk/snapenhance/manager/impl/FeatureManager.kt</a></td><td> | </td><td class="num">2</td><td><span class="i">++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h9">app/src/main/kotlin/me/rhunk/snapenhance/manager/impl/MappingManager.kt</a></td><td> | </td><td class="num">5</td><td><span class="i">++++</span><span class="d">-</span></td></tr>
<tr><td class="A">A</td><td><a href="#h10">app/src/main/kotlin/me/rhunk/snapenhance/mapping/impl/ScCameraSettingsMapper.kt</a></td><td> | </td><td class="num">22</td><td><span class="i">++++++++++++++++++++++</span><span class="d"></span></td></tr>
</table></pre><pre>11 files changed, 223 insertions(+), 53 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/app/src/main/assets/lang/en_US.json.html">app/src/main/assets/lang/en_US.json</a> b/<a href="../file/app/src/main/assets/lang/en_US.json.html">app/src/main/assets/lang/en_US.json</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -3,6 +3,7 @@
</a>         &quot;spying_privacy&quot;: &quot;Spying &amp; Privacy&quot;,
         &quot;media_manager&quot;: &quot;Media Manager&quot;,
         &quot;ui_tweaks&quot;: &quot;UI &amp; Tweaks&quot;,
<a href="#h0-0-3" id="h0-0-3" class="i">+        &quot;camera&quot;: &quot;Camera&quot;,
</a>         &quot;updates&quot;: &quot;Updates&quot;,
         &quot;experimental_debugging&quot;: &quot;Experimental&quot;
     },
<a href="#h0-1" id="h0-1" class="h">@@ -41,7 +42,7 @@
</a>         &quot;snapchat_plus&quot;: &quot;Snapchat Plus&quot;,
         &quot;disable_snap_splitting&quot;: &quot;Disable Snap Splitting&quot;,
         &quot;disable_video_length_restriction&quot;: &quot;Disable Video Length Restriction&quot;,
<a href="#h0-1-3" id="h0-1-3" class="d">-        &quot;override_media_quality&quot;: &quot;Override Media Quality&quot;,
</a><a href="#h0-1-4" id="h0-1-4" class="i">+        &quot;force_media_source_quality&quot;: &quot;Force Media Source Quality&quot;,
</a>         &quot;media_quality_level&quot;: &quot;Media Quality Level&quot;,
         &quot;remove_voice_record_button&quot;: &quot;Remove Voice Record Button&quot;,
         &quot;remove_stickers_button&quot;: &quot;Remove Stickers Button&quot;,
<a href="#h0-2" id="h0-2" class="h">@@ -61,7 +62,11 @@
</a>         &quot;auto_updater&quot;: &quot;Auto Updater&quot;,
         &quot;infinite_story_boost&quot;: &quot;Infinite Story Boost&quot;,
         &quot;enable_app_appearance&quot;: &quot;Enable App Appearance Settings&quot;,
<a href="#h0-2-3" id="h0-2-3" class="d">-        &quot;disable_spotlight&quot;: &quot;Disable Spotlight&quot;
</a><a href="#h0-2-4" id="h0-2-4" class="i">+        &quot;disable_spotlight&quot;: &quot;Disable Spotlight&quot;,
</a><a href="#h0-2-5" id="h0-2-5" class="i">+        &quot;preview_resolution&quot;: &quot;Override Preview Resolution&quot;,
</a><a href="#h0-2-6" id="h0-2-6" class="i">+        &quot;picture_resolution&quot;: &quot;Override Picture Resolution&quot;,
</a><a href="#h0-2-7" id="h0-2-7" class="i">+        &quot;force_highest_frame_rate&quot;: &quot;Force Highest Frame Rate&quot;,
</a><a href="#h0-2-8" id="h0-2-8" class="i">+        &quot;force_camera_source_encoding&quot;: &quot;Force Camera Source Encoding&quot;
</a>     },
 
     &quot;option&quot;: {
<b>diff --git a/<a id="h1" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/config/ConfigCategory.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/config/ConfigCategory.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/config/ConfigCategory.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/config/ConfigCategory.kt</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -7,5 +7,6 @@ enum class ConfigCategory(
</a>     MEDIA_MANAGEMENT(&quot;category.media_manager&quot;),
     UI_TWEAKS(&quot;category.ui_tweaks&quot;),
     UPDATES(&quot;category.updates&quot;),
<a href="#h1-0-3" id="h1-0-3" class="i">+    CAMERA(&quot;category.camera&quot;),
</a>     EXPERIMENTAL_DEBUGGING(&quot;category.experimental_debugging&quot;);
 }
<b>diff --git a/<a id="h2" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/config/ConfigProperty.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/config/ConfigProperty.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/config/ConfigProperty.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/config/ConfigProperty.kt</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -6,6 +6,7 @@ import me.rhunk.snapenhance.config.impl.ConfigStateListValue
</a> import me.rhunk.snapenhance.config.impl.ConfigStateSelection
 import me.rhunk.snapenhance.config.impl.ConfigStateValue
 import me.rhunk.snapenhance.config.impl.ConfigStringValue
<a href="#h2-0-3" id="h2-0-3" class="i">+import me.rhunk.snapenhance.features.impl.tweaks.CameraTweaks
</a> import java.io.File
 
 enum class ConfigProperty(
<a href="#h2-1" id="h2-1" class="h">@@ -13,7 +14,8 @@ enum class ConfigProperty(
</a>     val descriptionKey: String,
     val category: ConfigCategory,
     val valueContainer: ConfigValue&lt;*&gt;,
<a href="#h2-1-3" id="h2-1-3" class="d">-    val shouldAppearInSettings: Boolean = true
</a><a href="#h2-1-4" id="h2-1-4" class="i">+    val shouldAppearInSettings: Boolean = true,
</a><a href="#h2-1-5" id="h2-1-5" class="i">+    val disableValueLocalization: Boolean = false
</a> ) {
 
     //SPYING AND PRIVACY
<a href="#h2-2" id="h2-2" class="h">@@ -166,22 +168,13 @@ enum class ConfigProperty(
</a>         ConfigCategory.MEDIA_MANAGEMENT,
         ConfigStateValue(false)
     ),
<a href="#h2-2-3" id="h2-2-3" class="d">-    
</a><a href="#h2-2-4" id="h2-2-4" class="d">-    OVERRIDE_MEDIA_QUALITY(
</a><a href="#h2-2-5" id="h2-2-5" class="d">-        &quot;property.override_media_quality&quot;,
</a><a href="#h2-2-6" id="h2-2-6" class="d">-        &quot;description.override_media_quality&quot;,
</a><a href="#h2-2-7" id="h2-2-7" class="i">+
</a><a href="#h2-2-8" id="h2-2-8" class="i">+    FORCE_MEDIA_SOURCE_QUALITY(
</a><a href="#h2-2-9" id="h2-2-9" class="i">+        &quot;property.force_media_source_quality&quot;,
</a><a href="#h2-2-10" id="h2-2-10" class="i">+        &quot;description.force_media_source_quality&quot;,
</a>         ConfigCategory.MEDIA_MANAGEMENT,
         ConfigStateValue(false)
     ),
<a href="#h2-2-14" id="h2-2-14" class="d">-    MEDIA_QUALITY_LEVEL(
</a><a href="#h2-2-15" id="h2-2-15" class="d">-        &quot;property.media_quality_level&quot;,
</a><a href="#h2-2-16" id="h2-2-16" class="d">-        &quot;description.media_quality_level&quot;,
</a><a href="#h2-2-17" id="h2-2-17" class="d">-        ConfigCategory.MEDIA_MANAGEMENT,
</a><a href="#h2-2-18" id="h2-2-18" class="d">-        ConfigStateSelection(
</a><a href="#h2-2-19" id="h2-2-19" class="d">-            listOf(&quot;LEVEL_NONE&quot;, &quot;LEVEL_1&quot;, &quot;LEVEL_2&quot;, &quot;LEVEL_3&quot;, &quot;LEVEL_4&quot;, &quot;LEVEL_5&quot;, &quot;LEVEL_6&quot;, &quot;LEVEL_7&quot;, &quot;LEVEL_MAX&quot;),
</a><a href="#h2-2-20" id="h2-2-20" class="d">-            &quot;LEVEL_NONE&quot;
</a><a href="#h2-2-21" id="h2-2-21" class="d">-        )
</a><a href="#h2-2-22" id="h2-2-22" class="d">-    ),
</a>     
     //UI AND TWEAKS
     HIDE_UI_ELEMENTS(
<a href="#h2-3" id="h2-3" class="h">@@ -272,6 +265,40 @@ enum class ConfigProperty(
</a>     ),
 
 
<a href="#h2-3-3" id="h2-3-3" class="i">+    //CAMERA
</a><a href="#h2-3-4" id="h2-3-4" class="i">+    OVERRIDE_PREVIEW_RESOLUTION(
</a><a href="#h2-3-5" id="h2-3-5" class="i">+        &quot;property.preview_resolution&quot;,
</a><a href="#h2-3-6" id="h2-3-6" class="i">+        &quot;description.preview_resolution&quot;,
</a><a href="#h2-3-7" id="h2-3-7" class="i">+        ConfigCategory.CAMERA,
</a><a href="#h2-3-8" id="h2-3-8" class="i">+        ConfigStateSelection(
</a><a href="#h2-3-9" id="h2-3-9" class="i">+            CameraTweaks.resolutions,
</a><a href="#h2-3-10" id="h2-3-10" class="i">+            &quot;OFF&quot;
</a><a href="#h2-3-11" id="h2-3-11" class="i">+        ),
</a><a href="#h2-3-12" id="h2-3-12" class="i">+        disableValueLocalization = true
</a><a href="#h2-3-13" id="h2-3-13" class="i">+    ),
</a><a href="#h2-3-14" id="h2-3-14" class="i">+    OVERRIDE_PICTURE_RESOLUTION(
</a><a href="#h2-3-15" id="h2-3-15" class="i">+        &quot;property.picture_resolution&quot;,
</a><a href="#h2-3-16" id="h2-3-16" class="i">+        &quot;description.picture_resolution&quot;,
</a><a href="#h2-3-17" id="h2-3-17" class="i">+        ConfigCategory.CAMERA,
</a><a href="#h2-3-18" id="h2-3-18" class="i">+        ConfigStateSelection(
</a><a href="#h2-3-19" id="h2-3-19" class="i">+            CameraTweaks.resolutions,
</a><a href="#h2-3-20" id="h2-3-20" class="i">+            &quot;OFF&quot;
</a><a href="#h2-3-21" id="h2-3-21" class="i">+        ),
</a><a href="#h2-3-22" id="h2-3-22" class="i">+        disableValueLocalization = true
</a><a href="#h2-3-23" id="h2-3-23" class="i">+    ),
</a><a href="#h2-3-24" id="h2-3-24" class="i">+    FORCE_HIGHEST_FRAME_RATE(
</a><a href="#h2-3-25" id="h2-3-25" class="i">+        &quot;property.force_highest_frame_rate&quot;,
</a><a href="#h2-3-26" id="h2-3-26" class="i">+        &quot;description.force_highest_frame_rate&quot;,
</a><a href="#h2-3-27" id="h2-3-27" class="i">+        ConfigCategory.CAMERA,
</a><a href="#h2-3-28" id="h2-3-28" class="i">+        ConfigStateValue(false)
</a><a href="#h2-3-29" id="h2-3-29" class="i">+    ),
</a><a href="#h2-3-30" id="h2-3-30" class="i">+    FORCE_CAMERA_SOURCE_ENCODING(
</a><a href="#h2-3-31" id="h2-3-31" class="i">+        &quot;property.force_camera_source_encoding&quot;,
</a><a href="#h2-3-32" id="h2-3-32" class="i">+        &quot;description.force_camera_source_encoding&quot;,
</a><a href="#h2-3-33" id="h2-3-33" class="i">+        ConfigCategory.CAMERA,
</a><a href="#h2-3-34" id="h2-3-34" class="i">+        ConfigStateValue(false)
</a><a href="#h2-3-35" id="h2-3-35" class="i">+    ),
</a><a href="#h2-3-36" id="h2-3-36" class="i">+
</a>     // UPDATES
     AUTO_UPDATER(
         &quot;property.auto_updater&quot;,
<b>diff --git a/<a id="h3" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/data/wrapper/impl/ScSize.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/data/wrapper/impl/ScSize.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/data/wrapper/impl/ScSize.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/data/wrapper/impl/ScSize.kt</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -0,0 +1,26 @@
</a><a href="#h3-0-0" id="h3-0-0" class="i">+package me.rhunk.snapenhance.data.wrapper.impl
</a><a href="#h3-0-1" id="h3-0-1" class="i">+
</a><a href="#h3-0-2" id="h3-0-2" class="i">+import me.rhunk.snapenhance.data.wrapper.AbstractWrapper
</a><a href="#h3-0-3" id="h3-0-3" class="i">+
</a><a href="#h3-0-4" id="h3-0-4" class="i">+class ScSize(
</a><a href="#h3-0-5" id="h3-0-5" class="i">+    obj: Any?
</a><a href="#h3-0-6" id="h3-0-6" class="i">+) : AbstractWrapper(obj) {
</a><a href="#h3-0-7" id="h3-0-7" class="i">+    private val firstField by lazy {
</a><a href="#h3-0-8" id="h3-0-8" class="i">+        instanceNonNull().javaClass.declaredFields.first { it.type == Int::class.javaPrimitiveType }.also { it.isAccessible = true }
</a><a href="#h3-0-9" id="h3-0-9" class="i">+    }
</a><a href="#h3-0-10" id="h3-0-10" class="i">+
</a><a href="#h3-0-11" id="h3-0-11" class="i">+    private val secondField by lazy {
</a><a href="#h3-0-12" id="h3-0-12" class="i">+        instanceNonNull().javaClass.declaredFields.last { it.type == Int::class.javaPrimitiveType }.also { it.isAccessible = true }
</a><a href="#h3-0-13" id="h3-0-13" class="i">+    }
</a><a href="#h3-0-14" id="h3-0-14" class="i">+
</a><a href="#h3-0-15" id="h3-0-15" class="i">+
</a><a href="#h3-0-16" id="h3-0-16" class="i">+    var first: Int get() = firstField.getInt(instanceNonNull())
</a><a href="#h3-0-17" id="h3-0-17" class="i">+        set(value) {
</a><a href="#h3-0-18" id="h3-0-18" class="i">+            firstField.setInt(instanceNonNull(), value)
</a><a href="#h3-0-19" id="h3-0-19" class="i">+        }
</a><a href="#h3-0-20" id="h3-0-20" class="i">+
</a><a href="#h3-0-21" id="h3-0-21" class="i">+    var second: Int get() = secondField.getInt(instanceNonNull())
</a><a href="#h3-0-22" id="h3-0-22" class="i">+        set(value) {
</a><a href="#h3-0-23" id="h3-0-23" class="i">+            secondField.setInt(instanceNonNull(), value)
</a><a href="#h3-0-24" id="h3-0-24" class="i">+        }
</a><a href="#h3-0-25" id="h3-0-25" class="i">+}</a><a href="#h3-0-26" id="h3-0-26" class="i">+
\ No newline at end of file
</a><b>diff --git a/<a id="h4" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/features/impl/ConfigEnumKeys.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/features/impl/ConfigEnumKeys.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/features/impl/ConfigEnumKeys.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/features/impl/ConfigEnumKeys.kt</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -6,31 +6,48 @@ import me.rhunk.snapenhance.features.Feature
</a> import me.rhunk.snapenhance.features.FeatureLoadParams
 import me.rhunk.snapenhance.hook.HookStage
 import me.rhunk.snapenhance.hook.hook
<a href="#h4-0-3" id="h4-0-3" class="i">+import me.rhunk.snapenhance.util.getObjectField
</a> import me.rhunk.snapenhance.util.setObjectField
 import java.lang.reflect.Field
 import java.lang.reflect.Modifier
<a href="#h4-0-7" id="h4-0-7" class="i">+import java.lang.reflect.Type
</a> 
 class ConfigEnumKeys : Feature(&quot;Config enum keys&quot;, loadParams = FeatureLoadParams.ACTIVITY_CREATE_SYNC) {
<a href="#h4-0-10" id="h4-0-10" class="d">-    private fun hookAllEnums(enumClass: Class&lt;*&gt;, callback: (String, (Any) -&gt; Unit) -&gt; Unit) {
</a><a href="#h4-0-11" id="h4-0-11" class="d">-        //Enum(String, int, ?)
</a><a href="#h4-0-12" id="h4-0-12" class="d">-        //or Enum(?)
</a><a href="#h4-0-13" id="h4-0-13" class="d">-        val enumDataClass = enumClass.constructors[0].parameterTypes.first { clazz: Class&lt;*&gt; -&gt; clazz != String::class.java &amp;&amp; !clazz.isPrimitive }
</a> 
<a href="#h4-0-15" id="h4-0-15" class="d">-        //get the field which contains the enum data class
</a><a href="#h4-0-16" id="h4-0-16" class="d">-        val enumDataField = enumClass.declaredFields.first { field: Field -&gt; field.type == enumDataClass }
</a><a href="#h4-0-17" id="h4-0-17" class="i">+    data class HookEnumContext(
</a><a href="#h4-0-18" id="h4-0-18" class="i">+        val key: String,
</a><a href="#h4-0-19" id="h4-0-19" class="i">+        val type: Type?,
</a><a href="#h4-0-20" id="h4-0-20" class="i">+        val value: Any?,
</a><a href="#h4-0-21" id="h4-0-21" class="i">+        val set: (Any) -&gt; Unit
</a><a href="#h4-0-22" id="h4-0-22" class="i">+    )
</a> 
<a href="#h4-0-24" id="h4-0-24" class="d">-        //get the field value of the enum data class (the first field of the class with the desc Object)
</a><a href="#h4-0-25" id="h4-0-25" class="d">-        val objectDataField = enumDataField.type.fields.first { field: Field -&gt;
</a><a href="#h4-0-26" id="h4-0-26" class="d">-            field.type == Any::class.java &amp;&amp; Modifier.isPublic(
</a><a href="#h4-0-27" id="h4-0-27" class="d">-                field.modifiers
</a><a href="#h4-0-28" id="h4-0-28" class="d">-            ) &amp;&amp; Modifier.isFinal(field.modifiers)
</a><a href="#h4-0-29" id="h4-0-29" class="d">-        }
</a><a href="#h4-0-30" id="h4-0-30" class="i">+    companion object {
</a><a href="#h4-0-31" id="h4-0-31" class="i">+        fun hookAllEnums(enumClass: Class&lt;*&gt;, callback: HookEnumContext.() -&gt; Unit) {
</a><a href="#h4-0-32" id="h4-0-32" class="i">+            //Enum(String, int, ?)
</a><a href="#h4-0-33" id="h4-0-33" class="i">+            //or Enum(?)
</a><a href="#h4-0-34" id="h4-0-34" class="i">+            val enumDataClass = enumClass.constructors[0].parameterTypes.first { clazz: Class&lt;*&gt; -&gt; clazz != String::class.java &amp;&amp; !clazz.isPrimitive }
</a><a href="#h4-0-35" id="h4-0-35" class="i">+
</a><a href="#h4-0-36" id="h4-0-36" class="i">+            //get the field which contains the enum data class
</a><a href="#h4-0-37" id="h4-0-37" class="i">+            val enumDataField = enumClass.declaredFields.first { field: Field -&gt; field.type == enumDataClass }
</a><a href="#h4-0-38" id="h4-0-38" class="i">+
</a><a href="#h4-0-39" id="h4-0-39" class="i">+            val typeField = enumDataClass.declaredFields.first { field: Field -&gt; field.type == Type::class.java }
</a><a href="#h4-0-40" id="h4-0-40" class="i">+
</a><a href="#h4-0-41" id="h4-0-41" class="i">+            //get the field value of the enum data class (the first field of the class with the desc Object)
</a><a href="#h4-0-42" id="h4-0-42" class="i">+            val objectDataField = enumDataField.type.fields.first { field: Field -&gt;
</a><a href="#h4-0-43" id="h4-0-43" class="i">+                field.type == Any::class.java &amp;&amp; Modifier.isPublic(
</a><a href="#h4-0-44" id="h4-0-44" class="i">+                    field.modifiers
</a><a href="#h4-0-45" id="h4-0-45" class="i">+                ) &amp;&amp; Modifier.isFinal(field.modifiers)
</a><a href="#h4-0-46" id="h4-0-46" class="i">+            }
</a> 
<a href="#h4-0-48" id="h4-0-48" class="d">-        enumClass.enumConstants.forEach { enum -&gt;
</a><a href="#h4-0-49" id="h4-0-49" class="d">-            enumDataField.get(enum)?.let { enumData -&gt;
</a><a href="#h4-0-50" id="h4-0-50" class="d">-                val key = enum.toString()
</a><a href="#h4-0-51" id="h4-0-51" class="d">-                callback(key) { newValue -&gt;
</a><a href="#h4-0-52" id="h4-0-52" class="d">-                    enumData.setObjectField(objectDataField.name, newValue)
</a><a href="#h4-0-53" id="h4-0-53" class="i">+            enumClass.enumConstants.forEach { enum -&gt;
</a><a href="#h4-0-54" id="h4-0-54" class="i">+                enumDataField.get(enum)?.let { enumData -&gt;
</a><a href="#h4-0-55" id="h4-0-55" class="i">+                    val key = enum.toString()
</a><a href="#h4-0-56" id="h4-0-56" class="i">+                    val type = typeField.get(enumData) as Type?
</a><a href="#h4-0-57" id="h4-0-57" class="i">+                    val value = enumData.getObjectField(objectDataField.name)
</a><a href="#h4-0-58" id="h4-0-58" class="i">+                    val set = { newValue: Any -&gt;
</a><a href="#h4-0-59" id="h4-0-59" class="i">+                        enumData.setObjectField(objectDataField.name, newValue)
</a><a href="#h4-0-60" id="h4-0-60" class="i">+                    }
</a><a href="#h4-0-61" id="h4-0-61" class="i">+                    callback(HookEnumContext(key, type, value, set))
</a>                 }
             }
         }
<a href="#h4-1" id="h4-1" class="h">@@ -39,25 +56,25 @@ class ConfigEnumKeys : Feature(&quot;Config enum keys&quot;, loadParams = FeatureLoadParam
</a>     @SuppressLint(&quot;PrivateApi&quot;)
     override fun onActivityCreate() {
         if (context.config.bool(ConfigProperty.NEW_MAP_UI)) {
<a href="#h4-1-3" id="h4-1-3" class="d">-            hookAllEnums(context.mappings.getMappedClass(&quot;enums&quot;, &quot;PLUS&quot;)) { key, set -&gt;
</a><a href="#h4-1-4" id="h4-1-4" class="i">+            hookAllEnums(context.mappings.getMappedClass(&quot;enums&quot;, &quot;PLUS&quot;)) {
</a>                 if (key == &quot;REDUCE_MY_PROFILE_UI_COMPLEXITY&quot;) set(true)
             }
         }
 
<a href="#h4-1-9" id="h4-1-9" class="d">-        hookAllEnums(context.mappings.getMappedClass(&quot;enums&quot;, &quot;ARROYO&quot;)) { key, set -&gt;
</a><a href="#h4-1-10" id="h4-1-10" class="i">+        hookAllEnums(context.mappings.getMappedClass(&quot;enums&quot;, &quot;ARROYO&quot;)) {
</a>             if (key == &quot;ENABLE_LONG_SNAP_SENDING&quot;) {
                 if (context.config.bool(ConfigProperty.DISABLE_SNAP_SPLITTING)) set(true)
             }
         }
 
         if (context.config.bool(ConfigProperty.STREAK_EXPIRATION_INFO)) {
<a href="#h4-1-17" id="h4-1-17" class="d">-            hookAllEnums(context.mappings.getMappedClass(&quot;enums&quot;, &quot;FRIENDS_FEED&quot;)) { key, set -&gt;
</a><a href="#h4-1-18" id="h4-1-18" class="i">+            hookAllEnums(context.mappings.getMappedClass(&quot;enums&quot;, &quot;FRIENDS_FEED&quot;)) {
</a>                 if (key == &quot;STREAK_EXPIRATION_INFO&quot;) set(true)
             }
         }
 
         if (context.config.bool(ConfigProperty.BLOCK_ADS)) {
<a href="#h4-1-24" id="h4-1-24" class="d">-            hookAllEnums(context.mappings.getMappedClass(&quot;enums&quot;, &quot;SNAPADS&quot;)) { key, set -&gt;
</a><a href="#h4-1-25" id="h4-1-25" class="i">+            hookAllEnums(context.mappings.getMappedClass(&quot;enums&quot;, &quot;SNAPADS&quot;)) {
</a>                 if (key == &quot;BYPASS_AD_FEATURE_GATE&quot;) {
                     set(true)
                 }
<b>diff --git a/<a id="h5" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/CameraTweaks.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/CameraTweaks.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/CameraTweaks.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/CameraTweaks.kt</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -0,0 +1,52 @@
</a><a href="#h5-0-0" id="h5-0-0" class="i">+package me.rhunk.snapenhance.features.impl.tweaks
</a><a href="#h5-0-1" id="h5-0-1" class="i">+
</a><a href="#h5-0-2" id="h5-0-2" class="i">+import android.annotation.SuppressLint
</a><a href="#h5-0-3" id="h5-0-3" class="i">+import me.rhunk.snapenhance.config.ConfigProperty
</a><a href="#h5-0-4" id="h5-0-4" class="i">+import me.rhunk.snapenhance.data.wrapper.impl.ScSize
</a><a href="#h5-0-5" id="h5-0-5" class="i">+import me.rhunk.snapenhance.features.Feature
</a><a href="#h5-0-6" id="h5-0-6" class="i">+import me.rhunk.snapenhance.features.FeatureLoadParams
</a><a href="#h5-0-7" id="h5-0-7" class="i">+import me.rhunk.snapenhance.features.impl.ConfigEnumKeys
</a><a href="#h5-0-8" id="h5-0-8" class="i">+import me.rhunk.snapenhance.hook.HookStage
</a><a href="#h5-0-9" id="h5-0-9" class="i">+import me.rhunk.snapenhance.hook.hookConstructor
</a><a href="#h5-0-10" id="h5-0-10" class="i">+
</a><a href="#h5-0-11" id="h5-0-11" class="i">+class CameraTweaks : Feature(&quot;Camera Tweaks&quot;, loadParams = FeatureLoadParams.ACTIVITY_CREATE_SYNC) {
</a><a href="#h5-0-12" id="h5-0-12" class="i">+    companion object {
</a><a href="#h5-0-13" id="h5-0-13" class="i">+        val resolutions = listOf(&quot;OFF&quot;, &quot;3264x2448&quot;, &quot;3264x1840&quot;, &quot;3264x1504&quot;, &quot;2688x1512&quot;, &quot;2560x1920&quot;, &quot;2448x2448&quot;, &quot;2340x1080&quot;, &quot;2160x1080&quot;, &quot;1920x1440&quot;, &quot;1920x1080&quot;, &quot;1600x1200&quot;, &quot;1600x960&quot;, &quot;1600x900&quot;, &quot;1600x736&quot;, &quot;1600x720&quot;, &quot;1560x720&quot;, &quot;1520x720&quot;, &quot;1440x1080&quot;, &quot;1440x720&quot;, &quot;1280x720&quot;, &quot;1080x1080&quot;, &quot;1080x720&quot;, &quot;960x720&quot;, &quot;720x720&quot;, &quot;720x480&quot;, &quot;640x480&quot;, &quot;352x288&quot;, &quot;320x240&quot;, &quot;176x144&quot;)
</a><a href="#h5-0-14" id="h5-0-14" class="i">+    }
</a><a href="#h5-0-15" id="h5-0-15" class="i">+
</a><a href="#h5-0-16" id="h5-0-16" class="i">+    private fun parseResolution(resolution: String): IntArray? {
</a><a href="#h5-0-17" id="h5-0-17" class="i">+        return resolution.takeIf { resolution != &quot;OFF&quot; }?.split(&quot;x&quot;)?.map { it.toInt() }?.toIntArray()
</a><a href="#h5-0-18" id="h5-0-18" class="i">+    }
</a><a href="#h5-0-19" id="h5-0-19" class="i">+
</a><a href="#h5-0-20" id="h5-0-20" class="i">+    @SuppressLint(&quot;MissingPermission&quot;, &quot;DiscouragedApi&quot;)
</a><a href="#h5-0-21" id="h5-0-21" class="i">+    override fun onActivityCreate() {
</a><a href="#h5-0-22" id="h5-0-22" class="i">+        ConfigEnumKeys.hookAllEnums(context.mappings.getMappedClass(&quot;enums&quot;, &quot;CAMERA&quot;)) {
</a><a href="#h5-0-23" id="h5-0-23" class="i">+            if (key == &quot;FORCE_CAMERA_HIGHEST_FPS&quot; &amp;&amp; context.config.bool(ConfigProperty.FORCE_HIGHEST_FRAME_RATE)) {
</a><a href="#h5-0-24" id="h5-0-24" class="i">+                set(true)
</a><a href="#h5-0-25" id="h5-0-25" class="i">+            }
</a><a href="#h5-0-26" id="h5-0-26" class="i">+            if (key == &quot;MEDIA_RECORDER_MAX_QUALITY_LEVEL&quot; &amp;&amp; context.config.bool(ConfigProperty.FORCE_CAMERA_SOURCE_ENCODING)) {
</a><a href="#h5-0-27" id="h5-0-27" class="i">+                value!!.javaClass.enumConstants?.let { enumData -&gt; set(enumData.filter { it.toString() == &quot;LEVEL_MAX&quot; }) }
</a><a href="#h5-0-28" id="h5-0-28" class="i">+            }
</a><a href="#h5-0-29" id="h5-0-29" class="i">+        }
</a><a href="#h5-0-30" id="h5-0-30" class="i">+
</a><a href="#h5-0-31" id="h5-0-31" class="i">+        val previewResolutionConfig = parseResolution(context.config.state(ConfigProperty.OVERRIDE_PREVIEW_RESOLUTION))
</a><a href="#h5-0-32" id="h5-0-32" class="i">+        val captureResolutionConfig = parseResolution(context.config.state(ConfigProperty.OVERRIDE_PICTURE_RESOLUTION))
</a><a href="#h5-0-33" id="h5-0-33" class="i">+
</a><a href="#h5-0-34" id="h5-0-34" class="i">+        context.mappings.getMappedClass(&quot;ScCameraSettings&quot;).hookConstructor(HookStage.BEFORE) { param -&gt;
</a><a href="#h5-0-35" id="h5-0-35" class="i">+            val previewResolution = ScSize(param.argNullable(2))
</a><a href="#h5-0-36" id="h5-0-36" class="i">+            val captureResolution = ScSize(param.argNullable(3))
</a><a href="#h5-0-37" id="h5-0-37" class="i">+
</a><a href="#h5-0-38" id="h5-0-38" class="i">+            if (previewResolution.isPresent() &amp;&amp; captureResolution.isPresent()) {
</a><a href="#h5-0-39" id="h5-0-39" class="i">+                previewResolutionConfig?.let {
</a><a href="#h5-0-40" id="h5-0-40" class="i">+                    previewResolution.first = it[0]
</a><a href="#h5-0-41" id="h5-0-41" class="i">+                    previewResolution.second = it[1]
</a><a href="#h5-0-42" id="h5-0-42" class="i">+                }
</a><a href="#h5-0-43" id="h5-0-43" class="i">+
</a><a href="#h5-0-44" id="h5-0-44" class="i">+                captureResolutionConfig?.let {
</a><a href="#h5-0-45" id="h5-0-45" class="i">+                    captureResolution.first = it[0]
</a><a href="#h5-0-46" id="h5-0-46" class="i">+                    captureResolution.second = it[1]
</a><a href="#h5-0-47" id="h5-0-47" class="i">+                }
</a><a href="#h5-0-48" id="h5-0-48" class="i">+            }
</a><a href="#h5-0-49" id="h5-0-49" class="i">+        }
</a><a href="#h5-0-50" id="h5-0-50" class="i">+    }
</a><a href="#h5-0-51" id="h5-0-51" class="i">+}</a><a href="#h5-0-52" id="h5-0-52" class="i">+
\ No newline at end of file
</a><b>diff --git a/<a id="h6" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/MediaQualityLevelOverride.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/MediaQualityLevelOverride.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/MediaQualityLevelOverride.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/features/impl/tweaks/MediaQualityLevelOverride.kt</a></b>
<a href="#h6-0" id="h6-0" class="h">@@ -13,14 +13,9 @@ class MediaQualityLevelOverride : Feature(&quot;MediaQualityLevelOverride&quot;, loadParam
</a>         Hooker.hook(context.mappings.getMappedClass(&quot;MediaQualityLevelProvider&quot;),
             context.mappings.getMappedValue(&quot;MediaQualityLevelProviderMethod&quot;),
             HookStage.BEFORE,
<a href="#h6-0-3" id="h6-0-3" class="d">-            {context.config.bool(ConfigProperty.OVERRIDE_MEDIA_QUALITY)}
</a><a href="#h6-0-4" id="h6-0-4" class="i">+            { context.config.bool(ConfigProperty.FORCE_MEDIA_SOURCE_QUALITY) }
</a>         ) { param -&gt;
<a href="#h6-0-6" id="h6-0-6" class="d">-            val currentCompressionLevel = enumQualityLevel.enumConstants
</a><a href="#h6-0-7" id="h6-0-7" class="d">-                .firstOrNull { it.toString() == context.config.state(ConfigProperty.MEDIA_QUALITY_LEVEL)} ?: run {
</a><a href="#h6-0-8" id="h6-0-8" class="d">-                context.longToast(&quot;Invalid media quality level: ${context.config.state(ConfigProperty.MEDIA_QUALITY_LEVEL)}&quot;)
</a><a href="#h6-0-9" id="h6-0-9" class="d">-                return@hook
</a><a href="#h6-0-10" id="h6-0-10" class="d">-            }
</a><a href="#h6-0-11" id="h6-0-11" class="d">-            param.setResult(currentCompressionLevel)
</a><a href="#h6-0-12" id="h6-0-12" class="i">+            param.setResult(enumQualityLevel.enumConstants.firstOrNull { it.toString() == &quot;LEVEL_MAX&quot; } )
</a>         }
     }
 } 
\ No newline at end of file
<b>diff --git a/<a id="h7" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/features/impl/ui/menus/impl/SettingsMenu.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/features/impl/ui/menus/impl/SettingsMenu.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/features/impl/ui/menus/impl/SettingsMenu.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/features/impl/ui/menus/impl/SettingsMenu.kt</a></b>
<a href="#h7-0" id="h7-0" class="h">@@ -36,17 +36,29 @@ class SettingsMenu : AbstractMenu() {
</a> 
     @SuppressLint(&quot;SetTextI18n&quot;)
     private fun createPropertyView(viewModel: View, property: ConfigProperty): View {
<a href="#h7-0-3" id="h7-0-3" class="i">+        val propertyName = context.translation.get(property.nameKey)
</a>         val updateButtonText: (TextView, String) -&gt; Unit = { textView, text -&gt;
<a href="#h7-0-5" id="h7-0-5" class="d">-            textView.text = &quot;${context.translation.get(property.nameKey)}${if (text.isEmpty()) &quot;&quot; else &quot;: $text&quot;}&quot;
</a><a href="#h7-0-6" id="h7-0-6" class="i">+            textView.text = &quot;$propertyName${if (text.isEmpty()) &quot;&quot; else &quot;: $text&quot;}&quot;
</a>         }
 
         val updateLocalizedText: (TextView, String) -&gt; Unit = { textView, value -&gt;
<a href="#h7-0-10" id="h7-0-10" class="d">-            updateButtonText(textView, value.let { if (it.isEmpty()) &quot;(empty)&quot; else context.translation.get(&quot;option.&quot; + property.nameKey + &quot;.&quot; + it) })
</a><a href="#h7-0-11" id="h7-0-11" class="i">+            updateButtonText(textView, value.let {
</a><a href="#h7-0-12" id="h7-0-12" class="i">+                if (it.isEmpty()) {
</a><a href="#h7-0-13" id="h7-0-13" class="i">+                    &quot;(empty)&quot;
</a><a href="#h7-0-14" id="h7-0-14" class="i">+                }
</a><a href="#h7-0-15" id="h7-0-15" class="i">+                else {
</a><a href="#h7-0-16" id="h7-0-16" class="i">+                    if (property.disableValueLocalization) {
</a><a href="#h7-0-17" id="h7-0-17" class="i">+                        it
</a><a href="#h7-0-18" id="h7-0-18" class="i">+                    } else {
</a><a href="#h7-0-19" id="h7-0-19" class="i">+                        context.translation.get(&quot;option.&quot; + property.nameKey + &quot;.&quot; + it)
</a><a href="#h7-0-20" id="h7-0-20" class="i">+                    }
</a><a href="#h7-0-21" id="h7-0-21" class="i">+                }
</a><a href="#h7-0-22" id="h7-0-22" class="i">+            })
</a>         }
 
         val textEditor: ((String) -&gt; Unit) -&gt; Unit = { updateValue -&gt;
             val builder = AlertDialog.Builder(viewModel.context)
<a href="#h7-0-27" id="h7-0-27" class="d">-            builder.setTitle(context.translation.get(property.nameKey))
</a><a href="#h7-0-28" id="h7-0-28" class="i">+            builder.setTitle(propertyName)
</a> 
             val input = EditText(viewModel.context)
             input.inputType = InputType.TYPE_CLASS_TEXT
<a href="#h7-1" id="h7-1" class="h">@@ -98,7 +110,7 @@ class SettingsMenu : AbstractMenu() {
</a>             }
             is ConfigStateValue -&gt; {
                 val switch = Switch(viewModel.context)
<a href="#h7-1-3" id="h7-1-3" class="d">-                switch.text = context.translation.get(property.nameKey)
</a><a href="#h7-1-4" id="h7-1-4" class="i">+                switch.text = propertyName
</a>                 switch.isChecked = property.valueContainer.value()
                 switch.setOnCheckedChangeListener { _, isChecked -&gt;
                     property.valueContainer.writeFrom(isChecked.toString())
<a href="#h7-2" id="h7-2" class="h">@@ -112,10 +124,13 @@ class SettingsMenu : AbstractMenu() {
</a> 
                 button.setOnClickListener {_ -&gt;
                     val builder = AlertDialog.Builder(viewModel.context)
<a href="#h7-2-3" id="h7-2-3" class="d">-                    builder.setTitle(context.translation.get(property.nameKey))
</a><a href="#h7-2-4" id="h7-2-4" class="i">+                    builder.setTitle(propertyName)
</a> 
                     builder.setSingleChoiceItems(
<a href="#h7-2-7" id="h7-2-7" class="d">-                        property.valueContainer.keys().toTypedArray().map { context.translation.get(&quot;option.&quot; + property.nameKey + &quot;.&quot; + it) }.toTypedArray(),
</a><a href="#h7-2-8" id="h7-2-8" class="i">+                        property.valueContainer.keys().toTypedArray().map {
</a><a href="#h7-2-9" id="h7-2-9" class="i">+                            if (property.disableValueLocalization) it
</a><a href="#h7-2-10" id="h7-2-10" class="i">+                            else context.translation.get(&quot;option.&quot; + property.nameKey + &quot;.&quot; + it)
</a><a href="#h7-2-11" id="h7-2-11" class="i">+                        }.toTypedArray(),
</a>                         property.valueContainer.keys().indexOf(property.valueContainer.value())
                     ) { _, which -&gt;
                         property.valueContainer.writeFrom(property.valueContainer.keys()[which])
<a href="#h7-3" id="h7-3" class="h">@@ -136,12 +151,15 @@ class SettingsMenu : AbstractMenu() {
</a> 
                 button.setOnClickListener {_ -&gt;
                     val builder = AlertDialog.Builder(viewModel.context)
<a href="#h7-3-3" id="h7-3-3" class="d">-                    builder.setTitle(context.translation.get(property.nameKey))
</a><a href="#h7-3-4" id="h7-3-4" class="i">+                    builder.setTitle(propertyName)
</a> 
                     val sortedStates = property.valueContainer.value().toSortedMap()
 
                     builder.setMultiChoiceItems(
<a href="#h7-3-9" id="h7-3-9" class="d">-                        sortedStates.toSortedMap().map { context.translation.get(&quot;option.&quot; + property.nameKey + &quot;.&quot; +it.key) }.toTypedArray(),
</a><a href="#h7-3-10" id="h7-3-10" class="i">+                        sortedStates.toSortedMap().map {
</a><a href="#h7-3-11" id="h7-3-11" class="i">+                            if (property.disableValueLocalization) it.key
</a><a href="#h7-3-12" id="h7-3-12" class="i">+                            else context.translation.get(&quot;option.&quot; + property.nameKey + &quot;.&quot; + it.key)
</a><a href="#h7-3-13" id="h7-3-13" class="i">+                        }.toTypedArray(),
</a>                         sortedStates.map { it.value }.toBooleanArray()
                     ) { _, which, isChecked -&gt;
                         sortedStates.keys.toList()[which].let { key -&gt;
<b>diff --git a/<a id="h8" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/manager/impl/FeatureManager.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/manager/impl/FeatureManager.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/manager/impl/FeatureManager.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/manager/impl/FeatureManager.kt</a></b>
<a href="#h8-0" id="h8-0" class="h">@@ -27,6 +27,7 @@ import me.rhunk.snapenhance.features.impl.spying.AnonymousStoryViewing
</a> import me.rhunk.snapenhance.features.impl.spying.MessageLogger
 import me.rhunk.snapenhance.features.impl.spying.PreventReadReceipts
 import me.rhunk.snapenhance.features.impl.spying.StealthMode
<a href="#h8-0-3" id="h8-0-3" class="i">+import me.rhunk.snapenhance.features.impl.tweaks.CameraTweaks
</a> import me.rhunk.snapenhance.features.impl.ui.UITweaks
 import me.rhunk.snapenhance.features.impl.ui.menus.MenuViewInjector
 import me.rhunk.snapenhance.manager.Manager
<a href="#h8-1" id="h8-1" class="h">@@ -78,6 +79,7 @@ class FeatureManager(private val context: ModContext) : Manager {
</a>         register(AppPasscode::class)
         register(LocationSpoofer::class)
         register(AutoUpdater::class)
<a href="#h8-1-3" id="h8-1-3" class="i">+        register(CameraTweaks::class)
</a>         register(InfiniteStoryBoost::class)
 
         initializeFeatures()
<b>diff --git a/<a id="h9" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/manager/impl/MappingManager.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/manager/impl/MappingManager.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/manager/impl/MappingManager.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/manager/impl/MappingManager.kt</a></b>
<a href="#h9-0" id="h9-0" class="h">@@ -16,15 +16,17 @@ import me.rhunk.snapenhance.manager.Manager
</a> import me.rhunk.snapenhance.mapping.Mapper
 import me.rhunk.snapenhance.mapping.impl.BCryptClassMapper
 import me.rhunk.snapenhance.mapping.impl.CallbackMapper
<a href="#h9-0-3" id="h9-0-3" class="d">-import me.rhunk.snapenhance.mapping.impl.DefaultMediaItemMapper
</a> import me.rhunk.snapenhance.mapping.impl.EnumMapper
<a href="#h9-0-5" id="h9-0-5" class="i">+import me.rhunk.snapenhance.mapping.impl.DefaultMediaItemMapper
</a> import me.rhunk.snapenhance.mapping.impl.OperaPageViewControllerMapper
 import me.rhunk.snapenhance.mapping.impl.PlatformAnalyticsCreatorMapper
 import me.rhunk.snapenhance.mapping.impl.PlusSubscriptionMapper
<a href="#h9-0-9" id="h9-0-9" class="i">+import me.rhunk.snapenhance.mapping.impl.ScCameraSettingsMapper
</a> import me.rhunk.snapenhance.mapping.impl.StoryBoostStateMapper
 import me.rhunk.snapenhance.util.getObjectField
 import java.nio.charset.StandardCharsets
 import java.util.concurrent.ConcurrentHashMap
<a href="#h9-0-14" id="h9-0-14" class="i">+import kotlin.concurrent.thread
</a> 
 @Suppress(&quot;UNCHECKED_CAST&quot;)
 class MappingManager(private val context: ModContext) : Manager {
<a href="#h9-1" id="h9-1" class="h">@@ -36,6 +38,7 @@ class MappingManager(private val context: ModContext) : Manager {
</a>         add(DefaultMediaItemMapper())
         add(BCryptClassMapper())
         add(PlatformAnalyticsCreatorMapper())
<a href="#h9-1-3" id="h9-1-3" class="i">+        add(ScCameraSettingsMapper())
</a>         add(StoryBoostStateMapper())
     }
 
<b>diff --git a/<a id="h10" href="../file/app/src/main/kotlin/me/rhunk/snapenhance/mapping/impl/ScCameraSettingsMapper.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/mapping/impl/ScCameraSettingsMapper.kt</a> b/<a href="../file/app/src/main/kotlin/me/rhunk/snapenhance/mapping/impl/ScCameraSettingsMapper.kt.html">app/src/main/kotlin/me/rhunk/snapenhance/mapping/impl/ScCameraSettingsMapper.kt</a></b>
<a href="#h10-0" id="h10-0" class="h">@@ -0,0 +1,21 @@
</a><a href="#h10-0-0" id="h10-0-0" class="i">+package me.rhunk.snapenhance.mapping.impl
</a><a href="#h10-0-1" id="h10-0-1" class="i">+
</a><a href="#h10-0-2" id="h10-0-2" class="i">+import me.rhunk.snapenhance.mapping.Mapper
</a><a href="#h10-0-3" id="h10-0-3" class="i">+
</a><a href="#h10-0-4" id="h10-0-4" class="i">+class ScCameraSettingsMapper : Mapper() {
</a><a href="#h10-0-5" id="h10-0-5" class="i">+    override fun useClasses(
</a><a href="#h10-0-6" id="h10-0-6" class="i">+        classLoader: ClassLoader,
</a><a href="#h10-0-7" id="h10-0-7" class="i">+        classes: List&lt;Class&lt;*&gt;&gt;,
</a><a href="#h10-0-8" id="h10-0-8" class="i">+        mappings: MutableMap&lt;String, Any&gt;
</a><a href="#h10-0-9" id="h10-0-9" class="i">+    ) {
</a><a href="#h10-0-10" id="h10-0-10" class="i">+        for (clazz in classes) {
</a><a href="#h10-0-11" id="h10-0-11" class="i">+            if (clazz.constructors.isEmpty()) continue
</a><a href="#h10-0-12" id="h10-0-12" class="i">+            val parameters =  clazz.constructors.first().parameterTypes
</a><a href="#h10-0-13" id="h10-0-13" class="i">+            if (parameters.size &lt; 27) continue
</a><a href="#h10-0-14" id="h10-0-14" class="i">+            val firstParameter = parameters[0]
</a><a href="#h10-0-15" id="h10-0-15" class="i">+            if (!firstParameter.isEnum || firstParameter.enumConstants.find { it.toString() == &quot;CONTINUOUS_PICTURE&quot; } == null) continue
</a><a href="#h10-0-16" id="h10-0-16" class="i">+            mappings[&quot;ScCameraSettings&quot;] = clazz.name
</a><a href="#h10-0-17" id="h10-0-17" class="i">+            return
</a><a href="#h10-0-18" id="h10-0-18" class="i">+        }
</a><a href="#h10-0-19" id="h10-0-19" class="i">+    }
</a><a href="#h10-0-20" id="h10-0-20" class="i">+}</a><a href="#h10-0-21" id="h10-0-21" class="i">+
\ No newline at end of file
</a></pre>
</div>
</body>
</html>
